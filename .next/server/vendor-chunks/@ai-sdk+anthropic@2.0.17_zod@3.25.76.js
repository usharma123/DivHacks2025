"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@ai-sdk+anthropic@2.0.17_zod@3.25.76";
exports.ids = ["vendor-chunks/@ai-sdk+anthropic@2.0.17_zod@3.25.76"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@ai-sdk+anthropic@2.0.17_zod@3.25.76/node_modules/@ai-sdk/anthropic/dist/index.mjs":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@ai-sdk+anthropic@2.0.17_zod@3.25.76/node_modules/@ai-sdk/anthropic/dist/index.mjs ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   anthropic: () => (/* binding */ anthropic),\n/* harmony export */   createAnthropic: () => (/* binding */ createAnthropic)\n/* harmony export */ });\n/* harmony import */ var _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ai-sdk/provider */ \"(rsc)/./node_modules/.pnpm/@ai-sdk+provider@2.0.0/node_modules/@ai-sdk/provider/dist/index.mjs\");\n/* harmony import */ var _ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ai-sdk/provider-utils */ \"(rsc)/./node_modules/.pnpm/@ai-sdk+provider-utils@3.0.9_zod@3.25.76/node_modules/@ai-sdk/provider-utils/dist/index.mjs\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/./node_modules/.pnpm/zod@3.25.76/node_modules/zod/v4/classic/schemas.js\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/./node_modules/.pnpm/zod@3.25.76/node_modules/zod/v4/index.js\");\n// src/anthropic-provider.ts\n\n\n\n// src/anthropic-messages-language-model.ts\n\n\n\n\n// src/anthropic-error.ts\n\n\nvar anthropicErrorDataSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"error\"),\n  error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n  })\n});\nvar anthropicFailedResponseHandler = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonErrorResponseHandler)({\n  errorSchema: anthropicErrorDataSchema,\n  errorToMessage: (data) => data.error.message\n});\n\n// src/anthropic-messages-options.ts\n\nvar anthropicFilePartProviderOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n   * Citation configuration for this document.\n   * When enabled, this document will generate citations in the response.\n   */\n  citations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    /**\n     * Enable citations for this document\n     */\n    enabled: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean()\n  }).optional(),\n  /**\n   * Custom title for the document.\n   * If not provided, the filename will be used.\n   */\n  title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n   * Context about the document that will be passed to the model\n   * but not used towards cited content.\n   * Useful for storing document metadata as text or stringified JSON.\n   */\n  context: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar anthropicProviderOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  sendReasoning: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  thinking: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"enabled\"), zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"disabled\")]),\n    budgetTokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional()\n  }).optional(),\n  /**\n   * Whether to disable parallel function calling during tool use. Default is false.\n   * When set to true, Claude will use at most one tool per response.\n   */\n  disableParallelToolUse: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n   * Cache control settings for this message.\n   * See https://docs.anthropic.com/en/docs/build-with-claude/prompt-caching\n   */\n  cacheControl: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"ephemeral\"),\n    ttl: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"5m\"), zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"1h\")]).optional()\n  }).optional()\n});\n\n// src/anthropic-prepare-tools.ts\n\n\n// src/get-cache-control.ts\nfunction getCacheControl(providerMetadata) {\n  var _a;\n  const anthropic2 = providerMetadata == null ? void 0 : providerMetadata.anthropic;\n  const cacheControlValue = (_a = anthropic2 == null ? void 0 : anthropic2.cacheControl) != null ? _a : anthropic2 == null ? void 0 : anthropic2.cache_control;\n  return cacheControlValue;\n}\n\n// src/tool/web-search_20250305.ts\n\n\nvar webSearch_20250305ArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n   * Maximum number of web searches Claude can perform during the conversation.\n   */\n  maxUses: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n  /**\n   * Optional list of domains that Claude is allowed to search.\n   */\n  allowedDomains: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n  /**\n   * Optional list of domains that Claude should avoid when searching.\n   */\n  blockedDomains: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n  /**\n   * Optional user location information to provide geographically relevant search results.\n   */\n  userLocation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"approximate\"),\n    city: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    region: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    country: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    timezone: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n  }).optional()\n});\nvar webSearch_20250305OutputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    pageAge: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n    encryptedContent: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n  })\n);\nvar factory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactoryWithOutputSchema)({\n  id: \"anthropic.web_search_20250305\",\n  name: \"web_search\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n  }),\n  outputSchema: webSearch_20250305OutputSchema\n});\nvar webSearch_20250305 = (args = {}) => {\n  return factory(args);\n};\n\n// src/anthropic-prepare-tools.ts\nfunction isWebSearchTool(tool) {\n  return typeof tool === \"object\" && tool !== null && \"type\" in tool && tool.type === \"web_search_20250305\";\n}\nfunction prepareTools({\n  tools,\n  toolChoice,\n  disableParallelToolUse\n}) {\n  tools = (tools == null ? void 0 : tools.length) ? tools : void 0;\n  const toolWarnings = [];\n  const betas = /* @__PURE__ */ new Set();\n  if (tools == null) {\n    return { tools: void 0, toolChoice: void 0, toolWarnings, betas };\n  }\n  const anthropicTools2 = [];\n  for (const tool of tools) {\n    if (isWebSearchTool(tool)) {\n      anthropicTools2.push(tool);\n      continue;\n    }\n    switch (tool.type) {\n      case \"function\":\n        const cacheControl = getCacheControl(tool.providerOptions);\n        anthropicTools2.push({\n          name: tool.name,\n          description: tool.description,\n          input_schema: tool.inputSchema,\n          cache_control: cacheControl\n        });\n        break;\n      case \"provider-defined\":\n        switch (tool.id) {\n          case \"anthropic.computer_20250124\":\n            betas.add(\"computer-use-2025-01-24\");\n            anthropicTools2.push({\n              name: \"computer\",\n              type: \"computer_20250124\",\n              display_width_px: tool.args.displayWidthPx,\n              display_height_px: tool.args.displayHeightPx,\n              display_number: tool.args.displayNumber\n            });\n            break;\n          case \"anthropic.computer_20241022\":\n            betas.add(\"computer-use-2024-10-22\");\n            anthropicTools2.push({\n              name: \"computer\",\n              type: \"computer_20241022\",\n              display_width_px: tool.args.displayWidthPx,\n              display_height_px: tool.args.displayHeightPx,\n              display_number: tool.args.displayNumber\n            });\n            break;\n          case \"anthropic.text_editor_20250124\":\n            betas.add(\"computer-use-2025-01-24\");\n            anthropicTools2.push({\n              name: \"str_replace_editor\",\n              type: \"text_editor_20250124\"\n            });\n            break;\n          case \"anthropic.text_editor_20241022\":\n            betas.add(\"computer-use-2024-10-22\");\n            anthropicTools2.push({\n              name: \"str_replace_editor\",\n              type: \"text_editor_20241022\"\n            });\n            break;\n          case \"anthropic.text_editor_20250429\":\n            betas.add(\"computer-use-2025-01-24\");\n            anthropicTools2.push({\n              name: \"str_replace_based_edit_tool\",\n              type: \"text_editor_20250429\"\n            });\n            break;\n          case \"anthropic.bash_20250124\":\n            betas.add(\"computer-use-2025-01-24\");\n            anthropicTools2.push({\n              name: \"bash\",\n              type: \"bash_20250124\"\n            });\n            break;\n          case \"anthropic.bash_20241022\":\n            betas.add(\"computer-use-2024-10-22\");\n            anthropicTools2.push({\n              name: \"bash\",\n              type: \"bash_20241022\"\n            });\n            break;\n          case \"anthropic.web_search_20250305\": {\n            const args = webSearch_20250305ArgsSchema.parse(tool.args);\n            anthropicTools2.push({\n              type: \"web_search_20250305\",\n              name: \"web_search\",\n              max_uses: args.maxUses,\n              allowed_domains: args.allowedDomains,\n              blocked_domains: args.blockedDomains,\n              user_location: args.userLocation\n            });\n            break;\n          }\n          case \"anthropic.code_execution_20250522\": {\n            betas.add(\"code-execution-2025-05-22\");\n            anthropicTools2.push({\n              type: \"code_execution_20250522\",\n              name: \"code_execution\"\n            });\n            break;\n          }\n          default:\n            toolWarnings.push({ type: \"unsupported-tool\", tool });\n            break;\n        }\n        break;\n      default:\n        toolWarnings.push({ type: \"unsupported-tool\", tool });\n        break;\n    }\n  }\n  if (toolChoice == null) {\n    return {\n      tools: anthropicTools2,\n      toolChoice: disableParallelToolUse ? { type: \"auto\", disable_parallel_tool_use: disableParallelToolUse } : void 0,\n      toolWarnings,\n      betas\n    };\n  }\n  const type = toolChoice.type;\n  switch (type) {\n    case \"auto\":\n      return {\n        tools: anthropicTools2,\n        toolChoice: {\n          type: \"auto\",\n          disable_parallel_tool_use: disableParallelToolUse\n        },\n        toolWarnings,\n        betas\n      };\n    case \"required\":\n      return {\n        tools: anthropicTools2,\n        toolChoice: {\n          type: \"any\",\n          disable_parallel_tool_use: disableParallelToolUse\n        },\n        toolWarnings,\n        betas\n      };\n    case \"none\":\n      return { tools: void 0, toolChoice: void 0, toolWarnings, betas };\n    case \"tool\":\n      return {\n        tools: anthropicTools2,\n        toolChoice: {\n          type: \"tool\",\n          name: toolChoice.toolName,\n          disable_parallel_tool_use: disableParallelToolUse\n        },\n        toolWarnings,\n        betas\n      };\n    default: {\n      const _exhaustiveCheck = type;\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n        functionality: `tool choice type: ${_exhaustiveCheck}`\n      });\n    }\n  }\n}\n\n// src/convert-to-anthropic-messages-prompt.ts\n\n\n\n// src/tool/code-execution_20250522.ts\n\n\nvar codeExecution_20250522OutputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_execution_result\"),\n  stdout: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  stderr: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  return_code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n});\nvar factory2 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactoryWithOutputSchema)({\n  id: \"anthropic.code_execution_20250522\",\n  name: \"code_execution\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n  }),\n  outputSchema: codeExecution_20250522OutputSchema\n});\nvar codeExecution_20250522 = (args = {}) => {\n  return factory2(args);\n};\n\n// src/convert-to-anthropic-messages-prompt.ts\nfunction convertToString(data) {\n  if (typeof data === \"string\") {\n    return Buffer.from(data, \"base64\").toString(\"utf-8\");\n  }\n  if (data instanceof Uint8Array) {\n    return new TextDecoder().decode(data);\n  }\n  if (data instanceof URL) {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n      functionality: \"URL-based text documents are not supported for citations\"\n    });\n  }\n  throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n    functionality: `unsupported data type for text documents: ${typeof data}`\n  });\n}\nasync function convertToAnthropicMessagesPrompt({\n  prompt,\n  sendReasoning,\n  warnings\n}) {\n  var _a, _b, _c, _d, _e;\n  const betas = /* @__PURE__ */ new Set();\n  const blocks = groupIntoBlocks(prompt);\n  let system = void 0;\n  const messages = [];\n  async function shouldEnableCitations(providerMetadata) {\n    var _a2, _b2;\n    const anthropicOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"anthropic\",\n      providerOptions: providerMetadata,\n      schema: anthropicFilePartProviderOptions\n    });\n    return (_b2 = (_a2 = anthropicOptions == null ? void 0 : anthropicOptions.citations) == null ? void 0 : _a2.enabled) != null ? _b2 : false;\n  }\n  async function getDocumentMetadata(providerMetadata) {\n    const anthropicOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"anthropic\",\n      providerOptions: providerMetadata,\n      schema: anthropicFilePartProviderOptions\n    });\n    return {\n      title: anthropicOptions == null ? void 0 : anthropicOptions.title,\n      context: anthropicOptions == null ? void 0 : anthropicOptions.context\n    };\n  }\n  for (let i = 0; i < blocks.length; i++) {\n    const block = blocks[i];\n    const isLastBlock = i === blocks.length - 1;\n    const type = block.type;\n    switch (type) {\n      case \"system\": {\n        if (system != null) {\n          throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n            functionality: \"Multiple system messages that are separated by user/assistant messages\"\n          });\n        }\n        system = block.messages.map(({ content, providerOptions }) => ({\n          type: \"text\",\n          text: content,\n          cache_control: getCacheControl(providerOptions)\n        }));\n        break;\n      }\n      case \"user\": {\n        const anthropicContent = [];\n        for (const message of block.messages) {\n          const { role, content } = message;\n          switch (role) {\n            case \"user\": {\n              for (let j = 0; j < content.length; j++) {\n                const part = content[j];\n                const isLastPart = j === content.length - 1;\n                const cacheControl = (_a = getCacheControl(part.providerOptions)) != null ? _a : isLastPart ? getCacheControl(message.providerOptions) : void 0;\n                switch (part.type) {\n                  case \"text\": {\n                    anthropicContent.push({\n                      type: \"text\",\n                      text: part.text,\n                      cache_control: cacheControl\n                    });\n                    break;\n                  }\n                  case \"file\": {\n                    if (part.mediaType.startsWith(\"image/\")) {\n                      anthropicContent.push({\n                        type: \"image\",\n                        source: part.data instanceof URL ? {\n                          type: \"url\",\n                          url: part.data.toString()\n                        } : {\n                          type: \"base64\",\n                          media_type: part.mediaType === \"image/*\" ? \"image/jpeg\" : part.mediaType,\n                          data: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)\n                        },\n                        cache_control: cacheControl\n                      });\n                    } else if (part.mediaType === \"application/pdf\") {\n                      betas.add(\"pdfs-2024-09-25\");\n                      const enableCitations = await shouldEnableCitations(\n                        part.providerOptions\n                      );\n                      const metadata = await getDocumentMetadata(\n                        part.providerOptions\n                      );\n                      anthropicContent.push({\n                        type: \"document\",\n                        source: part.data instanceof URL ? {\n                          type: \"url\",\n                          url: part.data.toString()\n                        } : {\n                          type: \"base64\",\n                          media_type: \"application/pdf\",\n                          data: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)\n                        },\n                        title: (_b = metadata.title) != null ? _b : part.filename,\n                        ...metadata.context && { context: metadata.context },\n                        ...enableCitations && {\n                          citations: { enabled: true }\n                        },\n                        cache_control: cacheControl\n                      });\n                    } else if (part.mediaType === \"text/plain\") {\n                      const enableCitations = await shouldEnableCitations(\n                        part.providerOptions\n                      );\n                      const metadata = await getDocumentMetadata(\n                        part.providerOptions\n                      );\n                      anthropicContent.push({\n                        type: \"document\",\n                        source: part.data instanceof URL ? {\n                          type: \"url\",\n                          url: part.data.toString()\n                        } : {\n                          type: \"text\",\n                          media_type: \"text/plain\",\n                          data: convertToString(part.data)\n                        },\n                        title: (_c = metadata.title) != null ? _c : part.filename,\n                        ...metadata.context && { context: metadata.context },\n                        ...enableCitations && {\n                          citations: { enabled: true }\n                        },\n                        cache_control: cacheControl\n                      });\n                    } else {\n                      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                        functionality: `media type: ${part.mediaType}`\n                      });\n                    }\n                    break;\n                  }\n                }\n              }\n              break;\n            }\n            case \"tool\": {\n              for (let i2 = 0; i2 < content.length; i2++) {\n                const part = content[i2];\n                const isLastPart = i2 === content.length - 1;\n                const cacheControl = (_d = getCacheControl(part.providerOptions)) != null ? _d : isLastPart ? getCacheControl(message.providerOptions) : void 0;\n                const output = part.output;\n                let contentValue;\n                switch (output.type) {\n                  case \"content\":\n                    contentValue = output.value.map((contentPart) => {\n                      switch (contentPart.type) {\n                        case \"text\":\n                          return {\n                            type: \"text\",\n                            text: contentPart.text,\n                            cache_control: void 0\n                          };\n                        case \"media\": {\n                          if (contentPart.mediaType.startsWith(\"image/\")) {\n                            return {\n                              type: \"image\",\n                              source: {\n                                type: \"base64\",\n                                media_type: contentPart.mediaType,\n                                data: contentPart.data\n                              },\n                              cache_control: void 0\n                            };\n                          }\n                          throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                            functionality: `media type: ${contentPart.mediaType}`\n                          });\n                        }\n                      }\n                    });\n                    break;\n                  case \"text\":\n                  case \"error-text\":\n                    contentValue = output.value;\n                    break;\n                  case \"json\":\n                  case \"error-json\":\n                  default:\n                    contentValue = JSON.stringify(output.value);\n                    break;\n                }\n                anthropicContent.push({\n                  type: \"tool_result\",\n                  tool_use_id: part.toolCallId,\n                  content: contentValue,\n                  is_error: output.type === \"error-text\" || output.type === \"error-json\" ? true : void 0,\n                  cache_control: cacheControl\n                });\n              }\n              break;\n            }\n            default: {\n              const _exhaustiveCheck = role;\n              throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n            }\n          }\n        }\n        messages.push({ role: \"user\", content: anthropicContent });\n        break;\n      }\n      case \"assistant\": {\n        const anthropicContent = [];\n        for (let j = 0; j < block.messages.length; j++) {\n          const message = block.messages[j];\n          const isLastMessage = j === block.messages.length - 1;\n          const { content } = message;\n          for (let k = 0; k < content.length; k++) {\n            const part = content[k];\n            const isLastContentPart = k === content.length - 1;\n            const cacheControl = (_e = getCacheControl(part.providerOptions)) != null ? _e : isLastContentPart ? getCacheControl(message.providerOptions) : void 0;\n            switch (part.type) {\n              case \"text\": {\n                anthropicContent.push({\n                  type: \"text\",\n                  text: (\n                    // trim the last text part if it's the last message in the block\n                    // because Anthropic does not allow trailing whitespace\n                    // in pre-filled assistant responses\n                    isLastBlock && isLastMessage && isLastContentPart ? part.text.trim() : part.text\n                  ),\n                  cache_control: cacheControl\n                });\n                break;\n              }\n              case \"reasoning\": {\n                if (sendReasoning) {\n                  const reasoningMetadata = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n                    provider: \"anthropic\",\n                    providerOptions: part.providerOptions,\n                    schema: anthropicReasoningMetadataSchema\n                  });\n                  if (reasoningMetadata != null) {\n                    if (reasoningMetadata.signature != null) {\n                      anthropicContent.push({\n                        type: \"thinking\",\n                        thinking: part.text,\n                        signature: reasoningMetadata.signature,\n                        cache_control: cacheControl\n                      });\n                    } else if (reasoningMetadata.redactedData != null) {\n                      anthropicContent.push({\n                        type: \"redacted_thinking\",\n                        data: reasoningMetadata.redactedData,\n                        cache_control: cacheControl\n                      });\n                    } else {\n                      warnings.push({\n                        type: \"other\",\n                        message: \"unsupported reasoning metadata\"\n                      });\n                    }\n                  } else {\n                    warnings.push({\n                      type: \"other\",\n                      message: \"unsupported reasoning metadata\"\n                    });\n                  }\n                } else {\n                  warnings.push({\n                    type: \"other\",\n                    message: \"sending reasoning content is disabled for this model\"\n                  });\n                }\n                break;\n              }\n              case \"tool-call\": {\n                if (part.providerExecuted) {\n                  if (part.toolName === \"web_search\") {\n                    anthropicContent.push({\n                      type: \"server_tool_use\",\n                      id: part.toolCallId,\n                      name: \"web_search\",\n                      input: part.input,\n                      cache_control: cacheControl\n                    });\n                    break;\n                  }\n                  if (part.toolName === \"code_execution\") {\n                    anthropicContent.push({\n                      type: \"server_tool_use\",\n                      id: part.toolCallId,\n                      name: \"code_execution\",\n                      input: part.input,\n                      cache_control: cacheControl\n                    });\n                    break;\n                  }\n                  warnings.push({\n                    type: \"other\",\n                    message: `provider executed tool call for tool ${part.toolName} is not supported`\n                  });\n                  break;\n                }\n                anthropicContent.push({\n                  type: \"tool_use\",\n                  id: part.toolCallId,\n                  name: part.toolName,\n                  input: part.input,\n                  cache_control: cacheControl\n                });\n                break;\n              }\n              case \"tool-result\": {\n                if (part.toolName === \"web_search\") {\n                  const output = part.output;\n                  if (output.type !== \"json\") {\n                    warnings.push({\n                      type: \"other\",\n                      message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`\n                    });\n                    break;\n                  }\n                  const webSearchOutput = webSearch_20250305OutputSchema.parse(\n                    output.value\n                  );\n                  anthropicContent.push({\n                    type: \"web_search_tool_result\",\n                    tool_use_id: part.toolCallId,\n                    content: webSearchOutput.map((result) => ({\n                      url: result.url,\n                      title: result.title,\n                      page_age: result.pageAge,\n                      encrypted_content: result.encryptedContent,\n                      type: result.type\n                    })),\n                    cache_control: cacheControl\n                  });\n                  break;\n                }\n                if (part.toolName === \"code_execution\") {\n                  const output = part.output;\n                  if (output.type !== \"json\") {\n                    warnings.push({\n                      type: \"other\",\n                      message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`\n                    });\n                    break;\n                  }\n                  const codeExecutionOutput = codeExecution_20250522OutputSchema.parse(output.value);\n                  anthropicContent.push({\n                    type: \"code_execution_tool_result\",\n                    tool_use_id: part.toolCallId,\n                    content: {\n                      type: codeExecutionOutput.type,\n                      stdout: codeExecutionOutput.stdout,\n                      stderr: codeExecutionOutput.stderr,\n                      return_code: codeExecutionOutput.return_code\n                    },\n                    cache_control: cacheControl\n                  });\n                  break;\n                }\n                warnings.push({\n                  type: \"other\",\n                  message: `provider executed tool result for tool ${part.toolName} is not supported`\n                });\n                break;\n              }\n            }\n          }\n        }\n        messages.push({ role: \"assistant\", content: anthropicContent });\n        break;\n      }\n      default: {\n        const _exhaustiveCheck = type;\n        throw new Error(`content type: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  return {\n    prompt: { system, messages },\n    betas\n  };\n}\nfunction groupIntoBlocks(prompt) {\n  const blocks = [];\n  let currentBlock = void 0;\n  for (const message of prompt) {\n    const { role } = message;\n    switch (role) {\n      case \"system\": {\n        if ((currentBlock == null ? void 0 : currentBlock.type) !== \"system\") {\n          currentBlock = { type: \"system\", messages: [] };\n          blocks.push(currentBlock);\n        }\n        currentBlock.messages.push(message);\n        break;\n      }\n      case \"assistant\": {\n        if ((currentBlock == null ? void 0 : currentBlock.type) !== \"assistant\") {\n          currentBlock = { type: \"assistant\", messages: [] };\n          blocks.push(currentBlock);\n        }\n        currentBlock.messages.push(message);\n        break;\n      }\n      case \"user\": {\n        if ((currentBlock == null ? void 0 : currentBlock.type) !== \"user\") {\n          currentBlock = { type: \"user\", messages: [] };\n          blocks.push(currentBlock);\n        }\n        currentBlock.messages.push(message);\n        break;\n      }\n      case \"tool\": {\n        if ((currentBlock == null ? void 0 : currentBlock.type) !== \"user\") {\n          currentBlock = { type: \"user\", messages: [] };\n          blocks.push(currentBlock);\n        }\n        currentBlock.messages.push(message);\n        break;\n      }\n      default: {\n        const _exhaustiveCheck = role;\n        throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  return blocks;\n}\n\n// src/map-anthropic-stop-reason.ts\nfunction mapAnthropicStopReason({\n  finishReason,\n  isJsonResponseFromTool\n}) {\n  switch (finishReason) {\n    case \"pause_turn\":\n    case \"end_turn\":\n    case \"stop_sequence\":\n      return \"stop\";\n    case \"refusal\":\n      return \"content-filter\";\n    case \"tool_use\":\n      return isJsonResponseFromTool ? \"stop\" : \"tool-calls\";\n    case \"max_tokens\":\n      return \"length\";\n    default:\n      return \"unknown\";\n  }\n}\n\n// src/anthropic-messages-language-model.ts\nvar citationSchemas = {\n  webSearchResult: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_result_location\"),\n    cited_text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    encrypted_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n  }),\n  pageLocation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"page_location\"),\n    cited_text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    document_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    document_title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n    start_page_number: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    end_page_number: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n  }),\n  charLocation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"char_location\"),\n    cited_text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    document_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    document_title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n    start_char_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    end_char_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n  })\n};\nvar citationSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n  citationSchemas.webSearchResult,\n  citationSchemas.pageLocation,\n  citationSchemas.charLocation\n]);\nvar documentCitationSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n  citationSchemas.pageLocation,\n  citationSchemas.charLocation\n]);\nfunction processCitation(citation, citationDocuments, generateId3, onSource) {\n  if (citation.type === \"page_location\" || citation.type === \"char_location\") {\n    const source = createCitationSource(\n      citation,\n      citationDocuments,\n      generateId3\n    );\n    if (source) {\n      onSource(source);\n    }\n  }\n}\nfunction createCitationSource(citation, citationDocuments, generateId3) {\n  var _a;\n  const documentInfo = citationDocuments[citation.document_index];\n  if (!documentInfo) {\n    return null;\n  }\n  const providerMetadata = citation.type === \"page_location\" ? {\n    citedText: citation.cited_text,\n    startPageNumber: citation.start_page_number,\n    endPageNumber: citation.end_page_number\n  } : {\n    citedText: citation.cited_text,\n    startCharIndex: citation.start_char_index,\n    endCharIndex: citation.end_char_index\n  };\n  return {\n    type: \"source\",\n    sourceType: \"document\",\n    id: generateId3(),\n    mediaType: documentInfo.mediaType,\n    title: (_a = citation.document_title) != null ? _a : documentInfo.title,\n    filename: documentInfo.filename,\n    providerMetadata: {\n      anthropic: providerMetadata\n    }\n  };\n}\nvar AnthropicMessagesLanguageModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v2\";\n    var _a;\n    this.modelId = modelId;\n    this.config = config;\n    this.generateId = (_a = config.generateId) != null ? _a : _ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId;\n  }\n  supportsUrl(url) {\n    return url.protocol === \"https:\";\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  get supportedUrls() {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = this.config).supportedUrls) == null ? void 0 : _b.call(_a)) != null ? _c : {};\n  }\n  async getArgs({\n    prompt,\n    maxOutputTokens = 4096,\n    // 4096: max model output tokens TODO update default in v5\n    temperature,\n    topP,\n    topK,\n    frequencyPenalty,\n    presencePenalty,\n    stopSequences,\n    responseFormat,\n    seed,\n    tools,\n    toolChoice,\n    providerOptions\n  }) {\n    var _a, _b, _c;\n    const warnings = [];\n    if (frequencyPenalty != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"frequencyPenalty\"\n      });\n    }\n    if (presencePenalty != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"presencePenalty\"\n      });\n    }\n    if (seed != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"seed\"\n      });\n    }\n    if ((responseFormat == null ? void 0 : responseFormat.type) === \"json\") {\n      if (responseFormat.schema == null) {\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"responseFormat\",\n          details: \"JSON response format requires a schema. The response format is ignored.\"\n        });\n      } else if (tools != null) {\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"tools\",\n          details: \"JSON response format does not support tools. The provided tools are ignored.\"\n        });\n      }\n    }\n    const jsonResponseTool = (responseFormat == null ? void 0 : responseFormat.type) === \"json\" && responseFormat.schema != null ? {\n      type: \"function\",\n      name: \"json\",\n      description: \"Respond with a JSON object.\",\n      inputSchema: responseFormat.schema\n    } : void 0;\n    const anthropicOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"anthropic\",\n      providerOptions,\n      schema: anthropicProviderOptions\n    });\n    const { prompt: messagesPrompt, betas: messagesBetas } = await convertToAnthropicMessagesPrompt({\n      prompt,\n      sendReasoning: (_a = anthropicOptions == null ? void 0 : anthropicOptions.sendReasoning) != null ? _a : true,\n      warnings\n    });\n    const isThinking = ((_b = anthropicOptions == null ? void 0 : anthropicOptions.thinking) == null ? void 0 : _b.type) === \"enabled\";\n    const thinkingBudget = (_c = anthropicOptions == null ? void 0 : anthropicOptions.thinking) == null ? void 0 : _c.budgetTokens;\n    const baseArgs = {\n      // model id:\n      model: this.modelId,\n      // standardized settings:\n      max_tokens: maxOutputTokens,\n      temperature,\n      top_k: topK,\n      top_p: topP,\n      stop_sequences: stopSequences,\n      // provider specific settings:\n      ...isThinking && {\n        thinking: { type: \"enabled\", budget_tokens: thinkingBudget }\n      },\n      // prompt:\n      system: messagesPrompt.system,\n      messages: messagesPrompt.messages\n    };\n    if (isThinking) {\n      if (thinkingBudget == null) {\n        throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n          functionality: \"thinking requires a budget\"\n        });\n      }\n      if (baseArgs.temperature != null) {\n        baseArgs.temperature = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"temperature\",\n          details: \"temperature is not supported when thinking is enabled\"\n        });\n      }\n      if (topK != null) {\n        baseArgs.top_k = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"topK\",\n          details: \"topK is not supported when thinking is enabled\"\n        });\n      }\n      if (topP != null) {\n        baseArgs.top_p = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"topP\",\n          details: \"topP is not supported when thinking is enabled\"\n        });\n      }\n      baseArgs.max_tokens = maxOutputTokens + thinkingBudget;\n    }\n    const {\n      tools: anthropicTools2,\n      toolChoice: anthropicToolChoice,\n      toolWarnings,\n      betas: toolsBetas\n    } = prepareTools(\n      jsonResponseTool != null ? {\n        tools: [jsonResponseTool],\n        toolChoice: { type: \"tool\", toolName: jsonResponseTool.name },\n        disableParallelToolUse: true\n      } : {\n        tools: tools != null ? tools : [],\n        toolChoice,\n        disableParallelToolUse: anthropicOptions == null ? void 0 : anthropicOptions.disableParallelToolUse\n      }\n    );\n    return {\n      args: {\n        ...baseArgs,\n        tools: anthropicTools2,\n        tool_choice: anthropicToolChoice\n      },\n      warnings: [...warnings, ...toolWarnings],\n      betas: /* @__PURE__ */ new Set([...messagesBetas, ...toolsBetas]),\n      usesJsonResponseTool: jsonResponseTool != null\n    };\n  }\n  async getHeaders({\n    betas,\n    headers\n  }) {\n    return (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(\n      await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.resolve)(this.config.headers),\n      betas.size > 0 ? { \"anthropic-beta\": Array.from(betas).join(\",\") } : {},\n      headers\n    );\n  }\n  buildRequestUrl(isStreaming) {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = this.config).buildRequestUrl) == null ? void 0 : _b.call(_a, this.config.baseURL, isStreaming)) != null ? _c : `${this.config.baseURL}/messages`;\n  }\n  transformRequestBody(args) {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = this.config).transformRequestBody) == null ? void 0 : _b.call(_a, args)) != null ? _c : args;\n  }\n  extractCitationDocuments(prompt) {\n    const isCitationPart = (part) => {\n      var _a, _b;\n      if (part.type !== \"file\") {\n        return false;\n      }\n      if (part.mediaType !== \"application/pdf\" && part.mediaType !== \"text/plain\") {\n        return false;\n      }\n      const anthropic2 = (_a = part.providerOptions) == null ? void 0 : _a.anthropic;\n      const citationsConfig = anthropic2 == null ? void 0 : anthropic2.citations;\n      return (_b = citationsConfig == null ? void 0 : citationsConfig.enabled) != null ? _b : false;\n    };\n    return prompt.filter((message) => message.role === \"user\").flatMap((message) => message.content).filter(isCitationPart).map((part) => {\n      var _a;\n      const filePart = part;\n      return {\n        title: (_a = filePart.filename) != null ? _a : \"Untitled Document\",\n        filename: filePart.filename,\n        mediaType: filePart.mediaType\n      };\n    });\n  }\n  async doGenerate(options) {\n    var _a, _b, _c, _d, _e;\n    const { args, warnings, betas, usesJsonResponseTool } = await this.getArgs(options);\n    const citationDocuments = this.extractCitationDocuments(options.prompt);\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.buildRequestUrl(false),\n      headers: await this.getHeaders({ betas, headers: options.headers }),\n      body: this.transformRequestBody(args),\n      failedResponseHandler: anthropicFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        anthropicMessagesResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const content = [];\n    for (const part of response.content) {\n      switch (part.type) {\n        case \"text\": {\n          if (!usesJsonResponseTool) {\n            content.push({ type: \"text\", text: part.text });\n            if (part.citations) {\n              for (const citation of part.citations) {\n                processCitation(\n                  citation,\n                  citationDocuments,\n                  this.generateId,\n                  (source) => content.push(source)\n                );\n              }\n            }\n          }\n          break;\n        }\n        case \"thinking\": {\n          content.push({\n            type: \"reasoning\",\n            text: part.thinking,\n            providerMetadata: {\n              anthropic: {\n                signature: part.signature\n              }\n            }\n          });\n          break;\n        }\n        case \"redacted_thinking\": {\n          content.push({\n            type: \"reasoning\",\n            text: \"\",\n            providerMetadata: {\n              anthropic: {\n                redactedData: part.data\n              }\n            }\n          });\n          break;\n        }\n        case \"tool_use\": {\n          content.push(\n            // when a json response tool is used, the tool call becomes the text:\n            usesJsonResponseTool ? {\n              type: \"text\",\n              text: JSON.stringify(part.input)\n            } : {\n              type: \"tool-call\",\n              toolCallId: part.id,\n              toolName: part.name,\n              input: JSON.stringify(part.input)\n            }\n          );\n          break;\n        }\n        case \"server_tool_use\": {\n          if (part.name === \"web_search\" || part.name === \"code_execution\") {\n            content.push({\n              type: \"tool-call\",\n              toolCallId: part.id,\n              toolName: part.name,\n              input: JSON.stringify(part.input),\n              providerExecuted: true\n            });\n          }\n          break;\n        }\n        case \"web_search_tool_result\": {\n          if (Array.isArray(part.content)) {\n            content.push({\n              type: \"tool-result\",\n              toolCallId: part.tool_use_id,\n              toolName: \"web_search\",\n              result: part.content.map((result) => {\n                var _a2;\n                return {\n                  url: result.url,\n                  title: result.title,\n                  pageAge: (_a2 = result.page_age) != null ? _a2 : null,\n                  encryptedContent: result.encrypted_content,\n                  type: result.type\n                };\n              }),\n              providerExecuted: true\n            });\n            for (const result of part.content) {\n              content.push({\n                type: \"source\",\n                sourceType: \"url\",\n                id: this.generateId(),\n                url: result.url,\n                title: result.title,\n                providerMetadata: {\n                  anthropic: {\n                    pageAge: (_a = result.page_age) != null ? _a : null\n                  }\n                }\n              });\n            }\n          } else {\n            content.push({\n              type: \"tool-result\",\n              toolCallId: part.tool_use_id,\n              toolName: \"web_search\",\n              isError: true,\n              result: {\n                type: \"web_search_tool_result_error\",\n                errorCode: part.content.error_code\n              },\n              providerExecuted: true\n            });\n          }\n          break;\n        }\n        case \"code_execution_tool_result\": {\n          if (part.content.type === \"code_execution_result\") {\n            content.push({\n              type: \"tool-result\",\n              toolCallId: part.tool_use_id,\n              toolName: \"code_execution\",\n              result: {\n                type: part.content.type,\n                stdout: part.content.stdout,\n                stderr: part.content.stderr,\n                return_code: part.content.return_code\n              },\n              providerExecuted: true\n            });\n          } else if (part.content.type === \"code_execution_tool_result_error\") {\n            content.push({\n              type: \"tool-result\",\n              toolCallId: part.tool_use_id,\n              toolName: \"code_execution\",\n              isError: true,\n              result: {\n                type: \"code_execution_tool_result_error\",\n                errorCode: part.content.error_code\n              },\n              providerExecuted: true\n            });\n          }\n          break;\n        }\n      }\n    }\n    return {\n      content,\n      finishReason: mapAnthropicStopReason({\n        finishReason: response.stop_reason,\n        isJsonResponseFromTool: usesJsonResponseTool\n      }),\n      usage: {\n        inputTokens: response.usage.input_tokens,\n        outputTokens: response.usage.output_tokens,\n        totalTokens: response.usage.input_tokens + response.usage.output_tokens,\n        cachedInputTokens: (_b = response.usage.cache_read_input_tokens) != null ? _b : void 0\n      },\n      request: { body: args },\n      response: {\n        id: (_c = response.id) != null ? _c : void 0,\n        modelId: (_d = response.model) != null ? _d : void 0,\n        headers: responseHeaders,\n        body: rawResponse\n      },\n      warnings,\n      providerMetadata: {\n        anthropic: {\n          usage: response.usage,\n          cacheCreationInputTokens: (_e = response.usage.cache_creation_input_tokens) != null ? _e : null\n        }\n      }\n    };\n  }\n  async doStream(options) {\n    const { args, warnings, betas, usesJsonResponseTool } = await this.getArgs(options);\n    const citationDocuments = this.extractCitationDocuments(options.prompt);\n    const body = { ...args, stream: true };\n    const { responseHeaders, value: response } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.buildRequestUrl(true),\n      headers: await this.getHeaders({ betas, headers: options.headers }),\n      body: this.transformRequestBody(body),\n      failedResponseHandler: anthropicFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(\n        anthropicMessagesChunkSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    let finishReason = \"unknown\";\n    const usage = {\n      inputTokens: void 0,\n      outputTokens: void 0,\n      totalTokens: void 0\n    };\n    const contentBlocks = {};\n    let providerMetadata = void 0;\n    let blockType = void 0;\n    const generateId3 = this.generateId;\n    return {\n      stream: response.pipeThrough(\n        new TransformStream({\n          start(controller) {\n            controller.enqueue({ type: \"stream-start\", warnings });\n          },\n          transform(chunk, controller) {\n            var _a, _b, _c, _d, _e, _f, _g;\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: \"raw\", rawValue: chunk.rawValue });\n            }\n            if (!chunk.success) {\n              controller.enqueue({ type: \"error\", error: chunk.error });\n              return;\n            }\n            const value = chunk.value;\n            switch (value.type) {\n              case \"ping\": {\n                return;\n              }\n              case \"content_block_start\": {\n                const contentBlockType = value.content_block.type;\n                blockType = contentBlockType;\n                switch (contentBlockType) {\n                  case \"text\": {\n                    contentBlocks[value.index] = { type: \"text\" };\n                    controller.enqueue({\n                      type: \"text-start\",\n                      id: String(value.index)\n                    });\n                    return;\n                  }\n                  case \"thinking\": {\n                    contentBlocks[value.index] = { type: \"reasoning\" };\n                    controller.enqueue({\n                      type: \"reasoning-start\",\n                      id: String(value.index)\n                    });\n                    return;\n                  }\n                  case \"redacted_thinking\": {\n                    contentBlocks[value.index] = { type: \"reasoning\" };\n                    controller.enqueue({\n                      type: \"reasoning-start\",\n                      id: String(value.index),\n                      providerMetadata: {\n                        anthropic: {\n                          redactedData: value.content_block.data\n                        }\n                      }\n                    });\n                    return;\n                  }\n                  case \"tool_use\": {\n                    contentBlocks[value.index] = usesJsonResponseTool ? { type: \"text\" } : {\n                      type: \"tool-call\",\n                      toolCallId: value.content_block.id,\n                      toolName: value.content_block.name,\n                      input: \"\"\n                    };\n                    controller.enqueue(\n                      usesJsonResponseTool ? { type: \"text-start\", id: String(value.index) } : {\n                        type: \"tool-input-start\",\n                        id: value.content_block.id,\n                        toolName: value.content_block.name\n                      }\n                    );\n                    return;\n                  }\n                  case \"server_tool_use\": {\n                    if (value.content_block.name === \"web_search\" || value.content_block.name === \"code_execution\") {\n                      contentBlocks[value.index] = {\n                        type: \"tool-call\",\n                        toolCallId: value.content_block.id,\n                        toolName: value.content_block.name,\n                        input: \"\",\n                        providerExecuted: true\n                      };\n                      controller.enqueue({\n                        type: \"tool-input-start\",\n                        id: value.content_block.id,\n                        toolName: value.content_block.name,\n                        providerExecuted: true\n                      });\n                    }\n                    return;\n                  }\n                  case \"web_search_tool_result\": {\n                    const part = value.content_block;\n                    if (Array.isArray(part.content)) {\n                      controller.enqueue({\n                        type: \"tool-result\",\n                        toolCallId: part.tool_use_id,\n                        toolName: \"web_search\",\n                        result: part.content.map((result) => {\n                          var _a2;\n                          return {\n                            url: result.url,\n                            title: result.title,\n                            pageAge: (_a2 = result.page_age) != null ? _a2 : null,\n                            encryptedContent: result.encrypted_content,\n                            type: result.type\n                          };\n                        }),\n                        providerExecuted: true\n                      });\n                      for (const result of part.content) {\n                        controller.enqueue({\n                          type: \"source\",\n                          sourceType: \"url\",\n                          id: generateId3(),\n                          url: result.url,\n                          title: result.title,\n                          providerMetadata: {\n                            anthropic: {\n                              pageAge: (_a = result.page_age) != null ? _a : null\n                            }\n                          }\n                        });\n                      }\n                    } else {\n                      controller.enqueue({\n                        type: \"tool-result\",\n                        toolCallId: part.tool_use_id,\n                        toolName: \"web_search\",\n                        isError: true,\n                        result: {\n                          type: \"web_search_tool_result_error\",\n                          errorCode: part.content.error_code\n                        },\n                        providerExecuted: true\n                      });\n                    }\n                    return;\n                  }\n                  case \"code_execution_tool_result\": {\n                    const part = value.content_block;\n                    if (part.content.type === \"code_execution_result\") {\n                      controller.enqueue({\n                        type: \"tool-result\",\n                        toolCallId: part.tool_use_id,\n                        toolName: \"code_execution\",\n                        result: {\n                          type: part.content.type,\n                          stdout: part.content.stdout,\n                          stderr: part.content.stderr,\n                          return_code: part.content.return_code\n                        },\n                        providerExecuted: true\n                      });\n                    } else if (part.content.type === \"code_execution_tool_result_error\") {\n                      controller.enqueue({\n                        type: \"tool-result\",\n                        toolCallId: part.tool_use_id,\n                        toolName: \"code_execution\",\n                        isError: true,\n                        result: {\n                          type: \"code_execution_tool_result_error\",\n                          errorCode: part.content.error_code\n                        },\n                        providerExecuted: true\n                      });\n                    }\n                    return;\n                  }\n                  default: {\n                    const _exhaustiveCheck = contentBlockType;\n                    throw new Error(\n                      `Unsupported content block type: ${_exhaustiveCheck}`\n                    );\n                  }\n                }\n              }\n              case \"content_block_stop\": {\n                if (contentBlocks[value.index] != null) {\n                  const contentBlock = contentBlocks[value.index];\n                  switch (contentBlock.type) {\n                    case \"text\": {\n                      controller.enqueue({\n                        type: \"text-end\",\n                        id: String(value.index)\n                      });\n                      break;\n                    }\n                    case \"reasoning\": {\n                      controller.enqueue({\n                        type: \"reasoning-end\",\n                        id: String(value.index)\n                      });\n                      break;\n                    }\n                    case \"tool-call\":\n                      if (!usesJsonResponseTool) {\n                        controller.enqueue({\n                          type: \"tool-input-end\",\n                          id: contentBlock.toolCallId\n                        });\n                        controller.enqueue(contentBlock);\n                      }\n                      break;\n                  }\n                  delete contentBlocks[value.index];\n                }\n                blockType = void 0;\n                return;\n              }\n              case \"content_block_delta\": {\n                const deltaType = value.delta.type;\n                switch (deltaType) {\n                  case \"text_delta\": {\n                    if (usesJsonResponseTool) {\n                      return;\n                    }\n                    controller.enqueue({\n                      type: \"text-delta\",\n                      id: String(value.index),\n                      delta: value.delta.text\n                    });\n                    return;\n                  }\n                  case \"thinking_delta\": {\n                    controller.enqueue({\n                      type: \"reasoning-delta\",\n                      id: String(value.index),\n                      delta: value.delta.thinking\n                    });\n                    return;\n                  }\n                  case \"signature_delta\": {\n                    if (blockType === \"thinking\") {\n                      controller.enqueue({\n                        type: \"reasoning-delta\",\n                        id: String(value.index),\n                        delta: \"\",\n                        providerMetadata: {\n                          anthropic: {\n                            signature: value.delta.signature\n                          }\n                        }\n                      });\n                    }\n                    return;\n                  }\n                  case \"input_json_delta\": {\n                    const contentBlock = contentBlocks[value.index];\n                    const delta = value.delta.partial_json;\n                    if (usesJsonResponseTool) {\n                      if ((contentBlock == null ? void 0 : contentBlock.type) !== \"text\") {\n                        return;\n                      }\n                      controller.enqueue({\n                        type: \"text-delta\",\n                        id: String(value.index),\n                        delta\n                      });\n                    } else {\n                      if ((contentBlock == null ? void 0 : contentBlock.type) !== \"tool-call\") {\n                        return;\n                      }\n                      controller.enqueue({\n                        type: \"tool-input-delta\",\n                        id: contentBlock.toolCallId,\n                        delta\n                      });\n                      contentBlock.input += delta;\n                    }\n                    return;\n                  }\n                  case \"citations_delta\": {\n                    const citation = value.delta.citation;\n                    processCitation(\n                      citation,\n                      citationDocuments,\n                      generateId3,\n                      (source) => controller.enqueue(source)\n                    );\n                    return;\n                  }\n                  default: {\n                    const _exhaustiveCheck = deltaType;\n                    throw new Error(\n                      `Unsupported delta type: ${_exhaustiveCheck}`\n                    );\n                  }\n                }\n              }\n              case \"message_start\": {\n                usage.inputTokens = value.message.usage.input_tokens;\n                usage.cachedInputTokens = (_b = value.message.usage.cache_read_input_tokens) != null ? _b : void 0;\n                providerMetadata = {\n                  anthropic: {\n                    usage: value.message.usage,\n                    cacheCreationInputTokens: (_c = value.message.usage.cache_creation_input_tokens) != null ? _c : null\n                  }\n                };\n                controller.enqueue({\n                  type: \"response-metadata\",\n                  id: (_d = value.message.id) != null ? _d : void 0,\n                  modelId: (_e = value.message.model) != null ? _e : void 0\n                });\n                return;\n              }\n              case \"message_delta\": {\n                usage.outputTokens = value.usage.output_tokens;\n                usage.totalTokens = ((_f = usage.inputTokens) != null ? _f : 0) + ((_g = value.usage.output_tokens) != null ? _g : 0);\n                finishReason = mapAnthropicStopReason({\n                  finishReason: value.delta.stop_reason,\n                  isJsonResponseFromTool: usesJsonResponseTool\n                });\n                return;\n              }\n              case \"message_stop\": {\n                controller.enqueue({\n                  type: \"finish\",\n                  finishReason,\n                  usage,\n                  providerMetadata\n                });\n                return;\n              }\n              case \"error\": {\n                controller.enqueue({ type: \"error\", error: value.error });\n                return;\n              }\n              default: {\n                const _exhaustiveCheck = value;\n                throw new Error(`Unsupported chunk type: ${_exhaustiveCheck}`);\n              }\n            }\n          }\n        })\n      ),\n      request: { body },\n      response: { headers: responseHeaders }\n    };\n  }\n};\nvar anthropicMessagesResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message\"),\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"text\"),\n        text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        citations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(citationSchema).optional()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"thinking\"),\n        thinking: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        signature: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"redacted_thinking\"),\n        data: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"tool_use\"),\n        id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        input: zod_v4__WEBPACK_IMPORTED_MODULE_0__.unknown()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"server_tool_use\"),\n        id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        input: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.unknown()).nullish()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_tool_result\"),\n        tool_use_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_result\"),\n              url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              page_age: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n            })\n          ),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_tool_result_error\"),\n            error_code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          })\n        ])\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_execution_tool_result\"),\n        tool_use_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_execution_result\"),\n            stdout: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            stderr: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            return_code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_execution_tool_result_error\"),\n            error_code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          })\n        ])\n      })\n    ])\n  ),\n  stop_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.looseObject({\n    input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    output_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    cache_creation_input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n    cache_read_input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish()\n  })\n});\nvar anthropicMessagesChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message_start\"),\n    message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n      model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n      usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.looseObject({\n        input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n        output_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n        cache_creation_input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n        cache_read_input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish()\n      })\n    })\n  }),\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"content_block_start\"),\n    index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    content_block: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"text\"),\n        text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"thinking\"),\n        thinking: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"tool_use\"),\n        id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"redacted_thinking\"),\n        data: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"server_tool_use\"),\n        id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        input: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.unknown()).nullish()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_tool_result\"),\n        tool_use_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_result\"),\n              url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              page_age: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n            })\n          ),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_tool_result_error\"),\n            error_code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          })\n        ])\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_execution_tool_result\"),\n        tool_use_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_execution_result\"),\n            stdout: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            stderr: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            return_code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_execution_tool_result_error\"),\n            error_code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          })\n        ])\n      })\n    ])\n  }),\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"content_block_delta\"),\n    index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"input_json_delta\"),\n        partial_json: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"text_delta\"),\n        text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"thinking_delta\"),\n        thinking: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"signature_delta\"),\n        signature: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"citations_delta\"),\n        citation: citationSchema\n      })\n    ])\n  }),\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"content_block_stop\"),\n    index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n  }),\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"error\"),\n    error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    })\n  }),\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message_delta\"),\n    delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ stop_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish() }),\n    usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ output_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number() })\n  }),\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message_stop\")\n  }),\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"ping\")\n  })\n]);\nvar anthropicReasoningMetadataSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  signature: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  redactedData: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\n\n// src/tool/bash_20241022.ts\n\n\nvar bash_20241022 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"anthropic.bash_20241022\",\n  name: \"bash\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_3__[\"default\"].object({\n    command: zod_v4__WEBPACK_IMPORTED_MODULE_3__[\"default\"].string(),\n    restart: zod_v4__WEBPACK_IMPORTED_MODULE_3__[\"default\"].boolean().optional()\n  })\n});\n\n// src/tool/bash_20250124.ts\n\n\nvar bash_20250124 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"anthropic.bash_20250124\",\n  name: \"bash\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_3__[\"default\"].object({\n    command: zod_v4__WEBPACK_IMPORTED_MODULE_3__[\"default\"].string(),\n    restart: zod_v4__WEBPACK_IMPORTED_MODULE_3__[\"default\"].boolean().optional()\n  })\n});\n\n// src/tool/computer_20241022.ts\n\n\nvar computer_20241022 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"anthropic.computer_20241022\",\n  name: \"computer\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    action: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n      \"key\",\n      \"type\",\n      \"mouse_move\",\n      \"left_click\",\n      \"left_click_drag\",\n      \"right_click\",\n      \"middle_click\",\n      \"double_click\",\n      \"screenshot\",\n      \"cursor_position\"\n    ]),\n    coordinate: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int()).optional(),\n    text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n  })\n});\n\n// src/tool/computer_20250124.ts\n\n\nvar computer_20250124 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"anthropic.computer_20250124\",\n  name: \"computer\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    action: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n      \"key\",\n      \"hold_key\",\n      \"type\",\n      \"cursor_position\",\n      \"mouse_move\",\n      \"left_mouse_down\",\n      \"left_mouse_up\",\n      \"left_click\",\n      \"left_click_drag\",\n      \"right_click\",\n      \"middle_click\",\n      \"double_click\",\n      \"triple_click\",\n      \"scroll\",\n      \"wait\",\n      \"screenshot\"\n    ]),\n    coordinate: zod_v4__WEBPACK_IMPORTED_MODULE_0__.tuple([zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int()]).optional(),\n    duration: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    scroll_amount: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    scroll_direction: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"up\", \"down\", \"left\", \"right\"]).optional(),\n    start_coordinate: zod_v4__WEBPACK_IMPORTED_MODULE_0__.tuple([zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int()]).optional(),\n    text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n  })\n});\n\n// src/tool/text-editor_20241022.ts\n\n\nvar textEditor_20241022 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"anthropic.text_editor_20241022\",\n  name: \"str_replace_editor\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    command: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"view\", \"create\", \"str_replace\", \"insert\", \"undo_edit\"]),\n    path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    file_text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    insert_line: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int().optional(),\n    new_str: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    old_str: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    view_range: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int()).optional()\n  })\n});\n\n// src/tool/text-editor_20250124.ts\n\n\nvar textEditor_20250124 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"anthropic.text_editor_20250124\",\n  name: \"str_replace_editor\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    command: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"view\", \"create\", \"str_replace\", \"insert\", \"undo_edit\"]),\n    path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    file_text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    insert_line: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int().optional(),\n    new_str: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    old_str: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    view_range: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int()).optional()\n  })\n});\n\n// src/tool/text-editor_20250429.ts\n\n\nvar textEditor_20250429 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"anthropic.text_editor_20250429\",\n  name: \"str_replace_based_edit_tool\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    command: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"view\", \"create\", \"str_replace\", \"insert\"]),\n    path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    file_text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    insert_line: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int().optional(),\n    new_str: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    old_str: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    view_range: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int()).optional()\n  })\n});\n\n// src/anthropic-tools.ts\nvar anthropicTools = {\n  /**\n   * The bash tool enables Claude to execute shell commands in a persistent bash session,\n   * allowing system operations, script execution, and command-line automation.\n   *\n   * Image results are supported.\n   *\n   * Tool name must be `bash`.\n   */\n  bash_20241022,\n  /**\n   * The bash tool enables Claude to execute shell commands in a persistent bash session,\n   * allowing system operations, script execution, and command-line automation.\n   *\n   * Image results are supported.\n   *\n   * Tool name must be `bash`.\n   */\n  bash_20250124,\n  /**\n   * Claude can analyze data, create visualizations, perform complex calculations,\n   * run system commands, create and edit files, and process uploaded files directly within\n   * the API conversation.\n   *\n   * The code execution tool allows Claude to run Bash commands and manipulate files,\n   * including writing code, in a secure, sandboxed environment.\n   *\n   * Tool name must be `code_execution`.\n   */\n  codeExecution_20250522,\n  /**\n   * Claude can interact with computer environments through the computer use tool, which\n   * provides screenshot capabilities and mouse/keyboard control for autonomous desktop interaction.\n   *\n   * Image results are supported.\n   *\n   * Tool name must be `computer`.\n   *\n   * @param displayWidthPx - The width of the display being controlled by the model in pixels.\n   * @param displayHeightPx - The height of the display being controlled by the model in pixels.\n   * @param displayNumber - The display number to control (only relevant for X11 environments). If specified, the tool will be provided a display number in the tool definition.\n   */\n  computer_20241022,\n  /**\n   * Claude can interact with computer environments through the computer use tool, which\n   * provides screenshot capabilities and mouse/keyboard control for autonomous desktop interaction.\n   *\n   * Image results are supported.\n   *\n   * Tool name must be `computer`.\n   *\n   * @param displayWidthPx - The width of the display being controlled by the model in pixels.\n   * @param displayHeightPx - The height of the display being controlled by the model in pixels.\n   * @param displayNumber - The display number to control (only relevant for X11 environments). If specified, the tool will be provided a display number in the tool definition.\n   */\n  computer_20250124,\n  /**\n   * Claude can use an Anthropic-defined text editor tool to view and modify text files,\n   * helping you debug, fix, and improve your code or other text documents. This allows Claude\n   * to directly interact with your files, providing hands-on assistance rather than just suggesting changes.\n   *\n   * Tool name must be `str_replace_editor`.\n   */\n  textEditor_20241022,\n  /**\n   * Claude can use an Anthropic-defined text editor tool to view and modify text files,\n   * helping you debug, fix, and improve your code or other text documents. This allows Claude\n   * to directly interact with your files, providing hands-on assistance rather than just suggesting changes.\n   *\n   * Tool name must be `str_replace_editor`.\n   */\n  textEditor_20250124,\n  /**\n   * Claude can use an Anthropic-defined text editor tool to view and modify text files,\n   * helping you debug, fix, and improve your code or other text documents. This allows Claude\n   * to directly interact with your files, providing hands-on assistance rather than just suggesting changes.\n   *\n   * Note: This version does not support the \"undo_edit\" command.\n   *\n   * Tool name must be `str_replace_based_edit_tool`.\n   */\n  textEditor_20250429,\n  /**\n   * Creates a web search tool that gives Claude direct access to real-time web content.\n   *\n   * Tool name must be `web_search`.\n   *\n   * @param maxUses - Maximum number of web searches Claude can perform during the conversation.\n   * @param allowedDomains - Optional list of domains that Claude is allowed to search.\n   * @param blockedDomains - Optional list of domains that Claude should avoid when searching.\n   * @param userLocation - Optional user location information to provide geographically relevant search results.\n   */\n  webSearch_20250305\n};\n\n// src/anthropic-provider.ts\nfunction createAnthropic(options = {}) {\n  var _a;\n  const baseURL = (_a = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.withoutTrailingSlash)(options.baseURL)) != null ? _a : \"https://api.anthropic.com/v1\";\n  const getHeaders = () => ({\n    \"anthropic-version\": \"2023-06-01\",\n    \"x-api-key\": (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.loadApiKey)({\n      apiKey: options.apiKey,\n      environmentVariableName: \"ANTHROPIC_API_KEY\",\n      description: \"Anthropic\"\n    }),\n    ...options.headers\n  });\n  const createChatModel = (modelId) => {\n    var _a2;\n    return new AnthropicMessagesLanguageModel(modelId, {\n      provider: \"anthropic.messages\",\n      baseURL,\n      headers: getHeaders,\n      fetch: options.fetch,\n      generateId: (_a2 = options.generateId) != null ? _a2 : _ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId,\n      supportedUrls: () => ({\n        \"image/*\": [/^https?:\\/\\/.*$/]\n      })\n    });\n  };\n  const provider = function(modelId) {\n    if (new.target) {\n      throw new Error(\n        \"The Anthropic model function cannot be called with the new keyword.\"\n      );\n    }\n    return createChatModel(modelId);\n  };\n  provider.languageModel = createChatModel;\n  provider.chat = createChatModel;\n  provider.messages = createChatModel;\n  provider.textEmbeddingModel = (modelId) => {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.NoSuchModelError({ modelId, modelType: \"textEmbeddingModel\" });\n  };\n  provider.imageModel = (modelId) => {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.NoSuchModelError({ modelId, modelType: \"imageModel\" });\n  };\n  provider.tools = anthropicTools;\n  return provider;\n}\nvar anthropic = createAnthropic();\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGFpLXNkaythbnRocm9waWNAMi4wLjE3X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9AYWktc2RrL2FudGhyb3BpYy9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUcwQjtBQUtNOztBQUVoQztBQUcwQjtBQVNNO0FBQ0M7O0FBRWpDO0FBQ3dFO0FBQzdDO0FBQzNCLCtCQUErQiwwQ0FBUTtBQUN2QyxRQUFRLDJDQUFTO0FBQ2pCLFNBQVMsMENBQVE7QUFDakIsVUFBVSwwQ0FBUTtBQUNsQixhQUFhLDBDQUFRO0FBQ3JCLEdBQUc7QUFDSCxDQUFDO0FBQ0QscUNBQXFDLHNGQUE4QjtBQUNuRTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNpQztBQUNqQyx1Q0FBdUMsMENBQVM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDBDQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLGFBQWEsMkNBQVU7QUFDdkIsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywwQ0FBUztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywwQ0FBUztBQUNwQixDQUFDO0FBQ0QsK0JBQStCLDBDQUFTO0FBQ3hDLGlCQUFpQiwyQ0FBVTtBQUMzQixZQUFZLDBDQUFTO0FBQ3JCLFVBQVUseUNBQVEsRUFBRSwyQ0FBVSxhQUFhLDJDQUFVO0FBQ3JELGtCQUFrQiwwQ0FBUztBQUMzQixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMkNBQVU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQVM7QUFDekIsVUFBVSwyQ0FBVTtBQUNwQixTQUFTLHlDQUFRLEVBQUUsMkNBQVUsUUFBUSwyQ0FBVTtBQUMvQyxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUcwQjs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMEY7QUFD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QkFBeUI7QUFDekI7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsdUJBQXVCO0FBQ3ZCLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxpQkFBaUI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBLHdCQUF3Qiw0RUFBb0I7QUFDNUM7QUFDQTtBQUNBLGlCQUFpQixrRUFBVTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsOERBQVc7QUFDeEU7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDhEQUFnQixHQUFHLDBDQUEwQztBQUMzRTtBQUNBO0FBQ0EsY0FBYyw4REFBZ0IsR0FBRyxrQ0FBa0M7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy91dHNhdnNoYXJtYS9Eb2N1bWVudHMvR2l0SHViL0RpdkhhY2tzMjAyNS9ub2RlX21vZHVsZXMvLnBucG0vQGFpLXNkaythbnRocm9waWNAMi4wLjE3X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9AYWktc2RrL2FudGhyb3BpYy9kaXN0L2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYW50aHJvcGljLXByb3ZpZGVyLnRzXG5pbXBvcnQge1xuICBOb1N1Y2hNb2RlbEVycm9yXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5pbXBvcnQge1xuICBnZW5lcmF0ZUlkIGFzIGdlbmVyYXRlSWQyLFxuICBsb2FkQXBpS2V5LFxuICB3aXRob3V0VHJhaWxpbmdTbGFzaFxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuXG4vLyBzcmMvYW50aHJvcGljLW1lc3NhZ2VzLWxhbmd1YWdlLW1vZGVsLnRzXG5pbXBvcnQge1xuICBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvciBhcyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjNcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXJcIjtcbmltcG9ydCB7XG4gIGNvbWJpbmVIZWFkZXJzLFxuICBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlcixcbiAgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcixcbiAgZ2VuZXJhdGVJZCxcbiAgcGFyc2VQcm92aWRlck9wdGlvbnMgYXMgcGFyc2VQcm92aWRlck9wdGlvbnMyLFxuICBwb3N0SnNvblRvQXBpLFxuICByZXNvbHZlXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHo1IH0gZnJvbSBcInpvZC92NFwiO1xuXG4vLyBzcmMvYW50aHJvcGljLWVycm9yLnRzXG5pbXBvcnQgeyBjcmVhdGVKc29uRXJyb3JSZXNwb25zZUhhbmRsZXIgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBhbnRocm9waWNFcnJvckRhdGFTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHR5cGU6IHoubGl0ZXJhbChcImVycm9yXCIpLFxuICBlcnJvcjogei5vYmplY3Qoe1xuICAgIHR5cGU6IHouc3RyaW5nKCksXG4gICAgbWVzc2FnZTogei5zdHJpbmcoKVxuICB9KVxufSk7XG52YXIgYW50aHJvcGljRmFpbGVkUmVzcG9uc2VIYW5kbGVyID0gY3JlYXRlSnNvbkVycm9yUmVzcG9uc2VIYW5kbGVyKHtcbiAgZXJyb3JTY2hlbWE6IGFudGhyb3BpY0Vycm9yRGF0YVNjaGVtYSxcbiAgZXJyb3JUb01lc3NhZ2U6IChkYXRhKSA9PiBkYXRhLmVycm9yLm1lc3NhZ2Vcbn0pO1xuXG4vLyBzcmMvYW50aHJvcGljLW1lc3NhZ2VzLW9wdGlvbnMudHNcbmltcG9ydCB7IHogYXMgejIgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgYW50aHJvcGljRmlsZVBhcnRQcm92aWRlck9wdGlvbnMgPSB6Mi5vYmplY3Qoe1xuICAvKipcbiAgICogQ2l0YXRpb24gY29uZmlndXJhdGlvbiBmb3IgdGhpcyBkb2N1bWVudC5cbiAgICogV2hlbiBlbmFibGVkLCB0aGlzIGRvY3VtZW50IHdpbGwgZ2VuZXJhdGUgY2l0YXRpb25zIGluIHRoZSByZXNwb25zZS5cbiAgICovXG4gIGNpdGF0aW9uczogejIub2JqZWN0KHtcbiAgICAvKipcbiAgICAgKiBFbmFibGUgY2l0YXRpb25zIGZvciB0aGlzIGRvY3VtZW50XG4gICAgICovXG4gICAgZW5hYmxlZDogejIuYm9vbGVhbigpXG4gIH0pLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBDdXN0b20gdGl0bGUgZm9yIHRoZSBkb2N1bWVudC5cbiAgICogSWYgbm90IHByb3ZpZGVkLCB0aGUgZmlsZW5hbWUgd2lsbCBiZSB1c2VkLlxuICAgKi9cbiAgdGl0bGU6IHoyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBDb250ZXh0IGFib3V0IHRoZSBkb2N1bWVudCB0aGF0IHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBtb2RlbFxuICAgKiBidXQgbm90IHVzZWQgdG93YXJkcyBjaXRlZCBjb250ZW50LlxuICAgKiBVc2VmdWwgZm9yIHN0b3JpbmcgZG9jdW1lbnQgbWV0YWRhdGEgYXMgdGV4dCBvciBzdHJpbmdpZmllZCBKU09OLlxuICAgKi9cbiAgY29udGV4dDogejIuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgYW50aHJvcGljUHJvdmlkZXJPcHRpb25zID0gejIub2JqZWN0KHtcbiAgc2VuZFJlYXNvbmluZzogejIuYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gIHRoaW5raW5nOiB6Mi5vYmplY3Qoe1xuICAgIHR5cGU6IHoyLnVuaW9uKFt6Mi5saXRlcmFsKFwiZW5hYmxlZFwiKSwgejIubGl0ZXJhbChcImRpc2FibGVkXCIpXSksXG4gICAgYnVkZ2V0VG9rZW5zOiB6Mi5udW1iZXIoKS5vcHRpb25hbCgpXG4gIH0pLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGRpc2FibGUgcGFyYWxsZWwgZnVuY3Rpb24gY2FsbGluZyBkdXJpbmcgdG9vbCB1c2UuIERlZmF1bHQgaXMgZmFsc2UuXG4gICAqIFdoZW4gc2V0IHRvIHRydWUsIENsYXVkZSB3aWxsIHVzZSBhdCBtb3N0IG9uZSB0b29sIHBlciByZXNwb25zZS5cbiAgICovXG4gIGRpc2FibGVQYXJhbGxlbFRvb2xVc2U6IHoyLmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogQ2FjaGUgY29udHJvbCBzZXR0aW5ncyBmb3IgdGhpcyBtZXNzYWdlLlxuICAgKiBTZWUgaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9idWlsZC13aXRoLWNsYXVkZS9wcm9tcHQtY2FjaGluZ1xuICAgKi9cbiAgY2FjaGVDb250cm9sOiB6Mi5vYmplY3Qoe1xuICAgIHR5cGU6IHoyLmxpdGVyYWwoXCJlcGhlbWVyYWxcIiksXG4gICAgdHRsOiB6Mi51bmlvbihbejIubGl0ZXJhbChcIjVtXCIpLCB6Mi5saXRlcmFsKFwiMWhcIildKS5vcHRpb25hbCgpXG4gIH0pLm9wdGlvbmFsKClcbn0pO1xuXG4vLyBzcmMvYW50aHJvcGljLXByZXBhcmUtdG9vbHMudHNcbmltcG9ydCB7XG4gIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5cbi8vIHNyYy9nZXQtY2FjaGUtY29udHJvbC50c1xuZnVuY3Rpb24gZ2V0Q2FjaGVDb250cm9sKHByb3ZpZGVyTWV0YWRhdGEpIHtcbiAgdmFyIF9hO1xuICBjb25zdCBhbnRocm9waWMyID0gcHJvdmlkZXJNZXRhZGF0YSA9PSBudWxsID8gdm9pZCAwIDogcHJvdmlkZXJNZXRhZGF0YS5hbnRocm9waWM7XG4gIGNvbnN0IGNhY2hlQ29udHJvbFZhbHVlID0gKF9hID0gYW50aHJvcGljMiA9PSBudWxsID8gdm9pZCAwIDogYW50aHJvcGljMi5jYWNoZUNvbnRyb2wpICE9IG51bGwgPyBfYSA6IGFudGhyb3BpYzIgPT0gbnVsbCA/IHZvaWQgMCA6IGFudGhyb3BpYzIuY2FjaGVfY29udHJvbDtcbiAgcmV0dXJuIGNhY2hlQ29udHJvbFZhbHVlO1xufVxuXG4vLyBzcmMvdG9vbC93ZWItc2VhcmNoXzIwMjUwMzA1LnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MyB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciB3ZWJTZWFyY2hfMjAyNTAzMDVBcmdzU2NoZW1hID0gejMub2JqZWN0KHtcbiAgLyoqXG4gICAqIE1heGltdW0gbnVtYmVyIG9mIHdlYiBzZWFyY2hlcyBDbGF1ZGUgY2FuIHBlcmZvcm0gZHVyaW5nIHRoZSBjb252ZXJzYXRpb24uXG4gICAqL1xuICBtYXhVc2VzOiB6My5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogT3B0aW9uYWwgbGlzdCBvZiBkb21haW5zIHRoYXQgQ2xhdWRlIGlzIGFsbG93ZWQgdG8gc2VhcmNoLlxuICAgKi9cbiAgYWxsb3dlZERvbWFpbnM6IHozLmFycmF5KHozLnN0cmluZygpKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogT3B0aW9uYWwgbGlzdCBvZiBkb21haW5zIHRoYXQgQ2xhdWRlIHNob3VsZCBhdm9pZCB3aGVuIHNlYXJjaGluZy5cbiAgICovXG4gIGJsb2NrZWREb21haW5zOiB6My5hcnJheSh6My5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIE9wdGlvbmFsIHVzZXIgbG9jYXRpb24gaW5mb3JtYXRpb24gdG8gcHJvdmlkZSBnZW9ncmFwaGljYWxseSByZWxldmFudCBzZWFyY2ggcmVzdWx0cy5cbiAgICovXG4gIHVzZXJMb2NhdGlvbjogejMub2JqZWN0KHtcbiAgICB0eXBlOiB6My5saXRlcmFsKFwiYXBwcm94aW1hdGVcIiksXG4gICAgY2l0eTogejMuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZWdpb246IHozLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY291bnRyeTogejMuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB0aW1lem9uZTogejMuc3RyaW5nKCkub3B0aW9uYWwoKVxuICB9KS5vcHRpb25hbCgpXG59KTtcbnZhciB3ZWJTZWFyY2hfMjAyNTAzMDVPdXRwdXRTY2hlbWEgPSB6My5hcnJheShcbiAgejMub2JqZWN0KHtcbiAgICB1cmw6IHozLnN0cmluZygpLFxuICAgIHRpdGxlOiB6My5zdHJpbmcoKSxcbiAgICBwYWdlQWdlOiB6My5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIGVuY3J5cHRlZENvbnRlbnQ6IHozLnN0cmluZygpLFxuICAgIHR5cGU6IHozLnN0cmluZygpXG4gIH0pXG4pO1xudmFyIGZhY3RvcnkgPSBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEoe1xuICBpZDogXCJhbnRocm9waWMud2ViX3NlYXJjaF8yMDI1MDMwNVwiLFxuICBuYW1lOiBcIndlYl9zZWFyY2hcIixcbiAgaW5wdXRTY2hlbWE6IHozLm9iamVjdCh7XG4gICAgcXVlcnk6IHozLnN0cmluZygpXG4gIH0pLFxuICBvdXRwdXRTY2hlbWE6IHdlYlNlYXJjaF8yMDI1MDMwNU91dHB1dFNjaGVtYVxufSk7XG52YXIgd2ViU2VhcmNoXzIwMjUwMzA1ID0gKGFyZ3MgPSB7fSkgPT4ge1xuICByZXR1cm4gZmFjdG9yeShhcmdzKTtcbn07XG5cbi8vIHNyYy9hbnRocm9waWMtcHJlcGFyZS10b29scy50c1xuZnVuY3Rpb24gaXNXZWJTZWFyY2hUb29sKHRvb2wpIHtcbiAgcmV0dXJuIHR5cGVvZiB0b29sID09PSBcIm9iamVjdFwiICYmIHRvb2wgIT09IG51bGwgJiYgXCJ0eXBlXCIgaW4gdG9vbCAmJiB0b29sLnR5cGUgPT09IFwid2ViX3NlYXJjaF8yMDI1MDMwNVwiO1xufVxuZnVuY3Rpb24gcHJlcGFyZVRvb2xzKHtcbiAgdG9vbHMsXG4gIHRvb2xDaG9pY2UsXG4gIGRpc2FibGVQYXJhbGxlbFRvb2xVc2Vcbn0pIHtcbiAgdG9vbHMgPSAodG9vbHMgPT0gbnVsbCA/IHZvaWQgMCA6IHRvb2xzLmxlbmd0aCkgPyB0b29scyA6IHZvaWQgMDtcbiAgY29uc3QgdG9vbFdhcm5pbmdzID0gW107XG4gIGNvbnN0IGJldGFzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgaWYgKHRvb2xzID09IG51bGwpIHtcbiAgICByZXR1cm4geyB0b29sczogdm9pZCAwLCB0b29sQ2hvaWNlOiB2b2lkIDAsIHRvb2xXYXJuaW5ncywgYmV0YXMgfTtcbiAgfVxuICBjb25zdCBhbnRocm9waWNUb29sczIgPSBbXTtcbiAgZm9yIChjb25zdCB0b29sIG9mIHRvb2xzKSB7XG4gICAgaWYgKGlzV2ViU2VhcmNoVG9vbCh0b29sKSkge1xuICAgICAgYW50aHJvcGljVG9vbHMyLnB1c2godG9vbCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgc3dpdGNoICh0b29sLnR5cGUpIHtcbiAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICBjb25zdCBjYWNoZUNvbnRyb2wgPSBnZXRDYWNoZUNvbnRyb2wodG9vbC5wcm92aWRlck9wdGlvbnMpO1xuICAgICAgICBhbnRocm9waWNUb29sczIucHVzaCh7XG4gICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIGlucHV0X3NjaGVtYTogdG9vbC5pbnB1dFNjaGVtYSxcbiAgICAgICAgICBjYWNoZV9jb250cm9sOiBjYWNoZUNvbnRyb2xcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInByb3ZpZGVyLWRlZmluZWRcIjpcbiAgICAgICAgc3dpdGNoICh0b29sLmlkKSB7XG4gICAgICAgICAgY2FzZSBcImFudGhyb3BpYy5jb21wdXRlcl8yMDI1MDEyNFwiOlxuICAgICAgICAgICAgYmV0YXMuYWRkKFwiY29tcHV0ZXItdXNlLTIwMjUtMDEtMjRcIik7XG4gICAgICAgICAgICBhbnRocm9waWNUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwiY29tcHV0ZXJcIixcbiAgICAgICAgICAgICAgdHlwZTogXCJjb21wdXRlcl8yMDI1MDEyNFwiLFxuICAgICAgICAgICAgICBkaXNwbGF5X3dpZHRoX3B4OiB0b29sLmFyZ3MuZGlzcGxheVdpZHRoUHgsXG4gICAgICAgICAgICAgIGRpc3BsYXlfaGVpZ2h0X3B4OiB0b29sLmFyZ3MuZGlzcGxheUhlaWdodFB4LFxuICAgICAgICAgICAgICBkaXNwbGF5X251bWJlcjogdG9vbC5hcmdzLmRpc3BsYXlOdW1iZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImFudGhyb3BpYy5jb21wdXRlcl8yMDI0MTAyMlwiOlxuICAgICAgICAgICAgYmV0YXMuYWRkKFwiY29tcHV0ZXItdXNlLTIwMjQtMTAtMjJcIik7XG4gICAgICAgICAgICBhbnRocm9waWNUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwiY29tcHV0ZXJcIixcbiAgICAgICAgICAgICAgdHlwZTogXCJjb21wdXRlcl8yMDI0MTAyMlwiLFxuICAgICAgICAgICAgICBkaXNwbGF5X3dpZHRoX3B4OiB0b29sLmFyZ3MuZGlzcGxheVdpZHRoUHgsXG4gICAgICAgICAgICAgIGRpc3BsYXlfaGVpZ2h0X3B4OiB0b29sLmFyZ3MuZGlzcGxheUhlaWdodFB4LFxuICAgICAgICAgICAgICBkaXNwbGF5X251bWJlcjogdG9vbC5hcmdzLmRpc3BsYXlOdW1iZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImFudGhyb3BpYy50ZXh0X2VkaXRvcl8yMDI1MDEyNFwiOlxuICAgICAgICAgICAgYmV0YXMuYWRkKFwiY29tcHV0ZXItdXNlLTIwMjUtMDEtMjRcIik7XG4gICAgICAgICAgICBhbnRocm9waWNUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwic3RyX3JlcGxhY2VfZWRpdG9yXCIsXG4gICAgICAgICAgICAgIHR5cGU6IFwidGV4dF9lZGl0b3JfMjAyNTAxMjRcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiYW50aHJvcGljLnRleHRfZWRpdG9yXzIwMjQxMDIyXCI6XG4gICAgICAgICAgICBiZXRhcy5hZGQoXCJjb21wdXRlci11c2UtMjAyNC0xMC0yMlwiKTtcbiAgICAgICAgICAgIGFudGhyb3BpY1Rvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgbmFtZTogXCJzdHJfcmVwbGFjZV9lZGl0b3JcIixcbiAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0X2VkaXRvcl8yMDI0MTAyMlwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJhbnRocm9waWMudGV4dF9lZGl0b3JfMjAyNTA0MjlcIjpcbiAgICAgICAgICAgIGJldGFzLmFkZChcImNvbXB1dGVyLXVzZS0yMDI1LTAxLTI0XCIpO1xuICAgICAgICAgICAgYW50aHJvcGljVG9vbHMyLnB1c2goe1xuICAgICAgICAgICAgICBuYW1lOiBcInN0cl9yZXBsYWNlX2Jhc2VkX2VkaXRfdG9vbFwiLFxuICAgICAgICAgICAgICB0eXBlOiBcInRleHRfZWRpdG9yXzIwMjUwNDI5XCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImFudGhyb3BpYy5iYXNoXzIwMjUwMTI0XCI6XG4gICAgICAgICAgICBiZXRhcy5hZGQoXCJjb21wdXRlci11c2UtMjAyNS0wMS0yNFwiKTtcbiAgICAgICAgICAgIGFudGhyb3BpY1Rvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgbmFtZTogXCJiYXNoXCIsXG4gICAgICAgICAgICAgIHR5cGU6IFwiYmFzaF8yMDI1MDEyNFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJhbnRocm9waWMuYmFzaF8yMDI0MTAyMlwiOlxuICAgICAgICAgICAgYmV0YXMuYWRkKFwiY29tcHV0ZXItdXNlLTIwMjQtMTAtMjJcIik7XG4gICAgICAgICAgICBhbnRocm9waWNUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwiYmFzaFwiLFxuICAgICAgICAgICAgICB0eXBlOiBcImJhc2hfMjAyNDEwMjJcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiYW50aHJvcGljLndlYl9zZWFyY2hfMjAyNTAzMDVcIjoge1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IHdlYlNlYXJjaF8yMDI1MDMwNUFyZ3NTY2hlbWEucGFyc2UodG9vbC5hcmdzKTtcbiAgICAgICAgICAgIGFudGhyb3BpY1Rvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ3ZWJfc2VhcmNoXzIwMjUwMzA1XCIsXG4gICAgICAgICAgICAgIG5hbWU6IFwid2ViX3NlYXJjaFwiLFxuICAgICAgICAgICAgICBtYXhfdXNlczogYXJncy5tYXhVc2VzLFxuICAgICAgICAgICAgICBhbGxvd2VkX2RvbWFpbnM6IGFyZ3MuYWxsb3dlZERvbWFpbnMsXG4gICAgICAgICAgICAgIGJsb2NrZWRfZG9tYWluczogYXJncy5ibG9ja2VkRG9tYWlucyxcbiAgICAgICAgICAgICAgdXNlcl9sb2NhdGlvbjogYXJncy51c2VyTG9jYXRpb25cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJhbnRocm9waWMuY29kZV9leGVjdXRpb25fMjAyNTA1MjJcIjoge1xuICAgICAgICAgICAgYmV0YXMuYWRkKFwiY29kZS1leGVjdXRpb24tMjAyNS0wNS0yMlwiKTtcbiAgICAgICAgICAgIGFudGhyb3BpY1Rvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJjb2RlX2V4ZWN1dGlvbl8yMDI1MDUyMlwiLFxuICAgICAgICAgICAgICBuYW1lOiBcImNvZGVfZXhlY3V0aW9uXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0b29sV2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWQtdG9vbFwiLCB0b29sIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0b29sV2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWQtdG9vbFwiLCB0b29sIH0pO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgaWYgKHRvb2xDaG9pY2UgPT0gbnVsbCkge1xuICAgIHJldHVybiB7XG4gICAgICB0b29sczogYW50aHJvcGljVG9vbHMyLFxuICAgICAgdG9vbENob2ljZTogZGlzYWJsZVBhcmFsbGVsVG9vbFVzZSA/IHsgdHlwZTogXCJhdXRvXCIsIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U6IGRpc2FibGVQYXJhbGxlbFRvb2xVc2UgfSA6IHZvaWQgMCxcbiAgICAgIHRvb2xXYXJuaW5ncyxcbiAgICAgIGJldGFzXG4gICAgfTtcbiAgfVxuICBjb25zdCB0eXBlID0gdG9vbENob2ljZS50eXBlO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFwiYXV0b1wiOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9vbHM6IGFudGhyb3BpY1Rvb2xzMixcbiAgICAgICAgdG9vbENob2ljZToge1xuICAgICAgICAgIHR5cGU6IFwiYXV0b1wiLFxuICAgICAgICAgIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U6IGRpc2FibGVQYXJhbGxlbFRvb2xVc2VcbiAgICAgICAgfSxcbiAgICAgICAgdG9vbFdhcm5pbmdzLFxuICAgICAgICBiZXRhc1xuICAgICAgfTtcbiAgICBjYXNlIFwicmVxdWlyZWRcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvb2xzOiBhbnRocm9waWNUb29sczIsXG4gICAgICAgIHRvb2xDaG9pY2U6IHtcbiAgICAgICAgICB0eXBlOiBcImFueVwiLFxuICAgICAgICAgIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U6IGRpc2FibGVQYXJhbGxlbFRvb2xVc2VcbiAgICAgICAgfSxcbiAgICAgICAgdG9vbFdhcm5pbmdzLFxuICAgICAgICBiZXRhc1xuICAgICAgfTtcbiAgICBjYXNlIFwibm9uZVwiOlxuICAgICAgcmV0dXJuIHsgdG9vbHM6IHZvaWQgMCwgdG9vbENob2ljZTogdm9pZCAwLCB0b29sV2FybmluZ3MsIGJldGFzIH07XG4gICAgY2FzZSBcInRvb2xcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvb2xzOiBhbnRocm9waWNUb29sczIsXG4gICAgICAgIHRvb2xDaG9pY2U6IHtcbiAgICAgICAgICB0eXBlOiBcInRvb2xcIixcbiAgICAgICAgICBuYW1lOiB0b29sQ2hvaWNlLnRvb2xOYW1lLFxuICAgICAgICAgIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U6IGRpc2FibGVQYXJhbGxlbFRvb2xVc2VcbiAgICAgICAgfSxcbiAgICAgICAgdG9vbFdhcm5pbmdzLFxuICAgICAgICBiZXRhc1xuICAgICAgfTtcbiAgICBkZWZhdWx0OiB7XG4gICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gdHlwZTtcbiAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcih7XG4gICAgICAgIGZ1bmN0aW9uYWxpdHk6IGB0b29sIGNob2ljZSB0eXBlOiAke19leGhhdXN0aXZlQ2hlY2t9YFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbi8vIHNyYy9jb252ZXJ0LXRvLWFudGhyb3BpYy1tZXNzYWdlcy1wcm9tcHQudHNcbmltcG9ydCB7XG4gIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yIGFzIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yMlxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuaW1wb3J0IHsgY29udmVydFRvQmFzZTY0LCBwYXJzZVByb3ZpZGVyT3B0aW9ucyB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5cbi8vIHNyYy90b29sL2NvZGUtZXhlY3V0aW9uXzIwMjUwNTIyLnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEgYXMgY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hMiB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHo0IH0gZnJvbSBcInpvZC92NFwiO1xudmFyIGNvZGVFeGVjdXRpb25fMjAyNTA1MjJPdXRwdXRTY2hlbWEgPSB6NC5vYmplY3Qoe1xuICB0eXBlOiB6NC5saXRlcmFsKFwiY29kZV9leGVjdXRpb25fcmVzdWx0XCIpLFxuICBzdGRvdXQ6IHo0LnN0cmluZygpLFxuICBzdGRlcnI6IHo0LnN0cmluZygpLFxuICByZXR1cm5fY29kZTogejQubnVtYmVyKClcbn0pO1xudmFyIGZhY3RvcnkyID0gY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hMih7XG4gIGlkOiBcImFudGhyb3BpYy5jb2RlX2V4ZWN1dGlvbl8yMDI1MDUyMlwiLFxuICBuYW1lOiBcImNvZGVfZXhlY3V0aW9uXCIsXG4gIGlucHV0U2NoZW1hOiB6NC5vYmplY3Qoe1xuICAgIGNvZGU6IHo0LnN0cmluZygpXG4gIH0pLFxuICBvdXRwdXRTY2hlbWE6IGNvZGVFeGVjdXRpb25fMjAyNTA1MjJPdXRwdXRTY2hlbWFcbn0pO1xudmFyIGNvZGVFeGVjdXRpb25fMjAyNTA1MjIgPSAoYXJncyA9IHt9KSA9PiB7XG4gIHJldHVybiBmYWN0b3J5MihhcmdzKTtcbn07XG5cbi8vIHNyYy9jb252ZXJ0LXRvLWFudGhyb3BpYy1tZXNzYWdlcy1wcm9tcHQudHNcbmZ1bmN0aW9uIGNvbnZlcnRUb1N0cmluZyhkYXRhKSB7XG4gIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBCdWZmZXIuZnJvbShkYXRhLCBcImJhc2U2NFwiKS50b1N0cmluZyhcInV0Zi04XCIpO1xuICB9XG4gIGlmIChkYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoZGF0YSk7XG4gIH1cbiAgaWYgKGRhdGEgaW5zdGFuY2VvZiBVUkwpIHtcbiAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IyKHtcbiAgICAgIGZ1bmN0aW9uYWxpdHk6IFwiVVJMLWJhc2VkIHRleHQgZG9jdW1lbnRzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBjaXRhdGlvbnNcIlxuICAgIH0pO1xuICB9XG4gIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjIoe1xuICAgIGZ1bmN0aW9uYWxpdHk6IGB1bnN1cHBvcnRlZCBkYXRhIHR5cGUgZm9yIHRleHQgZG9jdW1lbnRzOiAke3R5cGVvZiBkYXRhfWBcbiAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiBjb252ZXJ0VG9BbnRocm9waWNNZXNzYWdlc1Byb21wdCh7XG4gIHByb21wdCxcbiAgc2VuZFJlYXNvbmluZyxcbiAgd2FybmluZ3Ncbn0pIHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgY29uc3QgYmV0YXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBjb25zdCBibG9ja3MgPSBncm91cEludG9CbG9ja3MocHJvbXB0KTtcbiAgbGV0IHN5c3RlbSA9IHZvaWQgMDtcbiAgY29uc3QgbWVzc2FnZXMgPSBbXTtcbiAgYXN5bmMgZnVuY3Rpb24gc2hvdWxkRW5hYmxlQ2l0YXRpb25zKHByb3ZpZGVyTWV0YWRhdGEpIHtcbiAgICB2YXIgX2EyLCBfYjI7XG4gICAgY29uc3QgYW50aHJvcGljT3B0aW9ucyA9IGF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zKHtcbiAgICAgIHByb3ZpZGVyOiBcImFudGhyb3BpY1wiLFxuICAgICAgcHJvdmlkZXJPcHRpb25zOiBwcm92aWRlck1ldGFkYXRhLFxuICAgICAgc2NoZW1hOiBhbnRocm9waWNGaWxlUGFydFByb3ZpZGVyT3B0aW9uc1xuICAgIH0pO1xuICAgIHJldHVybiAoX2IyID0gKF9hMiA9IGFudGhyb3BpY09wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IGFudGhyb3BpY09wdGlvbnMuY2l0YXRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmVuYWJsZWQpICE9IG51bGwgPyBfYjIgOiBmYWxzZTtcbiAgfVxuICBhc3luYyBmdW5jdGlvbiBnZXREb2N1bWVudE1ldGFkYXRhKHByb3ZpZGVyTWV0YWRhdGEpIHtcbiAgICBjb25zdCBhbnRocm9waWNPcHRpb25zID0gYXdhaXQgcGFyc2VQcm92aWRlck9wdGlvbnMoe1xuICAgICAgcHJvdmlkZXI6IFwiYW50aHJvcGljXCIsXG4gICAgICBwcm92aWRlck9wdGlvbnM6IHByb3ZpZGVyTWV0YWRhdGEsXG4gICAgICBzY2hlbWE6IGFudGhyb3BpY0ZpbGVQYXJ0UHJvdmlkZXJPcHRpb25zXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiBhbnRocm9waWNPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBhbnRocm9waWNPcHRpb25zLnRpdGxlLFxuICAgICAgY29udGV4dDogYW50aHJvcGljT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogYW50aHJvcGljT3B0aW9ucy5jb250ZXh0XG4gICAgfTtcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGJsb2Nrcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGJsb2NrID0gYmxvY2tzW2ldO1xuICAgIGNvbnN0IGlzTGFzdEJsb2NrID0gaSA9PT0gYmxvY2tzLmxlbmd0aCAtIDE7XG4gICAgY29uc3QgdHlwZSA9IGJsb2NrLnR5cGU7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIFwic3lzdGVtXCI6IHtcbiAgICAgICAgaWYgKHN5c3RlbSAhPSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yMih7XG4gICAgICAgICAgICBmdW5jdGlvbmFsaXR5OiBcIk11bHRpcGxlIHN5c3RlbSBtZXNzYWdlcyB0aGF0IGFyZSBzZXBhcmF0ZWQgYnkgdXNlci9hc3Npc3RhbnQgbWVzc2FnZXNcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHN5c3RlbSA9IGJsb2NrLm1lc3NhZ2VzLm1hcCgoeyBjb250ZW50LCBwcm92aWRlck9wdGlvbnMgfSkgPT4gKHtcbiAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICB0ZXh0OiBjb250ZW50LFxuICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGdldENhY2hlQ29udHJvbChwcm92aWRlck9wdGlvbnMpXG4gICAgICAgIH0pKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwidXNlclwiOiB7XG4gICAgICAgIGNvbnN0IGFudGhyb3BpY0NvbnRlbnQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIGJsb2NrLm1lc3NhZ2VzKSB7XG4gICAgICAgICAgY29uc3QgeyByb2xlLCBjb250ZW50IH0gPSBtZXNzYWdlO1xuICAgICAgICAgIHN3aXRjaCAocm9sZSkge1xuICAgICAgICAgICAgY2FzZSBcInVzZXJcIjoge1xuICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbnRlbnQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0ID0gY29udGVudFtqXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0xhc3RQYXJ0ID0gaiA9PT0gY29udGVudC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlQ29udHJvbCA9IChfYSA9IGdldENhY2hlQ29udHJvbChwYXJ0LnByb3ZpZGVyT3B0aW9ucykpICE9IG51bGwgPyBfYSA6IGlzTGFzdFBhcnQgPyBnZXRDYWNoZUNvbnRyb2wobWVzc2FnZS5wcm92aWRlck9wdGlvbnMpIDogdm9pZCAwO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocGFydC50eXBlKSB7XG4gICAgICAgICAgICAgICAgICBjYXNlIFwidGV4dFwiOiB7XG4gICAgICAgICAgICAgICAgICAgIGFudGhyb3BpY0NvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgdGV4dDogcGFydC50ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjYXNlIFwiZmlsZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0Lm1lZGlhVHlwZS5zdGFydHNXaXRoKFwiaW1hZ2UvXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgYW50aHJvcGljQ29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaW1hZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogcGFydC5kYXRhIGluc3RhbmNlb2YgVVJMID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcnQuZGF0YS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYV90eXBlOiBwYXJ0Lm1lZGlhVHlwZSA9PT0gXCJpbWFnZS8qXCIgPyBcImltYWdlL2pwZWdcIiA6IHBhcnQubWVkaWFUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjb252ZXJ0VG9CYXNlNjQocGFydC5kYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQubWVkaWFUeXBlID09PSBcImFwcGxpY2F0aW9uL3BkZlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgYmV0YXMuYWRkKFwicGRmcy0yMDI0LTA5LTI1XCIpO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuYWJsZUNpdGF0aW9ucyA9IGF3YWl0IHNob3VsZEVuYWJsZUNpdGF0aW9ucyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQucHJvdmlkZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IGdldERvY3VtZW50TWV0YWRhdGEoXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0LnByb3ZpZGVyT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgYW50aHJvcGljQ29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZG9jdW1lbnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogcGFydC5kYXRhIGluc3RhbmNlb2YgVVJMID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcnQuZGF0YS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYV90eXBlOiBcImFwcGxpY2F0aW9uL3BkZlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjb252ZXJ0VG9CYXNlNjQocGFydC5kYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAoX2IgPSBtZXRhZGF0YS50aXRsZSkgIT0gbnVsbCA/IF9iIDogcGFydC5maWxlbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm1ldGFkYXRhLmNvbnRleHQgJiYgeyBjb250ZXh0OiBtZXRhZGF0YS5jb250ZXh0IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5lbmFibGVDaXRhdGlvbnMgJiYge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjaXRhdGlvbnM6IHsgZW5hYmxlZDogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVfY29udHJvbDogY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydC5tZWRpYVR5cGUgPT09IFwidGV4dC9wbGFpblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5hYmxlQ2l0YXRpb25zID0gYXdhaXQgc2hvdWxkRW5hYmxlQ2l0YXRpb25zKFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5wcm92aWRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXdhaXQgZ2V0RG9jdW1lbnRNZXRhZGF0YShcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQucHJvdmlkZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICBhbnRocm9waWNDb250ZW50LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkb2N1bWVudFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBwYXJ0LmRhdGEgaW5zdGFuY2VvZiBVUkwgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogcGFydC5kYXRhLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYV90eXBlOiBcInRleHQvcGxhaW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogY29udmVydFRvU3RyaW5nKHBhcnQuZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogKF9jID0gbWV0YWRhdGEudGl0bGUpICE9IG51bGwgPyBfYyA6IHBhcnQuZmlsZW5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5tZXRhZGF0YS5jb250ZXh0ICYmIHsgY29udGV4dDogbWV0YWRhdGEuY29udGV4dCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZW5hYmxlQ2l0YXRpb25zICYmIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0YXRpb25zOiB7IGVuYWJsZWQ6IHRydWUgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25hbGl0eTogYG1lZGlhIHR5cGU6ICR7cGFydC5tZWRpYVR5cGV9YFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJ0b29sXCI6IHtcbiAgICAgICAgICAgICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IGNvbnRlbnQubGVuZ3RoOyBpMisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFydCA9IGNvbnRlbnRbaTJdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzTGFzdFBhcnQgPSBpMiA9PT0gY29udGVudC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlQ29udHJvbCA9IChfZCA9IGdldENhY2hlQ29udHJvbChwYXJ0LnByb3ZpZGVyT3B0aW9ucykpICE9IG51bGwgPyBfZCA6IGlzTGFzdFBhcnQgPyBnZXRDYWNoZUNvbnRyb2wobWVzc2FnZS5wcm92aWRlck9wdGlvbnMpIDogdm9pZCAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IHBhcnQub3V0cHV0O1xuICAgICAgICAgICAgICAgIGxldCBjb250ZW50VmFsdWU7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChvdXRwdXQudHlwZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcImNvbnRlbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFZhbHVlID0gb3V0cHV0LnZhbHVlLm1hcCgoY29udGVudFBhcnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbnRlbnRQYXJ0LnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogY29udGVudFBhcnQudGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZV9jb250cm9sOiB2b2lkIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJtZWRpYVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50UGFydC5tZWRpYVR5cGUuc3RhcnRzV2l0aChcImltYWdlL1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImltYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJiYXNlNjRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFfdHlwZTogY29udGVudFBhcnQubWVkaWFUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjb250ZW50UGFydC5kYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVfY29udHJvbDogdm9pZCAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbmFsaXR5OiBgbWVkaWEgdHlwZTogJHtjb250ZW50UGFydC5tZWRpYVR5cGV9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6XG4gICAgICAgICAgICAgICAgICBjYXNlIFwiZXJyb3ItdGV4dFwiOlxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VmFsdWUgPSBvdXRwdXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgY2FzZSBcImpzb25cIjpcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJlcnJvci1qc29uXCI6XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VmFsdWUgPSBKU09OLnN0cmluZ2lmeShvdXRwdXQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYW50aHJvcGljQ29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbF9yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xfdXNlX2lkOiBwYXJ0LnRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50VmFsdWUsXG4gICAgICAgICAgICAgICAgICBpc19lcnJvcjogb3V0cHV0LnR5cGUgPT09IFwiZXJyb3ItdGV4dFwiIHx8IG91dHB1dC50eXBlID09PSBcImVycm9yLWpzb25cIiA/IHRydWUgOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgICBjYWNoZV9jb250cm9sOiBjYWNoZUNvbnRyb2xcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IHJvbGU7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgcm9sZTogJHtfZXhoYXVzdGl2ZUNoZWNrfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IGFudGhyb3BpY0NvbnRlbnQgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcImFzc2lzdGFudFwiOiB7XG4gICAgICAgIGNvbnN0IGFudGhyb3BpY0NvbnRlbnQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBibG9jay5tZXNzYWdlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBibG9jay5tZXNzYWdlc1tqXTtcbiAgICAgICAgICBjb25zdCBpc0xhc3RNZXNzYWdlID0gaiA9PT0gYmxvY2subWVzc2FnZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICBjb25zdCB7IGNvbnRlbnQgfSA9IG1lc3NhZ2U7XG4gICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb250ZW50Lmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJ0ID0gY29udGVudFtrXTtcbiAgICAgICAgICAgIGNvbnN0IGlzTGFzdENvbnRlbnRQYXJ0ID0gayA9PT0gY29udGVudC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgY29uc3QgY2FjaGVDb250cm9sID0gKF9lID0gZ2V0Q2FjaGVDb250cm9sKHBhcnQucHJvdmlkZXJPcHRpb25zKSkgIT0gbnVsbCA/IF9lIDogaXNMYXN0Q29udGVudFBhcnQgPyBnZXRDYWNoZUNvbnRyb2wobWVzc2FnZS5wcm92aWRlck9wdGlvbnMpIDogdm9pZCAwO1xuICAgICAgICAgICAgc3dpdGNoIChwYXJ0LnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgICAgIGFudGhyb3BpY0NvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICAgICAgICAgIHRleHQ6IChcbiAgICAgICAgICAgICAgICAgICAgLy8gdHJpbSB0aGUgbGFzdCB0ZXh0IHBhcnQgaWYgaXQncyB0aGUgbGFzdCBtZXNzYWdlIGluIHRoZSBibG9ja1xuICAgICAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIEFudGhyb3BpYyBkb2VzIG5vdCBhbGxvdyB0cmFpbGluZyB3aGl0ZXNwYWNlXG4gICAgICAgICAgICAgICAgICAgIC8vIGluIHByZS1maWxsZWQgYXNzaXN0YW50IHJlc3BvbnNlc1xuICAgICAgICAgICAgICAgICAgICBpc0xhc3RCbG9jayAmJiBpc0xhc3RNZXNzYWdlICYmIGlzTGFzdENvbnRlbnRQYXJ0ID8gcGFydC50ZXh0LnRyaW0oKSA6IHBhcnQudGV4dFxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNhc2UgXCJyZWFzb25pbmdcIjoge1xuICAgICAgICAgICAgICAgIGlmIChzZW5kUmVhc29uaW5nKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCByZWFzb25pbmdNZXRhZGF0YSA9IGF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zKHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXI6IFwiYW50aHJvcGljXCIsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyT3B0aW9uczogcGFydC5wcm92aWRlck9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYTogYW50aHJvcGljUmVhc29uaW5nTWV0YWRhdGFTY2hlbWFcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgaWYgKHJlYXNvbmluZ01ldGFkYXRhICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlYXNvbmluZ01ldGFkYXRhLnNpZ25hdHVyZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgYW50aHJvcGljQ29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGhpbmtpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaW5raW5nOiBwYXJ0LnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmU6IHJlYXNvbmluZ01ldGFkYXRhLnNpZ25hdHVyZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlYXNvbmluZ01ldGFkYXRhLnJlZGFjdGVkRGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgYW50aHJvcGljQ29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicmVkYWN0ZWRfdGhpbmtpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHJlYXNvbmluZ01ldGFkYXRhLnJlZGFjdGVkRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJ1bnN1cHBvcnRlZCByZWFzb25pbmcgbWV0YWRhdGFcIlxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJ1bnN1cHBvcnRlZCByZWFzb25pbmcgbWV0YWRhdGFcIlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwib3RoZXJcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJzZW5kaW5nIHJlYXNvbmluZyBjb250ZW50IGlzIGRpc2FibGVkIGZvciB0aGlzIG1vZGVsXCJcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwidG9vbC1jYWxsXCI6IHtcbiAgICAgICAgICAgICAgICBpZiAocGFydC5wcm92aWRlckV4ZWN1dGVkKSB7XG4gICAgICAgICAgICAgICAgICBpZiAocGFydC50b29sTmFtZSA9PT0gXCJ3ZWJfc2VhcmNoXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYW50aHJvcGljQ29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNlcnZlcl90b29sX3VzZVwiLFxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBwYXJ0LnRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJ3ZWJfc2VhcmNoXCIsXG4gICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHBhcnQuaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgY2FjaGVfY29udHJvbDogY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LnRvb2xOYW1lID09PSBcImNvZGVfZXhlY3V0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYW50aHJvcGljQ29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNlcnZlcl90b29sX3VzZVwiLFxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBwYXJ0LnRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJjb2RlX2V4ZWN1dGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBwYXJ0LmlucHV0LFxuICAgICAgICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgcHJvdmlkZXIgZXhlY3V0ZWQgdG9vbCBjYWxsIGZvciB0b29sICR7cGFydC50b29sTmFtZX0gaXMgbm90IHN1cHBvcnRlZGBcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFudGhyb3BpY0NvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2xfdXNlXCIsXG4gICAgICAgICAgICAgICAgICBpZDogcGFydC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgbmFtZTogcGFydC50b29sTmFtZSxcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBwYXJ0LmlucHV0LFxuICAgICAgICAgICAgICAgICAgY2FjaGVfY29udHJvbDogY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2FzZSBcInRvb2wtcmVzdWx0XCI6IHtcbiAgICAgICAgICAgICAgICBpZiAocGFydC50b29sTmFtZSA9PT0gXCJ3ZWJfc2VhcmNoXCIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IHBhcnQub3V0cHV0O1xuICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSBcImpzb25cIikge1xuICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYHByb3ZpZGVyIGV4ZWN1dGVkIHRvb2wgcmVzdWx0IG91dHB1dCB0eXBlICR7b3V0cHV0LnR5cGV9IGZvciB0b29sICR7cGFydC50b29sTmFtZX0gaXMgbm90IHN1cHBvcnRlZGBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY29uc3Qgd2ViU2VhcmNoT3V0cHV0ID0gd2ViU2VhcmNoXzIwMjUwMzA1T3V0cHV0U2NoZW1hLnBhcnNlKFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBhbnRocm9waWNDb250ZW50LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIndlYl9zZWFyY2hfdG9vbF9yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgdG9vbF91c2VfaWQ6IHBhcnQudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogd2ViU2VhcmNoT3V0cHV0Lm1hcCgocmVzdWx0KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgIHVybDogcmVzdWx0LnVybCxcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogcmVzdWx0LnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgIHBhZ2VfYWdlOiByZXN1bHQucGFnZUFnZSxcbiAgICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRfY29udGVudDogcmVzdWx0LmVuY3J5cHRlZENvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogcmVzdWx0LnR5cGVcbiAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICBjYWNoZV9jb250cm9sOiBjYWNoZUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwYXJ0LnRvb2xOYW1lID09PSBcImNvZGVfZXhlY3V0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IHBhcnQub3V0cHV0O1xuICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSBcImpzb25cIikge1xuICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYHByb3ZpZGVyIGV4ZWN1dGVkIHRvb2wgcmVzdWx0IG91dHB1dCB0eXBlICR7b3V0cHV0LnR5cGV9IGZvciB0b29sICR7cGFydC50b29sTmFtZX0gaXMgbm90IHN1cHBvcnRlZGBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY29uc3QgY29kZUV4ZWN1dGlvbk91dHB1dCA9IGNvZGVFeGVjdXRpb25fMjAyNTA1MjJPdXRwdXRTY2hlbWEucGFyc2Uob3V0cHV0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIGFudGhyb3BpY0NvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY29kZV9leGVjdXRpb25fdG9vbF9yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgdG9vbF91c2VfaWQ6IHBhcnQudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGNvZGVFeGVjdXRpb25PdXRwdXQudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICBzdGRvdXQ6IGNvZGVFeGVjdXRpb25PdXRwdXQuc3Rkb3V0LFxuICAgICAgICAgICAgICAgICAgICAgIHN0ZGVycjogY29kZUV4ZWN1dGlvbk91dHB1dC5zdGRlcnIsXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuX2NvZGU6IGNvZGVFeGVjdXRpb25PdXRwdXQucmV0dXJuX2NvZGVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVfY29udHJvbDogY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwib3RoZXJcIixcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBwcm92aWRlciBleGVjdXRlZCB0b29sIHJlc3VsdCBmb3IgdG9vbCAke3BhcnQudG9vbE5hbWV9IGlzIG5vdCBzdXBwb3J0ZWRgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGU6IFwiYXNzaXN0YW50XCIsIGNvbnRlbnQ6IGFudGhyb3BpY0NvbnRlbnQgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gdHlwZTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBjb250ZW50IHR5cGU6ICR7X2V4aGF1c3RpdmVDaGVja31gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBwcm9tcHQ6IHsgc3lzdGVtLCBtZXNzYWdlcyB9LFxuICAgIGJldGFzXG4gIH07XG59XG5mdW5jdGlvbiBncm91cEludG9CbG9ja3MocHJvbXB0KSB7XG4gIGNvbnN0IGJsb2NrcyA9IFtdO1xuICBsZXQgY3VycmVudEJsb2NrID0gdm9pZCAwO1xuICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgcHJvbXB0KSB7XG4gICAgY29uc3QgeyByb2xlIH0gPSBtZXNzYWdlO1xuICAgIHN3aXRjaCAocm9sZSkge1xuICAgICAgY2FzZSBcInN5c3RlbVwiOiB7XG4gICAgICAgIGlmICgoY3VycmVudEJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBjdXJyZW50QmxvY2sudHlwZSkgIT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgICBjdXJyZW50QmxvY2sgPSB7IHR5cGU6IFwic3lzdGVtXCIsIG1lc3NhZ2VzOiBbXSB9O1xuICAgICAgICAgIGJsb2Nrcy5wdXNoKGN1cnJlbnRCbG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudEJsb2NrLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcImFzc2lzdGFudFwiOiB7XG4gICAgICAgIGlmICgoY3VycmVudEJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBjdXJyZW50QmxvY2sudHlwZSkgIT09IFwiYXNzaXN0YW50XCIpIHtcbiAgICAgICAgICBjdXJyZW50QmxvY2sgPSB7IHR5cGU6IFwiYXNzaXN0YW50XCIsIG1lc3NhZ2VzOiBbXSB9O1xuICAgICAgICAgIGJsb2Nrcy5wdXNoKGN1cnJlbnRCbG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudEJsb2NrLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcInVzZXJcIjoge1xuICAgICAgICBpZiAoKGN1cnJlbnRCbG9jayA9PSBudWxsID8gdm9pZCAwIDogY3VycmVudEJsb2NrLnR5cGUpICE9PSBcInVzZXJcIikge1xuICAgICAgICAgIGN1cnJlbnRCbG9jayA9IHsgdHlwZTogXCJ1c2VyXCIsIG1lc3NhZ2VzOiBbXSB9O1xuICAgICAgICAgIGJsb2Nrcy5wdXNoKGN1cnJlbnRCbG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudEJsb2NrLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcInRvb2xcIjoge1xuICAgICAgICBpZiAoKGN1cnJlbnRCbG9jayA9PSBudWxsID8gdm9pZCAwIDogY3VycmVudEJsb2NrLnR5cGUpICE9PSBcInVzZXJcIikge1xuICAgICAgICAgIGN1cnJlbnRCbG9jayA9IHsgdHlwZTogXCJ1c2VyXCIsIG1lc3NhZ2VzOiBbXSB9O1xuICAgICAgICAgIGJsb2Nrcy5wdXNoKGN1cnJlbnRCbG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudEJsb2NrLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gcm9sZTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCByb2xlOiAke19leGhhdXN0aXZlQ2hlY2t9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBibG9ja3M7XG59XG5cbi8vIHNyYy9tYXAtYW50aHJvcGljLXN0b3AtcmVhc29uLnRzXG5mdW5jdGlvbiBtYXBBbnRocm9waWNTdG9wUmVhc29uKHtcbiAgZmluaXNoUmVhc29uLFxuICBpc0pzb25SZXNwb25zZUZyb21Ub29sXG59KSB7XG4gIHN3aXRjaCAoZmluaXNoUmVhc29uKSB7XG4gICAgY2FzZSBcInBhdXNlX3R1cm5cIjpcbiAgICBjYXNlIFwiZW5kX3R1cm5cIjpcbiAgICBjYXNlIFwic3RvcF9zZXF1ZW5jZVwiOlxuICAgICAgcmV0dXJuIFwic3RvcFwiO1xuICAgIGNhc2UgXCJyZWZ1c2FsXCI6XG4gICAgICByZXR1cm4gXCJjb250ZW50LWZpbHRlclwiO1xuICAgIGNhc2UgXCJ0b29sX3VzZVwiOlxuICAgICAgcmV0dXJuIGlzSnNvblJlc3BvbnNlRnJvbVRvb2wgPyBcInN0b3BcIiA6IFwidG9vbC1jYWxsc1wiO1xuICAgIGNhc2UgXCJtYXhfdG9rZW5zXCI6XG4gICAgICByZXR1cm4gXCJsZW5ndGhcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwidW5rbm93blwiO1xuICB9XG59XG5cbi8vIHNyYy9hbnRocm9waWMtbWVzc2FnZXMtbGFuZ3VhZ2UtbW9kZWwudHNcbnZhciBjaXRhdGlvblNjaGVtYXMgPSB7XG4gIHdlYlNlYXJjaFJlc3VsdDogejUub2JqZWN0KHtcbiAgICB0eXBlOiB6NS5saXRlcmFsKFwid2ViX3NlYXJjaF9yZXN1bHRfbG9jYXRpb25cIiksXG4gICAgY2l0ZWRfdGV4dDogejUuc3RyaW5nKCksXG4gICAgdXJsOiB6NS5zdHJpbmcoKSxcbiAgICB0aXRsZTogejUuc3RyaW5nKCksXG4gICAgZW5jcnlwdGVkX2luZGV4OiB6NS5zdHJpbmcoKVxuICB9KSxcbiAgcGFnZUxvY2F0aW9uOiB6NS5vYmplY3Qoe1xuICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJwYWdlX2xvY2F0aW9uXCIpLFxuICAgIGNpdGVkX3RleHQ6IHo1LnN0cmluZygpLFxuICAgIGRvY3VtZW50X2luZGV4OiB6NS5udW1iZXIoKSxcbiAgICBkb2N1bWVudF90aXRsZTogejUuc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBzdGFydF9wYWdlX251bWJlcjogejUubnVtYmVyKCksXG4gICAgZW5kX3BhZ2VfbnVtYmVyOiB6NS5udW1iZXIoKVxuICB9KSxcbiAgY2hhckxvY2F0aW9uOiB6NS5vYmplY3Qoe1xuICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJjaGFyX2xvY2F0aW9uXCIpLFxuICAgIGNpdGVkX3RleHQ6IHo1LnN0cmluZygpLFxuICAgIGRvY3VtZW50X2luZGV4OiB6NS5udW1iZXIoKSxcbiAgICBkb2N1bWVudF90aXRsZTogejUuc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBzdGFydF9jaGFyX2luZGV4OiB6NS5udW1iZXIoKSxcbiAgICBlbmRfY2hhcl9pbmRleDogejUubnVtYmVyKClcbiAgfSlcbn07XG52YXIgY2l0YXRpb25TY2hlbWEgPSB6NS5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgY2l0YXRpb25TY2hlbWFzLndlYlNlYXJjaFJlc3VsdCxcbiAgY2l0YXRpb25TY2hlbWFzLnBhZ2VMb2NhdGlvbixcbiAgY2l0YXRpb25TY2hlbWFzLmNoYXJMb2NhdGlvblxuXSk7XG52YXIgZG9jdW1lbnRDaXRhdGlvblNjaGVtYSA9IHo1LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICBjaXRhdGlvblNjaGVtYXMucGFnZUxvY2F0aW9uLFxuICBjaXRhdGlvblNjaGVtYXMuY2hhckxvY2F0aW9uXG5dKTtcbmZ1bmN0aW9uIHByb2Nlc3NDaXRhdGlvbihjaXRhdGlvbiwgY2l0YXRpb25Eb2N1bWVudHMsIGdlbmVyYXRlSWQzLCBvblNvdXJjZSkge1xuICBpZiAoY2l0YXRpb24udHlwZSA9PT0gXCJwYWdlX2xvY2F0aW9uXCIgfHwgY2l0YXRpb24udHlwZSA9PT0gXCJjaGFyX2xvY2F0aW9uXCIpIHtcbiAgICBjb25zdCBzb3VyY2UgPSBjcmVhdGVDaXRhdGlvblNvdXJjZShcbiAgICAgIGNpdGF0aW9uLFxuICAgICAgY2l0YXRpb25Eb2N1bWVudHMsXG4gICAgICBnZW5lcmF0ZUlkM1xuICAgICk7XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgb25Tb3VyY2Uoc291cmNlKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZUNpdGF0aW9uU291cmNlKGNpdGF0aW9uLCBjaXRhdGlvbkRvY3VtZW50cywgZ2VuZXJhdGVJZDMpIHtcbiAgdmFyIF9hO1xuICBjb25zdCBkb2N1bWVudEluZm8gPSBjaXRhdGlvbkRvY3VtZW50c1tjaXRhdGlvbi5kb2N1bWVudF9pbmRleF07XG4gIGlmICghZG9jdW1lbnRJbmZvKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgcHJvdmlkZXJNZXRhZGF0YSA9IGNpdGF0aW9uLnR5cGUgPT09IFwicGFnZV9sb2NhdGlvblwiID8ge1xuICAgIGNpdGVkVGV4dDogY2l0YXRpb24uY2l0ZWRfdGV4dCxcbiAgICBzdGFydFBhZ2VOdW1iZXI6IGNpdGF0aW9uLnN0YXJ0X3BhZ2VfbnVtYmVyLFxuICAgIGVuZFBhZ2VOdW1iZXI6IGNpdGF0aW9uLmVuZF9wYWdlX251bWJlclxuICB9IDoge1xuICAgIGNpdGVkVGV4dDogY2l0YXRpb24uY2l0ZWRfdGV4dCxcbiAgICBzdGFydENoYXJJbmRleDogY2l0YXRpb24uc3RhcnRfY2hhcl9pbmRleCxcbiAgICBlbmRDaGFySW5kZXg6IGNpdGF0aW9uLmVuZF9jaGFyX2luZGV4XG4gIH07XG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJzb3VyY2VcIixcbiAgICBzb3VyY2VUeXBlOiBcImRvY3VtZW50XCIsXG4gICAgaWQ6IGdlbmVyYXRlSWQzKCksXG4gICAgbWVkaWFUeXBlOiBkb2N1bWVudEluZm8ubWVkaWFUeXBlLFxuICAgIHRpdGxlOiAoX2EgPSBjaXRhdGlvbi5kb2N1bWVudF90aXRsZSkgIT0gbnVsbCA/IF9hIDogZG9jdW1lbnRJbmZvLnRpdGxlLFxuICAgIGZpbGVuYW1lOiBkb2N1bWVudEluZm8uZmlsZW5hbWUsXG4gICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgYW50aHJvcGljOiBwcm92aWRlck1ldGFkYXRhXG4gICAgfVxuICB9O1xufVxudmFyIEFudGhyb3BpY01lc3NhZ2VzTGFuZ3VhZ2VNb2RlbCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobW9kZWxJZCwgY29uZmlnKSB7XG4gICAgdGhpcy5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjJcIjtcbiAgICB2YXIgX2E7XG4gICAgdGhpcy5tb2RlbElkID0gbW9kZWxJZDtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLmdlbmVyYXRlSWQgPSAoX2EgPSBjb25maWcuZ2VuZXJhdGVJZCkgIT0gbnVsbCA/IF9hIDogZ2VuZXJhdGVJZDtcbiAgfVxuICBzdXBwb3J0c1VybCh1cmwpIHtcbiAgICByZXR1cm4gdXJsLnByb3RvY29sID09PSBcImh0dHBzOlwiO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgZ2V0IHN1cHBvcnRlZFVybHMoKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgcmV0dXJuIChfYyA9IChfYiA9IChfYSA9IHRoaXMuY29uZmlnKS5zdXBwb3J0ZWRVcmxzKSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2FsbChfYSkpICE9IG51bGwgPyBfYyA6IHt9O1xuICB9XG4gIGFzeW5jIGdldEFyZ3Moe1xuICAgIHByb21wdCxcbiAgICBtYXhPdXRwdXRUb2tlbnMgPSA0MDk2LFxuICAgIC8vIDQwOTY6IG1heCBtb2RlbCBvdXRwdXQgdG9rZW5zIFRPRE8gdXBkYXRlIGRlZmF1bHQgaW4gdjVcbiAgICB0ZW1wZXJhdHVyZSxcbiAgICB0b3BQLFxuICAgIHRvcEssXG4gICAgZnJlcXVlbmN5UGVuYWx0eSxcbiAgICBwcmVzZW5jZVBlbmFsdHksXG4gICAgc3RvcFNlcXVlbmNlcyxcbiAgICByZXNwb25zZUZvcm1hdCxcbiAgICBzZWVkLFxuICAgIHRvb2xzLFxuICAgIHRvb2xDaG9pY2UsXG4gICAgcHJvdmlkZXJPcHRpb25zXG4gIH0pIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgIGlmIChmcmVxdWVuY3lQZW5hbHR5ICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgc2V0dGluZzogXCJmcmVxdWVuY3lQZW5hbHR5XCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocHJlc2VuY2VQZW5hbHR5ICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgc2V0dGluZzogXCJwcmVzZW5jZVBlbmFsdHlcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChzZWVkICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgc2V0dGluZzogXCJzZWVkXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoKHJlc3BvbnNlRm9ybWF0ID09IG51bGwgPyB2b2lkIDAgOiByZXNwb25zZUZvcm1hdC50eXBlKSA9PT0gXCJqc29uXCIpIHtcbiAgICAgIGlmIChyZXNwb25zZUZvcm1hdC5zY2hlbWEgPT0gbnVsbCkge1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInJlc3BvbnNlRm9ybWF0XCIsXG4gICAgICAgICAgZGV0YWlsczogXCJKU09OIHJlc3BvbnNlIGZvcm1hdCByZXF1aXJlcyBhIHNjaGVtYS4gVGhlIHJlc3BvbnNlIGZvcm1hdCBpcyBpZ25vcmVkLlwiXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICh0b29scyAhPSBudWxsKSB7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICAgIHNldHRpbmc6IFwidG9vbHNcIixcbiAgICAgICAgICBkZXRhaWxzOiBcIkpTT04gcmVzcG9uc2UgZm9ybWF0IGRvZXMgbm90IHN1cHBvcnQgdG9vbHMuIFRoZSBwcm92aWRlZCB0b29scyBhcmUgaWdub3JlZC5cIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QganNvblJlc3BvbnNlVG9vbCA9IChyZXNwb25zZUZvcm1hdCA9PSBudWxsID8gdm9pZCAwIDogcmVzcG9uc2VGb3JtYXQudHlwZSkgPT09IFwianNvblwiICYmIHJlc3BvbnNlRm9ybWF0LnNjaGVtYSAhPSBudWxsID8ge1xuICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgbmFtZTogXCJqc29uXCIsXG4gICAgICBkZXNjcmlwdGlvbjogXCJSZXNwb25kIHdpdGggYSBKU09OIG9iamVjdC5cIixcbiAgICAgIGlucHV0U2NoZW1hOiByZXNwb25zZUZvcm1hdC5zY2hlbWFcbiAgICB9IDogdm9pZCAwO1xuICAgIGNvbnN0IGFudGhyb3BpY09wdGlvbnMgPSBhd2FpdCBwYXJzZVByb3ZpZGVyT3B0aW9uczIoe1xuICAgICAgcHJvdmlkZXI6IFwiYW50aHJvcGljXCIsXG4gICAgICBwcm92aWRlck9wdGlvbnMsXG4gICAgICBzY2hlbWE6IGFudGhyb3BpY1Byb3ZpZGVyT3B0aW9uc1xuICAgIH0pO1xuICAgIGNvbnN0IHsgcHJvbXB0OiBtZXNzYWdlc1Byb21wdCwgYmV0YXM6IG1lc3NhZ2VzQmV0YXMgfSA9IGF3YWl0IGNvbnZlcnRUb0FudGhyb3BpY01lc3NhZ2VzUHJvbXB0KHtcbiAgICAgIHByb21wdCxcbiAgICAgIHNlbmRSZWFzb25pbmc6IChfYSA9IGFudGhyb3BpY09wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IGFudGhyb3BpY09wdGlvbnMuc2VuZFJlYXNvbmluZykgIT0gbnVsbCA/IF9hIDogdHJ1ZSxcbiAgICAgIHdhcm5pbmdzXG4gICAgfSk7XG4gICAgY29uc3QgaXNUaGlua2luZyA9ICgoX2IgPSBhbnRocm9waWNPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBhbnRocm9waWNPcHRpb25zLnRoaW5raW5nKSA9PSBudWxsID8gdm9pZCAwIDogX2IudHlwZSkgPT09IFwiZW5hYmxlZFwiO1xuICAgIGNvbnN0IHRoaW5raW5nQnVkZ2V0ID0gKF9jID0gYW50aHJvcGljT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogYW50aHJvcGljT3B0aW9ucy50aGlua2luZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmJ1ZGdldFRva2VucztcbiAgICBjb25zdCBiYXNlQXJncyA9IHtcbiAgICAgIC8vIG1vZGVsIGlkOlxuICAgICAgbW9kZWw6IHRoaXMubW9kZWxJZCxcbiAgICAgIC8vIHN0YW5kYXJkaXplZCBzZXR0aW5nczpcbiAgICAgIG1heF90b2tlbnM6IG1heE91dHB1dFRva2VucyxcbiAgICAgIHRlbXBlcmF0dXJlLFxuICAgICAgdG9wX2s6IHRvcEssXG4gICAgICB0b3BfcDogdG9wUCxcbiAgICAgIHN0b3Bfc2VxdWVuY2VzOiBzdG9wU2VxdWVuY2VzLFxuICAgICAgLy8gcHJvdmlkZXIgc3BlY2lmaWMgc2V0dGluZ3M6XG4gICAgICAuLi5pc1RoaW5raW5nICYmIHtcbiAgICAgICAgdGhpbmtpbmc6IHsgdHlwZTogXCJlbmFibGVkXCIsIGJ1ZGdldF90b2tlbnM6IHRoaW5raW5nQnVkZ2V0IH1cbiAgICAgIH0sXG4gICAgICAvLyBwcm9tcHQ6XG4gICAgICBzeXN0ZW06IG1lc3NhZ2VzUHJvbXB0LnN5c3RlbSxcbiAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlc1Byb21wdC5tZXNzYWdlc1xuICAgIH07XG4gICAgaWYgKGlzVGhpbmtpbmcpIHtcbiAgICAgIGlmICh0aGlua2luZ0J1ZGdldCA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjMoe1xuICAgICAgICAgIGZ1bmN0aW9uYWxpdHk6IFwidGhpbmtpbmcgcmVxdWlyZXMgYSBidWRnZXRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy50ZW1wZXJhdHVyZSAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLnRlbXBlcmF0dXJlID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInRlbXBlcmF0dXJlXCIsXG4gICAgICAgICAgZGV0YWlsczogXCJ0ZW1wZXJhdHVyZSBpcyBub3Qgc3VwcG9ydGVkIHdoZW4gdGhpbmtpbmcgaXMgZW5hYmxlZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHRvcEsgIT0gbnVsbCkge1xuICAgICAgICBiYXNlQXJncy50b3BfayA9IHZvaWQgMDtcbiAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgICAgc2V0dGluZzogXCJ0b3BLXCIsXG4gICAgICAgICAgZGV0YWlsczogXCJ0b3BLIGlzIG5vdCBzdXBwb3J0ZWQgd2hlbiB0aGlua2luZyBpcyBlbmFibGVkXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAodG9wUCAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLnRvcF9wID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInRvcFBcIixcbiAgICAgICAgICBkZXRhaWxzOiBcInRvcFAgaXMgbm90IHN1cHBvcnRlZCB3aGVuIHRoaW5raW5nIGlzIGVuYWJsZWRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGJhc2VBcmdzLm1heF90b2tlbnMgPSBtYXhPdXRwdXRUb2tlbnMgKyB0aGlua2luZ0J1ZGdldDtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgdG9vbHM6IGFudGhyb3BpY1Rvb2xzMixcbiAgICAgIHRvb2xDaG9pY2U6IGFudGhyb3BpY1Rvb2xDaG9pY2UsXG4gICAgICB0b29sV2FybmluZ3MsXG4gICAgICBiZXRhczogdG9vbHNCZXRhc1xuICAgIH0gPSBwcmVwYXJlVG9vbHMoXG4gICAgICBqc29uUmVzcG9uc2VUb29sICE9IG51bGwgPyB7XG4gICAgICAgIHRvb2xzOiBbanNvblJlc3BvbnNlVG9vbF0sXG4gICAgICAgIHRvb2xDaG9pY2U6IHsgdHlwZTogXCJ0b29sXCIsIHRvb2xOYW1lOiBqc29uUmVzcG9uc2VUb29sLm5hbWUgfSxcbiAgICAgICAgZGlzYWJsZVBhcmFsbGVsVG9vbFVzZTogdHJ1ZVxuICAgICAgfSA6IHtcbiAgICAgICAgdG9vbHM6IHRvb2xzICE9IG51bGwgPyB0b29scyA6IFtdLFxuICAgICAgICB0b29sQ2hvaWNlLFxuICAgICAgICBkaXNhYmxlUGFyYWxsZWxUb29sVXNlOiBhbnRocm9waWNPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBhbnRocm9waWNPcHRpb25zLmRpc2FibGVQYXJhbGxlbFRvb2xVc2VcbiAgICAgIH1cbiAgICApO1xuICAgIHJldHVybiB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIC4uLmJhc2VBcmdzLFxuICAgICAgICB0b29sczogYW50aHJvcGljVG9vbHMyLFxuICAgICAgICB0b29sX2Nob2ljZTogYW50aHJvcGljVG9vbENob2ljZVxuICAgICAgfSxcbiAgICAgIHdhcm5pbmdzOiBbLi4ud2FybmluZ3MsIC4uLnRvb2xXYXJuaW5nc10sXG4gICAgICBiZXRhczogLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWy4uLm1lc3NhZ2VzQmV0YXMsIC4uLnRvb2xzQmV0YXNdKSxcbiAgICAgIHVzZXNKc29uUmVzcG9uc2VUb29sOiBqc29uUmVzcG9uc2VUb29sICE9IG51bGxcbiAgICB9O1xuICB9XG4gIGFzeW5jIGdldEhlYWRlcnMoe1xuICAgIGJldGFzLFxuICAgIGhlYWRlcnNcbiAgfSkge1xuICAgIHJldHVybiBjb21iaW5lSGVhZGVycyhcbiAgICAgIGF3YWl0IHJlc29sdmUodGhpcy5jb25maWcuaGVhZGVycyksXG4gICAgICBiZXRhcy5zaXplID4gMCA/IHsgXCJhbnRocm9waWMtYmV0YVwiOiBBcnJheS5mcm9tKGJldGFzKS5qb2luKFwiLFwiKSB9IDoge30sXG4gICAgICBoZWFkZXJzXG4gICAgKTtcbiAgfVxuICBidWlsZFJlcXVlc3RVcmwoaXNTdHJlYW1pbmcpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICByZXR1cm4gKF9jID0gKF9iID0gKF9hID0gdGhpcy5jb25maWcpLmJ1aWxkUmVxdWVzdFVybCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIHRoaXMuY29uZmlnLmJhc2VVUkwsIGlzU3RyZWFtaW5nKSkgIT0gbnVsbCA/IF9jIDogYCR7dGhpcy5jb25maWcuYmFzZVVSTH0vbWVzc2FnZXNgO1xuICB9XG4gIHRyYW5zZm9ybVJlcXVlc3RCb2R5KGFyZ3MpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICByZXR1cm4gKF9jID0gKF9iID0gKF9hID0gdGhpcy5jb25maWcpLnRyYW5zZm9ybVJlcXVlc3RCb2R5KSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2FsbChfYSwgYXJncykpICE9IG51bGwgPyBfYyA6IGFyZ3M7XG4gIH1cbiAgZXh0cmFjdENpdGF0aW9uRG9jdW1lbnRzKHByb21wdCkge1xuICAgIGNvbnN0IGlzQ2l0YXRpb25QYXJ0ID0gKHBhcnQpID0+IHtcbiAgICAgIHZhciBfYSwgX2I7XG4gICAgICBpZiAocGFydC50eXBlICE9PSBcImZpbGVcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAocGFydC5tZWRpYVR5cGUgIT09IFwiYXBwbGljYXRpb24vcGRmXCIgJiYgcGFydC5tZWRpYVR5cGUgIT09IFwidGV4dC9wbGFpblwiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFudGhyb3BpYzIgPSAoX2EgPSBwYXJ0LnByb3ZpZGVyT3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmFudGhyb3BpYztcbiAgICAgIGNvbnN0IGNpdGF0aW9uc0NvbmZpZyA9IGFudGhyb3BpYzIgPT0gbnVsbCA/IHZvaWQgMCA6IGFudGhyb3BpYzIuY2l0YXRpb25zO1xuICAgICAgcmV0dXJuIChfYiA9IGNpdGF0aW9uc0NvbmZpZyA9PSBudWxsID8gdm9pZCAwIDogY2l0YXRpb25zQ29uZmlnLmVuYWJsZWQpICE9IG51bGwgPyBfYiA6IGZhbHNlO1xuICAgIH07XG4gICAgcmV0dXJuIHByb21wdC5maWx0ZXIoKG1lc3NhZ2UpID0+IG1lc3NhZ2Uucm9sZSA9PT0gXCJ1c2VyXCIpLmZsYXRNYXAoKG1lc3NhZ2UpID0+IG1lc3NhZ2UuY29udGVudCkuZmlsdGVyKGlzQ2l0YXRpb25QYXJ0KS5tYXAoKHBhcnQpID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIGNvbnN0IGZpbGVQYXJ0ID0gcGFydDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpdGxlOiAoX2EgPSBmaWxlUGFydC5maWxlbmFtZSkgIT0gbnVsbCA/IF9hIDogXCJVbnRpdGxlZCBEb2N1bWVudFwiLFxuICAgICAgICBmaWxlbmFtZTogZmlsZVBhcnQuZmlsZW5hbWUsXG4gICAgICAgIG1lZGlhVHlwZTogZmlsZVBhcnQubWVkaWFUeXBlXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG4gIGFzeW5jIGRvR2VuZXJhdGUob3B0aW9ucykge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgY29uc3QgeyBhcmdzLCB3YXJuaW5ncywgYmV0YXMsIHVzZXNKc29uUmVzcG9uc2VUb29sIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3QgY2l0YXRpb25Eb2N1bWVudHMgPSB0aGlzLmV4dHJhY3RDaXRhdGlvbkRvY3VtZW50cyhvcHRpb25zLnByb21wdCk7XG4gICAgY29uc3Qge1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgdmFsdWU6IHJlc3BvbnNlLFxuICAgICAgcmF3VmFsdWU6IHJhd1Jlc3BvbnNlXG4gICAgfSA9IGF3YWl0IHBvc3RKc29uVG9BcGkoe1xuICAgICAgdXJsOiB0aGlzLmJ1aWxkUmVxdWVzdFVybChmYWxzZSksXG4gICAgICBoZWFkZXJzOiBhd2FpdCB0aGlzLmdldEhlYWRlcnMoeyBiZXRhcywgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzIH0pLFxuICAgICAgYm9keTogdGhpcy50cmFuc2Zvcm1SZXF1ZXN0Qm9keShhcmdzKSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogYW50aHJvcGljRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcihcbiAgICAgICAgYW50aHJvcGljTWVzc2FnZXNSZXNwb25zZVNjaGVtYVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgY29uc3QgY29udGVudCA9IFtdO1xuICAgIGZvciAoY29uc3QgcGFydCBvZiByZXNwb25zZS5jb250ZW50KSB7XG4gICAgICBzd2l0Y2ggKHBhcnQudHlwZSkge1xuICAgICAgICBjYXNlIFwidGV4dFwiOiB7XG4gICAgICAgICAgaWYgKCF1c2VzSnNvblJlc3BvbnNlVG9vbCkge1xuICAgICAgICAgICAgY29udGVudC5wdXNoKHsgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IHBhcnQudGV4dCB9KTtcbiAgICAgICAgICAgIGlmIChwYXJ0LmNpdGF0aW9ucykge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNpdGF0aW9uIG9mIHBhcnQuY2l0YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc0NpdGF0aW9uKFxuICAgICAgICAgICAgICAgICAgY2l0YXRpb24sXG4gICAgICAgICAgICAgICAgICBjaXRhdGlvbkRvY3VtZW50cyxcbiAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVJZCxcbiAgICAgICAgICAgICAgICAgIChzb3VyY2UpID0+IGNvbnRlbnQucHVzaChzb3VyY2UpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidGhpbmtpbmdcIjoge1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZ1wiLFxuICAgICAgICAgICAgdGV4dDogcGFydC50aGlua2luZyxcbiAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgYW50aHJvcGljOiB7XG4gICAgICAgICAgICAgICAgc2lnbmF0dXJlOiBwYXJ0LnNpZ25hdHVyZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInJlZGFjdGVkX3RoaW5raW5nXCI6IHtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmdcIixcbiAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIGFudGhyb3BpYzoge1xuICAgICAgICAgICAgICAgIHJlZGFjdGVkRGF0YTogcGFydC5kYXRhXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidG9vbF91c2VcIjoge1xuICAgICAgICAgIGNvbnRlbnQucHVzaChcbiAgICAgICAgICAgIC8vIHdoZW4gYSBqc29uIHJlc3BvbnNlIHRvb2wgaXMgdXNlZCwgdGhlIHRvb2wgY2FsbCBiZWNvbWVzIHRoZSB0ZXh0OlxuICAgICAgICAgICAgdXNlc0pzb25SZXNwb25zZVRvb2wgPyB7XG4gICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICB0ZXh0OiBKU09OLnN0cmluZ2lmeShwYXJ0LmlucHV0KVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgICAgdG9vbE5hbWU6IHBhcnQubmFtZSxcbiAgICAgICAgICAgICAgaW5wdXQ6IEpTT04uc3RyaW5naWZ5KHBhcnQuaW5wdXQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwic2VydmVyX3Rvb2xfdXNlXCI6IHtcbiAgICAgICAgICBpZiAocGFydC5uYW1lID09PSBcIndlYl9zZWFyY2hcIiB8fCBwYXJ0Lm5hbWUgPT09IFwiY29kZV9leGVjdXRpb25cIikge1xuICAgICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgICAgdG9vbE5hbWU6IHBhcnQubmFtZSxcbiAgICAgICAgICAgICAgaW5wdXQ6IEpTT04uc3RyaW5naWZ5KHBhcnQuaW5wdXQpLFxuICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIndlYl9zZWFyY2hfdG9vbF9yZXN1bHRcIjoge1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcnQuY29udGVudCkpIHtcbiAgICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC50b29sX3VzZV9pZCxcbiAgICAgICAgICAgICAgdG9vbE5hbWU6IFwid2ViX3NlYXJjaFwiLFxuICAgICAgICAgICAgICByZXN1bHQ6IHBhcnQuY29udGVudC5tYXAoKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIHVybDogcmVzdWx0LnVybCxcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXN1bHQudGl0bGUsXG4gICAgICAgICAgICAgICAgICBwYWdlQWdlOiAoX2EyID0gcmVzdWx0LnBhZ2VfYWdlKSAhPSBudWxsID8gX2EyIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZENvbnRlbnQ6IHJlc3VsdC5lbmNyeXB0ZWRfY29udGVudCxcbiAgICAgICAgICAgICAgICAgIHR5cGU6IHJlc3VsdC50eXBlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcGFydC5jb250ZW50KSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJzb3VyY2VcIixcbiAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcInVybFwiLFxuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgICAgICAgICAgICB1cmw6IHJlc3VsdC51cmwsXG4gICAgICAgICAgICAgICAgdGl0bGU6IHJlc3VsdC50aXRsZSxcbiAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBhbnRocm9waWM6IHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZUFnZTogKF9hID0gcmVzdWx0LnBhZ2VfYWdlKSAhPSBudWxsID8gX2EgOiBudWxsXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LnRvb2xfdXNlX2lkLFxuICAgICAgICAgICAgICB0b29sTmFtZTogXCJ3ZWJfc2VhcmNoXCIsXG4gICAgICAgICAgICAgIGlzRXJyb3I6IHRydWUsXG4gICAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwid2ViX3NlYXJjaF90b29sX3Jlc3VsdF9lcnJvclwiLFxuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogcGFydC5jb250ZW50LmVycm9yX2NvZGVcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJjb2RlX2V4ZWN1dGlvbl90b29sX3Jlc3VsdFwiOiB7XG4gICAgICAgICAgaWYgKHBhcnQuY29udGVudC50eXBlID09PSBcImNvZGVfZXhlY3V0aW9uX3Jlc3VsdFwiKSB7XG4gICAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQudG9vbF91c2VfaWQsXG4gICAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvZGVfZXhlY3V0aW9uXCIsXG4gICAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IHBhcnQuY29udGVudC50eXBlLFxuICAgICAgICAgICAgICAgIHN0ZG91dDogcGFydC5jb250ZW50LnN0ZG91dCxcbiAgICAgICAgICAgICAgICBzdGRlcnI6IHBhcnQuY29udGVudC5zdGRlcnIsXG4gICAgICAgICAgICAgICAgcmV0dXJuX2NvZGU6IHBhcnQuY29udGVudC5yZXR1cm5fY29kZVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQuY29udGVudC50eXBlID09PSBcImNvZGVfZXhlY3V0aW9uX3Rvb2xfcmVzdWx0X2Vycm9yXCIpIHtcbiAgICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC50b29sX3VzZV9pZCxcbiAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29kZV9leGVjdXRpb25cIixcbiAgICAgICAgICAgICAgaXNFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJjb2RlX2V4ZWN1dGlvbl90b29sX3Jlc3VsdF9lcnJvclwiLFxuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogcGFydC5jb250ZW50LmVycm9yX2NvZGVcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBjb250ZW50LFxuICAgICAgZmluaXNoUmVhc29uOiBtYXBBbnRocm9waWNTdG9wUmVhc29uKHtcbiAgICAgICAgZmluaXNoUmVhc29uOiByZXNwb25zZS5zdG9wX3JlYXNvbixcbiAgICAgICAgaXNKc29uUmVzcG9uc2VGcm9tVG9vbDogdXNlc0pzb25SZXNwb25zZVRvb2xcbiAgICAgIH0pLFxuICAgICAgdXNhZ2U6IHtcbiAgICAgICAgaW5wdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLmlucHV0X3Rva2VucyxcbiAgICAgICAgb3V0cHV0VG9rZW5zOiByZXNwb25zZS51c2FnZS5vdXRwdXRfdG9rZW5zLFxuICAgICAgICB0b3RhbFRva2VuczogcmVzcG9uc2UudXNhZ2UuaW5wdXRfdG9rZW5zICsgcmVzcG9uc2UudXNhZ2Uub3V0cHV0X3Rva2VucyxcbiAgICAgICAgY2FjaGVkSW5wdXRUb2tlbnM6IChfYiA9IHJlc3BvbnNlLnVzYWdlLmNhY2hlX3JlYWRfaW5wdXRfdG9rZW5zKSAhPSBudWxsID8gX2IgOiB2b2lkIDBcbiAgICAgIH0sXG4gICAgICByZXF1ZXN0OiB7IGJvZHk6IGFyZ3MgfSxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIGlkOiAoX2MgPSByZXNwb25zZS5pZCkgIT0gbnVsbCA/IF9jIDogdm9pZCAwLFxuICAgICAgICBtb2RlbElkOiAoX2QgPSByZXNwb25zZS5tb2RlbCkgIT0gbnVsbCA/IF9kIDogdm9pZCAwLFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIGJvZHk6IHJhd1Jlc3BvbnNlXG4gICAgICB9LFxuICAgICAgd2FybmluZ3MsXG4gICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgIGFudGhyb3BpYzoge1xuICAgICAgICAgIHVzYWdlOiByZXNwb25zZS51c2FnZSxcbiAgICAgICAgICBjYWNoZUNyZWF0aW9uSW5wdXRUb2tlbnM6IChfZSA9IHJlc3BvbnNlLnVzYWdlLmNhY2hlX2NyZWF0aW9uX2lucHV0X3Rva2VucykgIT0gbnVsbCA/IF9lIDogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBhc3luYyBkb1N0cmVhbShvcHRpb25zKSB7XG4gICAgY29uc3QgeyBhcmdzLCB3YXJuaW5ncywgYmV0YXMsIHVzZXNKc29uUmVzcG9uc2VUb29sIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3QgY2l0YXRpb25Eb2N1bWVudHMgPSB0aGlzLmV4dHJhY3RDaXRhdGlvbkRvY3VtZW50cyhvcHRpb25zLnByb21wdCk7XG4gICAgY29uc3QgYm9keSA9IHsgLi4uYXJncywgc3RyZWFtOiB0cnVlIH07XG4gICAgY29uc3QgeyByZXNwb25zZUhlYWRlcnMsIHZhbHVlOiByZXNwb25zZSB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaSh7XG4gICAgICB1cmw6IHRoaXMuYnVpbGRSZXF1ZXN0VXJsKHRydWUpLFxuICAgICAgaGVhZGVyczogYXdhaXQgdGhpcy5nZXRIZWFkZXJzKHsgYmV0YXMsIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyB9KSxcbiAgICAgIGJvZHk6IHRoaXMudHJhbnNmb3JtUmVxdWVzdEJvZHkoYm9keSksXG4gICAgICBmYWlsZWRSZXNwb25zZUhhbmRsZXI6IGFudGhyb3BpY0ZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUV2ZW50U291cmNlUmVzcG9uc2VIYW5kbGVyKFxuICAgICAgICBhbnRocm9waWNNZXNzYWdlc0NodW5rU2NoZW1hXG4gICAgICApLFxuICAgICAgYWJvcnRTaWduYWw6IG9wdGlvbnMuYWJvcnRTaWduYWwsXG4gICAgICBmZXRjaDogdGhpcy5jb25maWcuZmV0Y2hcbiAgICB9KTtcbiAgICBsZXQgZmluaXNoUmVhc29uID0gXCJ1bmtub3duXCI7XG4gICAgY29uc3QgdXNhZ2UgPSB7XG4gICAgICBpbnB1dFRva2Vuczogdm9pZCAwLFxuICAgICAgb3V0cHV0VG9rZW5zOiB2b2lkIDAsXG4gICAgICB0b3RhbFRva2Vuczogdm9pZCAwXG4gICAgfTtcbiAgICBjb25zdCBjb250ZW50QmxvY2tzID0ge307XG4gICAgbGV0IHByb3ZpZGVyTWV0YWRhdGEgPSB2b2lkIDA7XG4gICAgbGV0IGJsb2NrVHlwZSA9IHZvaWQgMDtcbiAgICBjb25zdCBnZW5lcmF0ZUlkMyA9IHRoaXMuZ2VuZXJhdGVJZDtcbiAgICByZXR1cm4ge1xuICAgICAgc3RyZWFtOiByZXNwb25zZS5waXBlVGhyb3VnaChcbiAgICAgICAgbmV3IFRyYW5zZm9ybVN0cmVhbSh7XG4gICAgICAgICAgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJzdHJlYW0tc3RhcnRcIiwgd2FybmluZ3MgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0cmFuc2Zvcm0oY2h1bmssIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmluY2x1ZGVSYXdDaHVua3MpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJyYXdcIiwgcmF3VmFsdWU6IGNodW5rLnJhd1ZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjaHVuay5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwiZXJyb3JcIiwgZXJyb3I6IGNodW5rLmVycm9yIH0pO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNodW5rLnZhbHVlO1xuICAgICAgICAgICAgc3dpdGNoICh2YWx1ZS50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJwaW5nXCI6IHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2FzZSBcImNvbnRlbnRfYmxvY2tfc3RhcnRcIjoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRCbG9ja1R5cGUgPSB2YWx1ZS5jb250ZW50X2Jsb2NrLnR5cGU7XG4gICAgICAgICAgICAgICAgYmxvY2tUeXBlID0gY29udGVudEJsb2NrVHlwZTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbnRlbnRCbG9ja1R5cGUpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEJsb2Nrc1t2YWx1ZS5pbmRleF0gPSB7IHR5cGU6IFwidGV4dFwiIH07XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0LXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IFN0cmluZyh2YWx1ZS5pbmRleClcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0aGlua2luZ1wiOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRCbG9ja3NbdmFsdWUuaW5kZXhdID0geyB0eXBlOiBcInJlYXNvbmluZ1wiIH07XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmctc3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgICBpZDogU3RyaW5nKHZhbHVlLmluZGV4KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY2FzZSBcInJlZGFjdGVkX3RoaW5raW5nXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEJsb2Nrc1t2YWx1ZS5pbmRleF0gPSB7IHR5cGU6IFwicmVhc29uaW5nXCIgfTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBTdHJpbmcodmFsdWUuaW5kZXgpLFxuICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFudGhyb3BpYzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZWRhY3RlZERhdGE6IHZhbHVlLmNvbnRlbnRfYmxvY2suZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0b29sX3VzZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRCbG9ja3NbdmFsdWUuaW5kZXhdID0gdXNlc0pzb25SZXNwb25zZVRvb2wgPyB7IHR5cGU6IFwidGV4dFwiIH0gOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5jb250ZW50X2Jsb2NrLmlkLFxuICAgICAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB2YWx1ZS5jb250ZW50X2Jsb2NrLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKFxuICAgICAgICAgICAgICAgICAgICAgIHVzZXNKc29uUmVzcG9uc2VUb29sID8geyB0eXBlOiBcInRleHQtc3RhcnRcIiwgaWQ6IFN0cmluZyh2YWx1ZS5pbmRleCkgfSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLmNvbnRlbnRfYmxvY2suaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sTmFtZTogdmFsdWUuY29udGVudF9ibG9jay5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjYXNlIFwic2VydmVyX3Rvb2xfdXNlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmNvbnRlbnRfYmxvY2submFtZSA9PT0gXCJ3ZWJfc2VhcmNoXCIgfHwgdmFsdWUuY29udGVudF9ibG9jay5uYW1lID09PSBcImNvZGVfZXhlY3V0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb250ZW50QmxvY2tzW3ZhbHVlLmluZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5jb250ZW50X2Jsb2NrLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHZhbHVlLmNvbnRlbnRfYmxvY2submFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLmNvbnRlbnRfYmxvY2suaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sTmFtZTogdmFsdWUuY29udGVudF9ibG9jay5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ3ZWJfc2VhcmNoX3Rvb2xfcmVzdWx0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydCA9IHZhbHVlLmNvbnRlbnRfYmxvY2s7XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcnQuY29udGVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC50b29sX3VzZV9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcIndlYl9zZWFyY2hcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogcGFydC5jb250ZW50Lm1hcCgocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiByZXN1bHQudXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXN1bHQudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUFnZTogKF9hMiA9IHJlc3VsdC5wYWdlX2FnZSkgIT0gbnVsbCA/IF9hMiA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5jcnlwdGVkQ29udGVudDogcmVzdWx0LmVuY3J5cHRlZF9jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHJlc3VsdC50eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBwYXJ0LmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVR5cGU6IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBnZW5lcmF0ZUlkMygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHJlc3VsdC51cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXN1bHQudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnRocm9waWM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VBZ2U6IChfYSA9IHJlc3VsdC5wYWdlX2FnZSkgIT0gbnVsbCA/IF9hIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LnRvb2xfdXNlX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwid2ViX3NlYXJjaFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIndlYl9zZWFyY2hfdG9vbF9yZXN1bHRfZXJyb3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBwYXJ0LmNvbnRlbnQuZXJyb3JfY29kZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjYXNlIFwiY29kZV9leGVjdXRpb25fdG9vbF9yZXN1bHRcIjoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0ID0gdmFsdWUuY29udGVudF9ibG9jaztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQuY29udGVudC50eXBlID09PSBcImNvZGVfZXhlY3V0aW9uX3Jlc3VsdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQudG9vbF91c2VfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sTmFtZTogXCJjb2RlX2V4ZWN1dGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnQuY29udGVudC50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdGRvdXQ6IHBhcnQuY29udGVudC5zdGRvdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZGVycjogcGFydC5jb250ZW50LnN0ZGVycixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuX2NvZGU6IHBhcnQuY29udGVudC5yZXR1cm5fY29kZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0LmNvbnRlbnQudHlwZSA9PT0gXCJjb2RlX2V4ZWN1dGlvbl90b29sX3Jlc3VsdF9lcnJvclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQudG9vbF91c2VfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sTmFtZTogXCJjb2RlX2V4ZWN1dGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNvZGVfZXhlY3V0aW9uX3Rvb2xfcmVzdWx0X2Vycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogcGFydC5jb250ZW50LmVycm9yX2NvZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gY29udGVudEJsb2NrVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgIGBVbnN1cHBvcnRlZCBjb250ZW50IGJsb2NrIHR5cGU6ICR7X2V4aGF1c3RpdmVDaGVja31gXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNhc2UgXCJjb250ZW50X2Jsb2NrX3N0b3BcIjoge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50QmxvY2tzW3ZhbHVlLmluZGV4XSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50QmxvY2sgPSBjb250ZW50QmxvY2tzW3ZhbHVlLmluZGV4XTtcbiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29udGVudEJsb2NrLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHQtZW5kXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogU3RyaW5nKHZhbHVlLmluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZWFzb25pbmdcIjoge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1lbmRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBTdHJpbmcodmFsdWUuaW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRvb2wtY2FsbFwiOlxuICAgICAgICAgICAgICAgICAgICAgIGlmICghdXNlc0pzb25SZXNwb25zZVRvb2wpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1lbmRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbnRlbnRCbG9jay50b29sQ2FsbElkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShjb250ZW50QmxvY2spO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb250ZW50QmxvY2tzW3ZhbHVlLmluZGV4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYmxvY2tUeXBlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwiY29udGVudF9ibG9ja19kZWx0YVwiOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsdGFUeXBlID0gdmFsdWUuZGVsdGEudHlwZTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRlbHRhVHlwZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcInRleHRfZGVsdGFcIjoge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXNlc0pzb25SZXNwb25zZVRvb2wpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICAgICAgICBpZDogU3RyaW5nKHZhbHVlLmluZGV4KSxcbiAgICAgICAgICAgICAgICAgICAgICBkZWx0YTogdmFsdWUuZGVsdGEudGV4dFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY2FzZSBcInRoaW5raW5nX2RlbHRhXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1kZWx0YVwiLFxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBTdHJpbmcodmFsdWUuaW5kZXgpLFxuICAgICAgICAgICAgICAgICAgICAgIGRlbHRhOiB2YWx1ZS5kZWx0YS50aGlua2luZ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY2FzZSBcInNpZ25hdHVyZV9kZWx0YVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChibG9ja1R5cGUgPT09IFwidGhpbmtpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1kZWx0YVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFN0cmluZyh2YWx1ZS5pbmRleCksXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWx0YTogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYW50aHJvcGljOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlOiB2YWx1ZS5kZWx0YS5zaWduYXR1cmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbnB1dF9qc29uX2RlbHRhXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudEJsb2NrID0gY29udGVudEJsb2Nrc1t2YWx1ZS5pbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gdmFsdWUuZGVsdGEucGFydGlhbF9qc29uO1xuICAgICAgICAgICAgICAgICAgICBpZiAodXNlc0pzb25SZXNwb25zZVRvb2wpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoKGNvbnRlbnRCbG9jayA9PSBudWxsID8gdm9pZCAwIDogY29udGVudEJsb2NrLnR5cGUpICE9PSBcInRleHRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogU3RyaW5nKHZhbHVlLmluZGV4KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKChjb250ZW50QmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbnRlbnRCbG9jay50eXBlKSAhPT0gXCJ0b29sLWNhbGxcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogY29udGVudEJsb2NrLnRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWx0YVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRCbG9jay5pbnB1dCArPSBkZWx0YTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjYXNlIFwiY2l0YXRpb25zX2RlbHRhXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2l0YXRpb24gPSB2YWx1ZS5kZWx0YS5jaXRhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0NpdGF0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgIGNpdGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgIGNpdGF0aW9uRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlSWQzLFxuICAgICAgICAgICAgICAgICAgICAgIChzb3VyY2UpID0+IGNvbnRyb2xsZXIuZW5xdWV1ZShzb3VyY2UpXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IGRlbHRhVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgIGBVbnN1cHBvcnRlZCBkZWx0YSB0eXBlOiAke19leGhhdXN0aXZlQ2hlY2t9YFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwibWVzc2FnZV9zdGFydFwiOiB7XG4gICAgICAgICAgICAgICAgdXNhZ2UuaW5wdXRUb2tlbnMgPSB2YWx1ZS5tZXNzYWdlLnVzYWdlLmlucHV0X3Rva2VucztcbiAgICAgICAgICAgICAgICB1c2FnZS5jYWNoZWRJbnB1dFRva2VucyA9IChfYiA9IHZhbHVlLm1lc3NhZ2UudXNhZ2UuY2FjaGVfcmVhZF9pbnB1dF90b2tlbnMpICE9IG51bGwgPyBfYiA6IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgYW50aHJvcGljOiB7XG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB2YWx1ZS5tZXNzYWdlLnVzYWdlLFxuICAgICAgICAgICAgICAgICAgICBjYWNoZUNyZWF0aW9uSW5wdXRUb2tlbnM6IChfYyA9IHZhbHVlLm1lc3NhZ2UudXNhZ2UuY2FjaGVfY3JlYXRpb25faW5wdXRfdG9rZW5zKSAhPSBudWxsID8gX2MgOiBudWxsXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZXNwb25zZS1tZXRhZGF0YVwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IChfZCA9IHZhbHVlLm1lc3NhZ2UuaWQpICE9IG51bGwgPyBfZCA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICAgIG1vZGVsSWQ6IChfZSA9IHZhbHVlLm1lc3NhZ2UubW9kZWwpICE9IG51bGwgPyBfZSA6IHZvaWQgMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwibWVzc2FnZV9kZWx0YVwiOiB7XG4gICAgICAgICAgICAgICAgdXNhZ2Uub3V0cHV0VG9rZW5zID0gdmFsdWUudXNhZ2Uub3V0cHV0X3Rva2VucztcbiAgICAgICAgICAgICAgICB1c2FnZS50b3RhbFRva2VucyA9ICgoX2YgPSB1c2FnZS5pbnB1dFRva2VucykgIT0gbnVsbCA/IF9mIDogMCkgKyAoKF9nID0gdmFsdWUudXNhZ2Uub3V0cHV0X3Rva2VucykgIT0gbnVsbCA/IF9nIDogMCk7XG4gICAgICAgICAgICAgICAgZmluaXNoUmVhc29uID0gbWFwQW50aHJvcGljU3RvcFJlYXNvbih7XG4gICAgICAgICAgICAgICAgICBmaW5pc2hSZWFzb246IHZhbHVlLmRlbHRhLnN0b3BfcmVhc29uLFxuICAgICAgICAgICAgICAgICAgaXNKc29uUmVzcG9uc2VGcm9tVG9vbDogdXNlc0pzb25SZXNwb25zZVRvb2xcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2FzZSBcIm1lc3NhZ2Vfc3RvcFwiOiB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmluaXNoXCIsXG4gICAgICAgICAgICAgICAgICBmaW5pc2hSZWFzb24sXG4gICAgICAgICAgICAgICAgICB1c2FnZSxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2FzZSBcImVycm9yXCI6IHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcImVycm9yXCIsIGVycm9yOiB2YWx1ZS5lcnJvciB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGNvbnN0IF9leGhhdXN0aXZlQ2hlY2sgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGNodW5rIHR5cGU6ICR7X2V4aGF1c3RpdmVDaGVja31gKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICByZXF1ZXN0OiB7IGJvZHkgfSxcbiAgICAgIHJlc3BvbnNlOiB7IGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyB9XG4gICAgfTtcbiAgfVxufTtcbnZhciBhbnRocm9waWNNZXNzYWdlc1Jlc3BvbnNlU2NoZW1hID0gejUub2JqZWN0KHtcbiAgdHlwZTogejUubGl0ZXJhbChcIm1lc3NhZ2VcIiksXG4gIGlkOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gIG1vZGVsOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gIGNvbnRlbnQ6IHo1LmFycmF5KFxuICAgIHo1LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejUubGl0ZXJhbChcInRleHRcIiksXG4gICAgICAgIHRleHQ6IHo1LnN0cmluZygpLFxuICAgICAgICBjaXRhdGlvbnM6IHo1LmFycmF5KGNpdGF0aW9uU2NoZW1hKS5vcHRpb25hbCgpXG4gICAgICB9KSxcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJ0aGlua2luZ1wiKSxcbiAgICAgICAgdGhpbmtpbmc6IHo1LnN0cmluZygpLFxuICAgICAgICBzaWduYXR1cmU6IHo1LnN0cmluZygpXG4gICAgICB9KSxcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJyZWRhY3RlZF90aGlua2luZ1wiKSxcbiAgICAgICAgZGF0YTogejUuc3RyaW5nKClcbiAgICAgIH0pLFxuICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejUubGl0ZXJhbChcInRvb2xfdXNlXCIpLFxuICAgICAgICBpZDogejUuc3RyaW5nKCksXG4gICAgICAgIG5hbWU6IHo1LnN0cmluZygpLFxuICAgICAgICBpbnB1dDogejUudW5rbm93bigpXG4gICAgICB9KSxcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJzZXJ2ZXJfdG9vbF91c2VcIiksXG4gICAgICAgIGlkOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgbmFtZTogejUuc3RyaW5nKCksXG4gICAgICAgIGlucHV0OiB6NS5yZWNvcmQoejUuc3RyaW5nKCksIHo1LnVua25vd24oKSkubnVsbGlzaCgpXG4gICAgICB9KSxcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJ3ZWJfc2VhcmNoX3Rvb2xfcmVzdWx0XCIpLFxuICAgICAgICB0b29sX3VzZV9pZDogejUuc3RyaW5nKCksXG4gICAgICAgIGNvbnRlbnQ6IHo1LnVuaW9uKFtcbiAgICAgICAgICB6NS5hcnJheShcbiAgICAgICAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJ3ZWJfc2VhcmNoX3Jlc3VsdFwiKSxcbiAgICAgICAgICAgICAgdXJsOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgdGl0bGU6IHo1LnN0cmluZygpLFxuICAgICAgICAgICAgICBlbmNyeXB0ZWRfY29udGVudDogejUuc3RyaW5nKCksXG4gICAgICAgICAgICAgIHBhZ2VfYWdlOiB6NS5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKSxcbiAgICAgICAgICB6NS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejUubGl0ZXJhbChcIndlYl9zZWFyY2hfdG9vbF9yZXN1bHRfZXJyb3JcIiksXG4gICAgICAgICAgICBlcnJvcl9jb2RlOiB6NS5zdHJpbmcoKVxuICAgICAgICAgIH0pXG4gICAgICAgIF0pXG4gICAgICB9KSxcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJjb2RlX2V4ZWN1dGlvbl90b29sX3Jlc3VsdFwiKSxcbiAgICAgICAgdG9vbF91c2VfaWQ6IHo1LnN0cmluZygpLFxuICAgICAgICBjb250ZW50OiB6NS51bmlvbihbXG4gICAgICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJjb2RlX2V4ZWN1dGlvbl9yZXN1bHRcIiksXG4gICAgICAgICAgICBzdGRvdXQ6IHo1LnN0cmluZygpLFxuICAgICAgICAgICAgc3RkZXJyOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHJldHVybl9jb2RlOiB6NS5udW1iZXIoKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwiY29kZV9leGVjdXRpb25fdG9vbF9yZXN1bHRfZXJyb3JcIiksXG4gICAgICAgICAgICBlcnJvcl9jb2RlOiB6NS5zdHJpbmcoKVxuICAgICAgICAgIH0pXG4gICAgICAgIF0pXG4gICAgICB9KVxuICAgIF0pXG4gICksXG4gIHN0b3BfcmVhc29uOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gIHVzYWdlOiB6NS5sb29zZU9iamVjdCh7XG4gICAgaW5wdXRfdG9rZW5zOiB6NS5udW1iZXIoKSxcbiAgICBvdXRwdXRfdG9rZW5zOiB6NS5udW1iZXIoKSxcbiAgICBjYWNoZV9jcmVhdGlvbl9pbnB1dF90b2tlbnM6IHo1Lm51bWJlcigpLm51bGxpc2goKSxcbiAgICBjYWNoZV9yZWFkX2lucHV0X3Rva2VuczogejUubnVtYmVyKCkubnVsbGlzaCgpXG4gIH0pXG59KTtcbnZhciBhbnRocm9waWNNZXNzYWdlc0NodW5rU2NoZW1hID0gejUuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gIHo1Lm9iamVjdCh7XG4gICAgdHlwZTogejUubGl0ZXJhbChcIm1lc3NhZ2Vfc3RhcnRcIiksXG4gICAgbWVzc2FnZTogejUub2JqZWN0KHtcbiAgICAgIGlkOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICBtb2RlbDogejUuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgdXNhZ2U6IHo1Lmxvb3NlT2JqZWN0KHtcbiAgICAgICAgaW5wdXRfdG9rZW5zOiB6NS5udW1iZXIoKSxcbiAgICAgICAgb3V0cHV0X3Rva2VuczogejUubnVtYmVyKCksXG4gICAgICAgIGNhY2hlX2NyZWF0aW9uX2lucHV0X3Rva2VuczogejUubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgICBjYWNoZV9yZWFkX2lucHV0X3Rva2VuczogejUubnVtYmVyKCkubnVsbGlzaCgpXG4gICAgICB9KVxuICAgIH0pXG4gIH0pLFxuICB6NS5vYmplY3Qoe1xuICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJjb250ZW50X2Jsb2NrX3N0YXJ0XCIpLFxuICAgIGluZGV4OiB6NS5udW1iZXIoKSxcbiAgICBjb250ZW50X2Jsb2NrOiB6NS5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJ0ZXh0XCIpLFxuICAgICAgICB0ZXh0OiB6NS5zdHJpbmcoKVxuICAgICAgfSksXG4gICAgICB6NS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwidGhpbmtpbmdcIiksXG4gICAgICAgIHRoaW5raW5nOiB6NS5zdHJpbmcoKVxuICAgICAgfSksXG4gICAgICB6NS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwidG9vbF91c2VcIiksXG4gICAgICAgIGlkOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgbmFtZTogejUuc3RyaW5nKClcbiAgICAgIH0pLFxuICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejUubGl0ZXJhbChcInJlZGFjdGVkX3RoaW5raW5nXCIpLFxuICAgICAgICBkYXRhOiB6NS5zdHJpbmcoKVxuICAgICAgfSksXG4gICAgICB6NS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwic2VydmVyX3Rvb2xfdXNlXCIpLFxuICAgICAgICBpZDogejUuc3RyaW5nKCksXG4gICAgICAgIG5hbWU6IHo1LnN0cmluZygpLFxuICAgICAgICBpbnB1dDogejUucmVjb3JkKHo1LnN0cmluZygpLCB6NS51bmtub3duKCkpLm51bGxpc2goKVxuICAgICAgfSksXG4gICAgICB6NS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwid2ViX3NlYXJjaF90b29sX3Jlc3VsdFwiKSxcbiAgICAgICAgdG9vbF91c2VfaWQ6IHo1LnN0cmluZygpLFxuICAgICAgICBjb250ZW50OiB6NS51bmlvbihbXG4gICAgICAgICAgejUuYXJyYXkoXG4gICAgICAgICAgICB6NS5vYmplY3Qoe1xuICAgICAgICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwid2ViX3NlYXJjaF9yZXN1bHRcIiksXG4gICAgICAgICAgICAgIHVybDogejUuc3RyaW5nKCksXG4gICAgICAgICAgICAgIHRpdGxlOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgZW5jcnlwdGVkX2NvbnRlbnQ6IHo1LnN0cmluZygpLFxuICAgICAgICAgICAgICBwYWdlX2FnZTogejUuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICksXG4gICAgICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJ3ZWJfc2VhcmNoX3Rvb2xfcmVzdWx0X2Vycm9yXCIpLFxuICAgICAgICAgICAgZXJyb3JfY29kZTogejUuc3RyaW5nKClcbiAgICAgICAgICB9KVxuICAgICAgICBdKVxuICAgICAgfSksXG4gICAgICB6NS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwiY29kZV9leGVjdXRpb25fdG9vbF9yZXN1bHRcIiksXG4gICAgICAgIHRvb2xfdXNlX2lkOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgY29udGVudDogejUudW5pb24oW1xuICAgICAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwiY29kZV9leGVjdXRpb25fcmVzdWx0XCIpLFxuICAgICAgICAgICAgc3Rkb3V0OiB6NS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHN0ZGVycjogejUuc3RyaW5nKCksXG4gICAgICAgICAgICByZXR1cm5fY29kZTogejUubnVtYmVyKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6NS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejUubGl0ZXJhbChcImNvZGVfZXhlY3V0aW9uX3Rvb2xfcmVzdWx0X2Vycm9yXCIpLFxuICAgICAgICAgICAgZXJyb3JfY29kZTogejUuc3RyaW5nKClcbiAgICAgICAgICB9KVxuICAgICAgICBdKVxuICAgICAgfSlcbiAgICBdKVxuICB9KSxcbiAgejUub2JqZWN0KHtcbiAgICB0eXBlOiB6NS5saXRlcmFsKFwiY29udGVudF9ibG9ja19kZWx0YVwiKSxcbiAgICBpbmRleDogejUubnVtYmVyKCksXG4gICAgZGVsdGE6IHo1LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejUubGl0ZXJhbChcImlucHV0X2pzb25fZGVsdGFcIiksXG4gICAgICAgIHBhcnRpYWxfanNvbjogejUuc3RyaW5nKClcbiAgICAgIH0pLFxuICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejUubGl0ZXJhbChcInRleHRfZGVsdGFcIiksXG4gICAgICAgIHRleHQ6IHo1LnN0cmluZygpXG4gICAgICB9KSxcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJ0aGlua2luZ19kZWx0YVwiKSxcbiAgICAgICAgdGhpbmtpbmc6IHo1LnN0cmluZygpXG4gICAgICB9KSxcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJzaWduYXR1cmVfZGVsdGFcIiksXG4gICAgICAgIHNpZ25hdHVyZTogejUuc3RyaW5nKClcbiAgICAgIH0pLFxuICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejUubGl0ZXJhbChcImNpdGF0aW9uc19kZWx0YVwiKSxcbiAgICAgICAgY2l0YXRpb246IGNpdGF0aW9uU2NoZW1hXG4gICAgICB9KVxuICAgIF0pXG4gIH0pLFxuICB6NS5vYmplY3Qoe1xuICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJjb250ZW50X2Jsb2NrX3N0b3BcIiksXG4gICAgaW5kZXg6IHo1Lm51bWJlcigpXG4gIH0pLFxuICB6NS5vYmplY3Qoe1xuICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJlcnJvclwiKSxcbiAgICBlcnJvcjogejUub2JqZWN0KHtcbiAgICAgIHR5cGU6IHo1LnN0cmluZygpLFxuICAgICAgbWVzc2FnZTogejUuc3RyaW5nKClcbiAgICB9KVxuICB9KSxcbiAgejUub2JqZWN0KHtcbiAgICB0eXBlOiB6NS5saXRlcmFsKFwibWVzc2FnZV9kZWx0YVwiKSxcbiAgICBkZWx0YTogejUub2JqZWN0KHsgc3RvcF9yZWFzb246IHo1LnN0cmluZygpLm51bGxpc2goKSB9KSxcbiAgICB1c2FnZTogejUub2JqZWN0KHsgb3V0cHV0X3Rva2VuczogejUubnVtYmVyKCkgfSlcbiAgfSksXG4gIHo1Lm9iamVjdCh7XG4gICAgdHlwZTogejUubGl0ZXJhbChcIm1lc3NhZ2Vfc3RvcFwiKVxuICB9KSxcbiAgejUub2JqZWN0KHtcbiAgICB0eXBlOiB6NS5saXRlcmFsKFwicGluZ1wiKVxuICB9KVxuXSk7XG52YXIgYW50aHJvcGljUmVhc29uaW5nTWV0YWRhdGFTY2hlbWEgPSB6NS5vYmplY3Qoe1xuICBzaWduYXR1cmU6IHo1LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHJlZGFjdGVkRGF0YTogejUuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG5cbi8vIHNyYy90b29sL2Jhc2hfMjAyNDEwMjIudHNcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5IH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB6NiBmcm9tIFwiem9kL3Y0XCI7XG52YXIgYmFzaF8yMDI0MTAyMiA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5KHtcbiAgaWQ6IFwiYW50aHJvcGljLmJhc2hfMjAyNDEwMjJcIixcbiAgbmFtZTogXCJiYXNoXCIsXG4gIGlucHV0U2NoZW1hOiB6Ni5vYmplY3Qoe1xuICAgIGNvbW1hbmQ6IHo2LnN0cmluZygpLFxuICAgIHJlc3RhcnQ6IHo2LmJvb2xlYW4oKS5vcHRpb25hbCgpXG4gIH0pXG59KTtcblxuLy8gc3JjL3Rvb2wvYmFzaF8yMDI1MDEyNC50c1xuaW1wb3J0IHsgY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnkgYXMgY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnkyIH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB6NyBmcm9tIFwiem9kL3Y0XCI7XG52YXIgYmFzaF8yMDI1MDEyNCA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5Mih7XG4gIGlkOiBcImFudGhyb3BpYy5iYXNoXzIwMjUwMTI0XCIsXG4gIG5hbWU6IFwiYmFzaFwiLFxuICBpbnB1dFNjaGVtYTogejcub2JqZWN0KHtcbiAgICBjb21tYW5kOiB6Ny5zdHJpbmcoKSxcbiAgICByZXN0YXJ0OiB6Ny5ib29sZWFuKCkub3B0aW9uYWwoKVxuICB9KVxufSk7XG5cbi8vIHNyYy90b29sL2NvbXB1dGVyXzIwMjQxMDIyLnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeTMgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6OCB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBjb21wdXRlcl8yMDI0MTAyMiA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5Myh7XG4gIGlkOiBcImFudGhyb3BpYy5jb21wdXRlcl8yMDI0MTAyMlwiLFxuICBuYW1lOiBcImNvbXB1dGVyXCIsXG4gIGlucHV0U2NoZW1hOiB6OC5vYmplY3Qoe1xuICAgIGFjdGlvbjogejguZW51bShbXG4gICAgICBcImtleVwiLFxuICAgICAgXCJ0eXBlXCIsXG4gICAgICBcIm1vdXNlX21vdmVcIixcbiAgICAgIFwibGVmdF9jbGlja1wiLFxuICAgICAgXCJsZWZ0X2NsaWNrX2RyYWdcIixcbiAgICAgIFwicmlnaHRfY2xpY2tcIixcbiAgICAgIFwibWlkZGxlX2NsaWNrXCIsXG4gICAgICBcImRvdWJsZV9jbGlja1wiLFxuICAgICAgXCJzY3JlZW5zaG90XCIsXG4gICAgICBcImN1cnNvcl9wb3NpdGlvblwiXG4gICAgXSksXG4gICAgY29vcmRpbmF0ZTogejguYXJyYXkoejgubnVtYmVyKCkuaW50KCkpLm9wdGlvbmFsKCksXG4gICAgdGV4dDogejguc3RyaW5nKCkub3B0aW9uYWwoKVxuICB9KVxufSk7XG5cbi8vIHNyYy90b29sL2NvbXB1dGVyXzIwMjUwMTI0LnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeTQgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6OSB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBjb21wdXRlcl8yMDI1MDEyNCA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5NCh7XG4gIGlkOiBcImFudGhyb3BpYy5jb21wdXRlcl8yMDI1MDEyNFwiLFxuICBuYW1lOiBcImNvbXB1dGVyXCIsXG4gIGlucHV0U2NoZW1hOiB6OS5vYmplY3Qoe1xuICAgIGFjdGlvbjogejkuZW51bShbXG4gICAgICBcImtleVwiLFxuICAgICAgXCJob2xkX2tleVwiLFxuICAgICAgXCJ0eXBlXCIsXG4gICAgICBcImN1cnNvcl9wb3NpdGlvblwiLFxuICAgICAgXCJtb3VzZV9tb3ZlXCIsXG4gICAgICBcImxlZnRfbW91c2VfZG93blwiLFxuICAgICAgXCJsZWZ0X21vdXNlX3VwXCIsXG4gICAgICBcImxlZnRfY2xpY2tcIixcbiAgICAgIFwibGVmdF9jbGlja19kcmFnXCIsXG4gICAgICBcInJpZ2h0X2NsaWNrXCIsXG4gICAgICBcIm1pZGRsZV9jbGlja1wiLFxuICAgICAgXCJkb3VibGVfY2xpY2tcIixcbiAgICAgIFwidHJpcGxlX2NsaWNrXCIsXG4gICAgICBcInNjcm9sbFwiLFxuICAgICAgXCJ3YWl0XCIsXG4gICAgICBcInNjcmVlbnNob3RcIlxuICAgIF0pLFxuICAgIGNvb3JkaW5hdGU6IHo5LnR1cGxlKFt6OS5udW1iZXIoKS5pbnQoKSwgejkubnVtYmVyKCkuaW50KCldKS5vcHRpb25hbCgpLFxuICAgIGR1cmF0aW9uOiB6OS5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIHNjcm9sbF9hbW91bnQ6IHo5Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgc2Nyb2xsX2RpcmVjdGlvbjogejkuZW51bShbXCJ1cFwiLCBcImRvd25cIiwgXCJsZWZ0XCIsIFwicmlnaHRcIl0pLm9wdGlvbmFsKCksXG4gICAgc3RhcnRfY29vcmRpbmF0ZTogejkudHVwbGUoW3o5Lm51bWJlcigpLmludCgpLCB6OS5udW1iZXIoKS5pbnQoKV0pLm9wdGlvbmFsKCksXG4gICAgdGV4dDogejkuc3RyaW5nKCkub3B0aW9uYWwoKVxuICB9KVxufSk7XG5cbi8vIHNyYy90b29sL3RleHQtZWRpdG9yXzIwMjQxMDIyLnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeTUgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTAgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgdGV4dEVkaXRvcl8yMDI0MTAyMiA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5NSh7XG4gIGlkOiBcImFudGhyb3BpYy50ZXh0X2VkaXRvcl8yMDI0MTAyMlwiLFxuICBuYW1lOiBcInN0cl9yZXBsYWNlX2VkaXRvclwiLFxuICBpbnB1dFNjaGVtYTogejEwLm9iamVjdCh7XG4gICAgY29tbWFuZDogejEwLmVudW0oW1widmlld1wiLCBcImNyZWF0ZVwiLCBcInN0cl9yZXBsYWNlXCIsIFwiaW5zZXJ0XCIsIFwidW5kb19lZGl0XCJdKSxcbiAgICBwYXRoOiB6MTAuc3RyaW5nKCksXG4gICAgZmlsZV90ZXh0OiB6MTAuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpbnNlcnRfbGluZTogejEwLm51bWJlcigpLmludCgpLm9wdGlvbmFsKCksXG4gICAgbmV3X3N0cjogejEwLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgb2xkX3N0cjogejEwLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdmlld19yYW5nZTogejEwLmFycmF5KHoxMC5udW1iZXIoKS5pbnQoKSkub3B0aW9uYWwoKVxuICB9KVxufSk7XG5cbi8vIHNyYy90b29sL3RleHQtZWRpdG9yXzIwMjUwMTI0LnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeTYgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTEgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgdGV4dEVkaXRvcl8yMDI1MDEyNCA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5Nih7XG4gIGlkOiBcImFudGhyb3BpYy50ZXh0X2VkaXRvcl8yMDI1MDEyNFwiLFxuICBuYW1lOiBcInN0cl9yZXBsYWNlX2VkaXRvclwiLFxuICBpbnB1dFNjaGVtYTogejExLm9iamVjdCh7XG4gICAgY29tbWFuZDogejExLmVudW0oW1widmlld1wiLCBcImNyZWF0ZVwiLCBcInN0cl9yZXBsYWNlXCIsIFwiaW5zZXJ0XCIsIFwidW5kb19lZGl0XCJdKSxcbiAgICBwYXRoOiB6MTEuc3RyaW5nKCksXG4gICAgZmlsZV90ZXh0OiB6MTEuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpbnNlcnRfbGluZTogejExLm51bWJlcigpLmludCgpLm9wdGlvbmFsKCksXG4gICAgbmV3X3N0cjogejExLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgb2xkX3N0cjogejExLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdmlld19yYW5nZTogejExLmFycmF5KHoxMS5udW1iZXIoKS5pbnQoKSkub3B0aW9uYWwoKVxuICB9KVxufSk7XG5cbi8vIHNyYy90b29sL3RleHQtZWRpdG9yXzIwMjUwNDI5LnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeTcgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTIgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgdGV4dEVkaXRvcl8yMDI1MDQyOSA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5Nyh7XG4gIGlkOiBcImFudGhyb3BpYy50ZXh0X2VkaXRvcl8yMDI1MDQyOVwiLFxuICBuYW1lOiBcInN0cl9yZXBsYWNlX2Jhc2VkX2VkaXRfdG9vbFwiLFxuICBpbnB1dFNjaGVtYTogejEyLm9iamVjdCh7XG4gICAgY29tbWFuZDogejEyLmVudW0oW1widmlld1wiLCBcImNyZWF0ZVwiLCBcInN0cl9yZXBsYWNlXCIsIFwiaW5zZXJ0XCJdKSxcbiAgICBwYXRoOiB6MTIuc3RyaW5nKCksXG4gICAgZmlsZV90ZXh0OiB6MTIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpbnNlcnRfbGluZTogejEyLm51bWJlcigpLmludCgpLm9wdGlvbmFsKCksXG4gICAgbmV3X3N0cjogejEyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgb2xkX3N0cjogejEyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdmlld19yYW5nZTogejEyLmFycmF5KHoxMi5udW1iZXIoKS5pbnQoKSkub3B0aW9uYWwoKVxuICB9KVxufSk7XG5cbi8vIHNyYy9hbnRocm9waWMtdG9vbHMudHNcbnZhciBhbnRocm9waWNUb29scyA9IHtcbiAgLyoqXG4gICAqIFRoZSBiYXNoIHRvb2wgZW5hYmxlcyBDbGF1ZGUgdG8gZXhlY3V0ZSBzaGVsbCBjb21tYW5kcyBpbiBhIHBlcnNpc3RlbnQgYmFzaCBzZXNzaW9uLFxuICAgKiBhbGxvd2luZyBzeXN0ZW0gb3BlcmF0aW9ucywgc2NyaXB0IGV4ZWN1dGlvbiwgYW5kIGNvbW1hbmQtbGluZSBhdXRvbWF0aW9uLlxuICAgKlxuICAgKiBJbWFnZSByZXN1bHRzIGFyZSBzdXBwb3J0ZWQuXG4gICAqXG4gICAqIFRvb2wgbmFtZSBtdXN0IGJlIGBiYXNoYC5cbiAgICovXG4gIGJhc2hfMjAyNDEwMjIsXG4gIC8qKlxuICAgKiBUaGUgYmFzaCB0b29sIGVuYWJsZXMgQ2xhdWRlIHRvIGV4ZWN1dGUgc2hlbGwgY29tbWFuZHMgaW4gYSBwZXJzaXN0ZW50IGJhc2ggc2Vzc2lvbixcbiAgICogYWxsb3dpbmcgc3lzdGVtIG9wZXJhdGlvbnMsIHNjcmlwdCBleGVjdXRpb24sIGFuZCBjb21tYW5kLWxpbmUgYXV0b21hdGlvbi5cbiAgICpcbiAgICogSW1hZ2UgcmVzdWx0cyBhcmUgc3VwcG9ydGVkLlxuICAgKlxuICAgKiBUb29sIG5hbWUgbXVzdCBiZSBgYmFzaGAuXG4gICAqL1xuICBiYXNoXzIwMjUwMTI0LFxuICAvKipcbiAgICogQ2xhdWRlIGNhbiBhbmFseXplIGRhdGEsIGNyZWF0ZSB2aXN1YWxpemF0aW9ucywgcGVyZm9ybSBjb21wbGV4IGNhbGN1bGF0aW9ucyxcbiAgICogcnVuIHN5c3RlbSBjb21tYW5kcywgY3JlYXRlIGFuZCBlZGl0IGZpbGVzLCBhbmQgcHJvY2VzcyB1cGxvYWRlZCBmaWxlcyBkaXJlY3RseSB3aXRoaW5cbiAgICogdGhlIEFQSSBjb252ZXJzYXRpb24uXG4gICAqXG4gICAqIFRoZSBjb2RlIGV4ZWN1dGlvbiB0b29sIGFsbG93cyBDbGF1ZGUgdG8gcnVuIEJhc2ggY29tbWFuZHMgYW5kIG1hbmlwdWxhdGUgZmlsZXMsXG4gICAqIGluY2x1ZGluZyB3cml0aW5nIGNvZGUsIGluIGEgc2VjdXJlLCBzYW5kYm94ZWQgZW52aXJvbm1lbnQuXG4gICAqXG4gICAqIFRvb2wgbmFtZSBtdXN0IGJlIGBjb2RlX2V4ZWN1dGlvbmAuXG4gICAqL1xuICBjb2RlRXhlY3V0aW9uXzIwMjUwNTIyLFxuICAvKipcbiAgICogQ2xhdWRlIGNhbiBpbnRlcmFjdCB3aXRoIGNvbXB1dGVyIGVudmlyb25tZW50cyB0aHJvdWdoIHRoZSBjb21wdXRlciB1c2UgdG9vbCwgd2hpY2hcbiAgICogcHJvdmlkZXMgc2NyZWVuc2hvdCBjYXBhYmlsaXRpZXMgYW5kIG1vdXNlL2tleWJvYXJkIGNvbnRyb2wgZm9yIGF1dG9ub21vdXMgZGVza3RvcCBpbnRlcmFjdGlvbi5cbiAgICpcbiAgICogSW1hZ2UgcmVzdWx0cyBhcmUgc3VwcG9ydGVkLlxuICAgKlxuICAgKiBUb29sIG5hbWUgbXVzdCBiZSBgY29tcHV0ZXJgLlxuICAgKlxuICAgKiBAcGFyYW0gZGlzcGxheVdpZHRoUHggLSBUaGUgd2lkdGggb2YgdGhlIGRpc3BsYXkgYmVpbmcgY29udHJvbGxlZCBieSB0aGUgbW9kZWwgaW4gcGl4ZWxzLlxuICAgKiBAcGFyYW0gZGlzcGxheUhlaWdodFB4IC0gVGhlIGhlaWdodCBvZiB0aGUgZGlzcGxheSBiZWluZyBjb250cm9sbGVkIGJ5IHRoZSBtb2RlbCBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSBkaXNwbGF5TnVtYmVyIC0gVGhlIGRpc3BsYXkgbnVtYmVyIHRvIGNvbnRyb2wgKG9ubHkgcmVsZXZhbnQgZm9yIFgxMSBlbnZpcm9ubWVudHMpLiBJZiBzcGVjaWZpZWQsIHRoZSB0b29sIHdpbGwgYmUgcHJvdmlkZWQgYSBkaXNwbGF5IG51bWJlciBpbiB0aGUgdG9vbCBkZWZpbml0aW9uLlxuICAgKi9cbiAgY29tcHV0ZXJfMjAyNDEwMjIsXG4gIC8qKlxuICAgKiBDbGF1ZGUgY2FuIGludGVyYWN0IHdpdGggY29tcHV0ZXIgZW52aXJvbm1lbnRzIHRocm91Z2ggdGhlIGNvbXB1dGVyIHVzZSB0b29sLCB3aGljaFxuICAgKiBwcm92aWRlcyBzY3JlZW5zaG90IGNhcGFiaWxpdGllcyBhbmQgbW91c2Uva2V5Ym9hcmQgY29udHJvbCBmb3IgYXV0b25vbW91cyBkZXNrdG9wIGludGVyYWN0aW9uLlxuICAgKlxuICAgKiBJbWFnZSByZXN1bHRzIGFyZSBzdXBwb3J0ZWQuXG4gICAqXG4gICAqIFRvb2wgbmFtZSBtdXN0IGJlIGBjb21wdXRlcmAuXG4gICAqXG4gICAqIEBwYXJhbSBkaXNwbGF5V2lkdGhQeCAtIFRoZSB3aWR0aCBvZiB0aGUgZGlzcGxheSBiZWluZyBjb250cm9sbGVkIGJ5IHRoZSBtb2RlbCBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSBkaXNwbGF5SGVpZ2h0UHggLSBUaGUgaGVpZ2h0IG9mIHRoZSBkaXNwbGF5IGJlaW5nIGNvbnRyb2xsZWQgYnkgdGhlIG1vZGVsIGluIHBpeGVscy5cbiAgICogQHBhcmFtIGRpc3BsYXlOdW1iZXIgLSBUaGUgZGlzcGxheSBudW1iZXIgdG8gY29udHJvbCAob25seSByZWxldmFudCBmb3IgWDExIGVudmlyb25tZW50cykuIElmIHNwZWNpZmllZCwgdGhlIHRvb2wgd2lsbCBiZSBwcm92aWRlZCBhIGRpc3BsYXkgbnVtYmVyIGluIHRoZSB0b29sIGRlZmluaXRpb24uXG4gICAqL1xuICBjb21wdXRlcl8yMDI1MDEyNCxcbiAgLyoqXG4gICAqIENsYXVkZSBjYW4gdXNlIGFuIEFudGhyb3BpYy1kZWZpbmVkIHRleHQgZWRpdG9yIHRvb2wgdG8gdmlldyBhbmQgbW9kaWZ5IHRleHQgZmlsZXMsXG4gICAqIGhlbHBpbmcgeW91IGRlYnVnLCBmaXgsIGFuZCBpbXByb3ZlIHlvdXIgY29kZSBvciBvdGhlciB0ZXh0IGRvY3VtZW50cy4gVGhpcyBhbGxvd3MgQ2xhdWRlXG4gICAqIHRvIGRpcmVjdGx5IGludGVyYWN0IHdpdGggeW91ciBmaWxlcywgcHJvdmlkaW5nIGhhbmRzLW9uIGFzc2lzdGFuY2UgcmF0aGVyIHRoYW4ganVzdCBzdWdnZXN0aW5nIGNoYW5nZXMuXG4gICAqXG4gICAqIFRvb2wgbmFtZSBtdXN0IGJlIGBzdHJfcmVwbGFjZV9lZGl0b3JgLlxuICAgKi9cbiAgdGV4dEVkaXRvcl8yMDI0MTAyMixcbiAgLyoqXG4gICAqIENsYXVkZSBjYW4gdXNlIGFuIEFudGhyb3BpYy1kZWZpbmVkIHRleHQgZWRpdG9yIHRvb2wgdG8gdmlldyBhbmQgbW9kaWZ5IHRleHQgZmlsZXMsXG4gICAqIGhlbHBpbmcgeW91IGRlYnVnLCBmaXgsIGFuZCBpbXByb3ZlIHlvdXIgY29kZSBvciBvdGhlciB0ZXh0IGRvY3VtZW50cy4gVGhpcyBhbGxvd3MgQ2xhdWRlXG4gICAqIHRvIGRpcmVjdGx5IGludGVyYWN0IHdpdGggeW91ciBmaWxlcywgcHJvdmlkaW5nIGhhbmRzLW9uIGFzc2lzdGFuY2UgcmF0aGVyIHRoYW4ganVzdCBzdWdnZXN0aW5nIGNoYW5nZXMuXG4gICAqXG4gICAqIFRvb2wgbmFtZSBtdXN0IGJlIGBzdHJfcmVwbGFjZV9lZGl0b3JgLlxuICAgKi9cbiAgdGV4dEVkaXRvcl8yMDI1MDEyNCxcbiAgLyoqXG4gICAqIENsYXVkZSBjYW4gdXNlIGFuIEFudGhyb3BpYy1kZWZpbmVkIHRleHQgZWRpdG9yIHRvb2wgdG8gdmlldyBhbmQgbW9kaWZ5IHRleHQgZmlsZXMsXG4gICAqIGhlbHBpbmcgeW91IGRlYnVnLCBmaXgsIGFuZCBpbXByb3ZlIHlvdXIgY29kZSBvciBvdGhlciB0ZXh0IGRvY3VtZW50cy4gVGhpcyBhbGxvd3MgQ2xhdWRlXG4gICAqIHRvIGRpcmVjdGx5IGludGVyYWN0IHdpdGggeW91ciBmaWxlcywgcHJvdmlkaW5nIGhhbmRzLW9uIGFzc2lzdGFuY2UgcmF0aGVyIHRoYW4ganVzdCBzdWdnZXN0aW5nIGNoYW5nZXMuXG4gICAqXG4gICAqIE5vdGU6IFRoaXMgdmVyc2lvbiBkb2VzIG5vdCBzdXBwb3J0IHRoZSBcInVuZG9fZWRpdFwiIGNvbW1hbmQuXG4gICAqXG4gICAqIFRvb2wgbmFtZSBtdXN0IGJlIGBzdHJfcmVwbGFjZV9iYXNlZF9lZGl0X3Rvb2xgLlxuICAgKi9cbiAgdGV4dEVkaXRvcl8yMDI1MDQyOSxcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB3ZWIgc2VhcmNoIHRvb2wgdGhhdCBnaXZlcyBDbGF1ZGUgZGlyZWN0IGFjY2VzcyB0byByZWFsLXRpbWUgd2ViIGNvbnRlbnQuXG4gICAqXG4gICAqIFRvb2wgbmFtZSBtdXN0IGJlIGB3ZWJfc2VhcmNoYC5cbiAgICpcbiAgICogQHBhcmFtIG1heFVzZXMgLSBNYXhpbXVtIG51bWJlciBvZiB3ZWIgc2VhcmNoZXMgQ2xhdWRlIGNhbiBwZXJmb3JtIGR1cmluZyB0aGUgY29udmVyc2F0aW9uLlxuICAgKiBAcGFyYW0gYWxsb3dlZERvbWFpbnMgLSBPcHRpb25hbCBsaXN0IG9mIGRvbWFpbnMgdGhhdCBDbGF1ZGUgaXMgYWxsb3dlZCB0byBzZWFyY2guXG4gICAqIEBwYXJhbSBibG9ja2VkRG9tYWlucyAtIE9wdGlvbmFsIGxpc3Qgb2YgZG9tYWlucyB0aGF0IENsYXVkZSBzaG91bGQgYXZvaWQgd2hlbiBzZWFyY2hpbmcuXG4gICAqIEBwYXJhbSB1c2VyTG9jYXRpb24gLSBPcHRpb25hbCB1c2VyIGxvY2F0aW9uIGluZm9ybWF0aW9uIHRvIHByb3ZpZGUgZ2VvZ3JhcGhpY2FsbHkgcmVsZXZhbnQgc2VhcmNoIHJlc3VsdHMuXG4gICAqL1xuICB3ZWJTZWFyY2hfMjAyNTAzMDVcbn07XG5cbi8vIHNyYy9hbnRocm9waWMtcHJvdmlkZXIudHNcbmZ1bmN0aW9uIGNyZWF0ZUFudGhyb3BpYyhvcHRpb25zID0ge30pIHtcbiAgdmFyIF9hO1xuICBjb25zdCBiYXNlVVJMID0gKF9hID0gd2l0aG91dFRyYWlsaW5nU2xhc2gob3B0aW9ucy5iYXNlVVJMKSkgIT0gbnVsbCA/IF9hIDogXCJodHRwczovL2FwaS5hbnRocm9waWMuY29tL3YxXCI7XG4gIGNvbnN0IGdldEhlYWRlcnMgPSAoKSA9PiAoe1xuICAgIFwiYW50aHJvcGljLXZlcnNpb25cIjogXCIyMDIzLTA2LTAxXCIsXG4gICAgXCJ4LWFwaS1rZXlcIjogbG9hZEFwaUtleSh7XG4gICAgICBhcGlLZXk6IG9wdGlvbnMuYXBpS2V5LFxuICAgICAgZW52aXJvbm1lbnRWYXJpYWJsZU5hbWU6IFwiQU5USFJPUElDX0FQSV9LRVlcIixcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkFudGhyb3BpY1wiXG4gICAgfSksXG4gICAgLi4ub3B0aW9ucy5oZWFkZXJzXG4gIH0pO1xuICBjb25zdCBjcmVhdGVDaGF0TW9kZWwgPSAobW9kZWxJZCkgPT4ge1xuICAgIHZhciBfYTI7XG4gICAgcmV0dXJuIG5ldyBBbnRocm9waWNNZXNzYWdlc0xhbmd1YWdlTW9kZWwobW9kZWxJZCwge1xuICAgICAgcHJvdmlkZXI6IFwiYW50aHJvcGljLm1lc3NhZ2VzXCIsXG4gICAgICBiYXNlVVJMLFxuICAgICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICAgIGZldGNoOiBvcHRpb25zLmZldGNoLFxuICAgICAgZ2VuZXJhdGVJZDogKF9hMiA9IG9wdGlvbnMuZ2VuZXJhdGVJZCkgIT0gbnVsbCA/IF9hMiA6IGdlbmVyYXRlSWQyLFxuICAgICAgc3VwcG9ydGVkVXJsczogKCkgPT4gKHtcbiAgICAgICAgXCJpbWFnZS8qXCI6IFsvXmh0dHBzPzpcXC9cXC8uKiQvXVxuICAgICAgfSlcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgcHJvdmlkZXIgPSBmdW5jdGlvbihtb2RlbElkKSB7XG4gICAgaWYgKG5ldy50YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJUaGUgQW50aHJvcGljIG1vZGVsIGZ1bmN0aW9uIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCB0aGUgbmV3IGtleXdvcmQuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVDaGF0TW9kZWwobW9kZWxJZCk7XG4gIH07XG4gIHByb3ZpZGVyLmxhbmd1YWdlTW9kZWwgPSBjcmVhdGVDaGF0TW9kZWw7XG4gIHByb3ZpZGVyLmNoYXQgPSBjcmVhdGVDaGF0TW9kZWw7XG4gIHByb3ZpZGVyLm1lc3NhZ2VzID0gY3JlYXRlQ2hhdE1vZGVsO1xuICBwcm92aWRlci50ZXh0RW1iZWRkaW5nTW9kZWwgPSAobW9kZWxJZCkgPT4ge1xuICAgIHRocm93IG5ldyBOb1N1Y2hNb2RlbEVycm9yKHsgbW9kZWxJZCwgbW9kZWxUeXBlOiBcInRleHRFbWJlZGRpbmdNb2RlbFwiIH0pO1xuICB9O1xuICBwcm92aWRlci5pbWFnZU1vZGVsID0gKG1vZGVsSWQpID0+IHtcbiAgICB0aHJvdyBuZXcgTm9TdWNoTW9kZWxFcnJvcih7IG1vZGVsSWQsIG1vZGVsVHlwZTogXCJpbWFnZU1vZGVsXCIgfSk7XG4gIH07XG4gIHByb3ZpZGVyLnRvb2xzID0gYW50aHJvcGljVG9vbHM7XG4gIHJldHVybiBwcm92aWRlcjtcbn1cbnZhciBhbnRocm9waWMgPSBjcmVhdGVBbnRocm9waWMoKTtcbmV4cG9ydCB7XG4gIGFudGhyb3BpYyxcbiAgY3JlYXRlQW50aHJvcGljXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@ai-sdk+anthropic@2.0.17_zod@3.25.76/node_modules/@ai-sdk/anthropic/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@ai-sdk+anthropic@2.0.17_zod@3.25.76/node_modules/@ai-sdk/anthropic/dist/index.mjs":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@ai-sdk+anthropic@2.0.17_zod@3.25.76/node_modules/@ai-sdk/anthropic/dist/index.mjs ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   anthropic: () => (/* binding */ anthropic),\n/* harmony export */   createAnthropic: () => (/* binding */ createAnthropic)\n/* harmony export */ });\n/* harmony import */ var _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ai-sdk/provider */ \"(ssr)/./node_modules/.pnpm/@ai-sdk+provider@2.0.0/node_modules/@ai-sdk/provider/dist/index.mjs\");\n/* harmony import */ var _ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ai-sdk/provider-utils */ \"(ssr)/./node_modules/.pnpm/@ai-sdk+provider-utils@3.0.9_zod@3.25.76/node_modules/@ai-sdk/provider-utils/dist/index.mjs\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v4 */ \"(ssr)/./node_modules/.pnpm/zod@3.25.76/node_modules/zod/v4/classic/schemas.js\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod/v4 */ \"(ssr)/./node_modules/.pnpm/zod@3.25.76/node_modules/zod/v4/index.js\");\n// src/anthropic-provider.ts\n\n\n\n// src/anthropic-messages-language-model.ts\n\n\n\n\n// src/anthropic-error.ts\n\n\nvar anthropicErrorDataSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"error\"),\n  error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n  })\n});\nvar anthropicFailedResponseHandler = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonErrorResponseHandler)({\n  errorSchema: anthropicErrorDataSchema,\n  errorToMessage: (data) => data.error.message\n});\n\n// src/anthropic-messages-options.ts\n\nvar anthropicFilePartProviderOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n   * Citation configuration for this document.\n   * When enabled, this document will generate citations in the response.\n   */\n  citations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    /**\n     * Enable citations for this document\n     */\n    enabled: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean()\n  }).optional(),\n  /**\n   * Custom title for the document.\n   * If not provided, the filename will be used.\n   */\n  title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n   * Context about the document that will be passed to the model\n   * but not used towards cited content.\n   * Useful for storing document metadata as text or stringified JSON.\n   */\n  context: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nvar anthropicProviderOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  sendReasoning: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  thinking: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"enabled\"), zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"disabled\")]),\n    budgetTokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional()\n  }).optional(),\n  /**\n   * Whether to disable parallel function calling during tool use. Default is false.\n   * When set to true, Claude will use at most one tool per response.\n   */\n  disableParallelToolUse: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n   * Cache control settings for this message.\n   * See https://docs.anthropic.com/en/docs/build-with-claude/prompt-caching\n   */\n  cacheControl: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"ephemeral\"),\n    ttl: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"5m\"), zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"1h\")]).optional()\n  }).optional()\n});\n\n// src/anthropic-prepare-tools.ts\n\n\n// src/get-cache-control.ts\nfunction getCacheControl(providerMetadata) {\n  var _a;\n  const anthropic2 = providerMetadata == null ? void 0 : providerMetadata.anthropic;\n  const cacheControlValue = (_a = anthropic2 == null ? void 0 : anthropic2.cacheControl) != null ? _a : anthropic2 == null ? void 0 : anthropic2.cache_control;\n  return cacheControlValue;\n}\n\n// src/tool/web-search_20250305.ts\n\n\nvar webSearch_20250305ArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n   * Maximum number of web searches Claude can perform during the conversation.\n   */\n  maxUses: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n  /**\n   * Optional list of domains that Claude is allowed to search.\n   */\n  allowedDomains: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n  /**\n   * Optional list of domains that Claude should avoid when searching.\n   */\n  blockedDomains: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n  /**\n   * Optional user location information to provide geographically relevant search results.\n   */\n  userLocation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"approximate\"),\n    city: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    region: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    country: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    timezone: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n  }).optional()\n});\nvar webSearch_20250305OutputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    pageAge: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n    encryptedContent: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n  })\n);\nvar factory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactoryWithOutputSchema)({\n  id: \"anthropic.web_search_20250305\",\n  name: \"web_search\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n  }),\n  outputSchema: webSearch_20250305OutputSchema\n});\nvar webSearch_20250305 = (args = {}) => {\n  return factory(args);\n};\n\n// src/anthropic-prepare-tools.ts\nfunction isWebSearchTool(tool) {\n  return typeof tool === \"object\" && tool !== null && \"type\" in tool && tool.type === \"web_search_20250305\";\n}\nfunction prepareTools({\n  tools,\n  toolChoice,\n  disableParallelToolUse\n}) {\n  tools = (tools == null ? void 0 : tools.length) ? tools : void 0;\n  const toolWarnings = [];\n  const betas = /* @__PURE__ */ new Set();\n  if (tools == null) {\n    return { tools: void 0, toolChoice: void 0, toolWarnings, betas };\n  }\n  const anthropicTools2 = [];\n  for (const tool of tools) {\n    if (isWebSearchTool(tool)) {\n      anthropicTools2.push(tool);\n      continue;\n    }\n    switch (tool.type) {\n      case \"function\":\n        const cacheControl = getCacheControl(tool.providerOptions);\n        anthropicTools2.push({\n          name: tool.name,\n          description: tool.description,\n          input_schema: tool.inputSchema,\n          cache_control: cacheControl\n        });\n        break;\n      case \"provider-defined\":\n        switch (tool.id) {\n          case \"anthropic.computer_20250124\":\n            betas.add(\"computer-use-2025-01-24\");\n            anthropicTools2.push({\n              name: \"computer\",\n              type: \"computer_20250124\",\n              display_width_px: tool.args.displayWidthPx,\n              display_height_px: tool.args.displayHeightPx,\n              display_number: tool.args.displayNumber\n            });\n            break;\n          case \"anthropic.computer_20241022\":\n            betas.add(\"computer-use-2024-10-22\");\n            anthropicTools2.push({\n              name: \"computer\",\n              type: \"computer_20241022\",\n              display_width_px: tool.args.displayWidthPx,\n              display_height_px: tool.args.displayHeightPx,\n              display_number: tool.args.displayNumber\n            });\n            break;\n          case \"anthropic.text_editor_20250124\":\n            betas.add(\"computer-use-2025-01-24\");\n            anthropicTools2.push({\n              name: \"str_replace_editor\",\n              type: \"text_editor_20250124\"\n            });\n            break;\n          case \"anthropic.text_editor_20241022\":\n            betas.add(\"computer-use-2024-10-22\");\n            anthropicTools2.push({\n              name: \"str_replace_editor\",\n              type: \"text_editor_20241022\"\n            });\n            break;\n          case \"anthropic.text_editor_20250429\":\n            betas.add(\"computer-use-2025-01-24\");\n            anthropicTools2.push({\n              name: \"str_replace_based_edit_tool\",\n              type: \"text_editor_20250429\"\n            });\n            break;\n          case \"anthropic.bash_20250124\":\n            betas.add(\"computer-use-2025-01-24\");\n            anthropicTools2.push({\n              name: \"bash\",\n              type: \"bash_20250124\"\n            });\n            break;\n          case \"anthropic.bash_20241022\":\n            betas.add(\"computer-use-2024-10-22\");\n            anthropicTools2.push({\n              name: \"bash\",\n              type: \"bash_20241022\"\n            });\n            break;\n          case \"anthropic.web_search_20250305\": {\n            const args = webSearch_20250305ArgsSchema.parse(tool.args);\n            anthropicTools2.push({\n              type: \"web_search_20250305\",\n              name: \"web_search\",\n              max_uses: args.maxUses,\n              allowed_domains: args.allowedDomains,\n              blocked_domains: args.blockedDomains,\n              user_location: args.userLocation\n            });\n            break;\n          }\n          case \"anthropic.code_execution_20250522\": {\n            betas.add(\"code-execution-2025-05-22\");\n            anthropicTools2.push({\n              type: \"code_execution_20250522\",\n              name: \"code_execution\"\n            });\n            break;\n          }\n          default:\n            toolWarnings.push({ type: \"unsupported-tool\", tool });\n            break;\n        }\n        break;\n      default:\n        toolWarnings.push({ type: \"unsupported-tool\", tool });\n        break;\n    }\n  }\n  if (toolChoice == null) {\n    return {\n      tools: anthropicTools2,\n      toolChoice: disableParallelToolUse ? { type: \"auto\", disable_parallel_tool_use: disableParallelToolUse } : void 0,\n      toolWarnings,\n      betas\n    };\n  }\n  const type = toolChoice.type;\n  switch (type) {\n    case \"auto\":\n      return {\n        tools: anthropicTools2,\n        toolChoice: {\n          type: \"auto\",\n          disable_parallel_tool_use: disableParallelToolUse\n        },\n        toolWarnings,\n        betas\n      };\n    case \"required\":\n      return {\n        tools: anthropicTools2,\n        toolChoice: {\n          type: \"any\",\n          disable_parallel_tool_use: disableParallelToolUse\n        },\n        toolWarnings,\n        betas\n      };\n    case \"none\":\n      return { tools: void 0, toolChoice: void 0, toolWarnings, betas };\n    case \"tool\":\n      return {\n        tools: anthropicTools2,\n        toolChoice: {\n          type: \"tool\",\n          name: toolChoice.toolName,\n          disable_parallel_tool_use: disableParallelToolUse\n        },\n        toolWarnings,\n        betas\n      };\n    default: {\n      const _exhaustiveCheck = type;\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n        functionality: `tool choice type: ${_exhaustiveCheck}`\n      });\n    }\n  }\n}\n\n// src/convert-to-anthropic-messages-prompt.ts\n\n\n\n// src/tool/code-execution_20250522.ts\n\n\nvar codeExecution_20250522OutputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_execution_result\"),\n  stdout: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  stderr: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  return_code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n});\nvar factory2 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactoryWithOutputSchema)({\n  id: \"anthropic.code_execution_20250522\",\n  name: \"code_execution\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n  }),\n  outputSchema: codeExecution_20250522OutputSchema\n});\nvar codeExecution_20250522 = (args = {}) => {\n  return factory2(args);\n};\n\n// src/convert-to-anthropic-messages-prompt.ts\nfunction convertToString(data) {\n  if (typeof data === \"string\") {\n    return Buffer.from(data, \"base64\").toString(\"utf-8\");\n  }\n  if (data instanceof Uint8Array) {\n    return new TextDecoder().decode(data);\n  }\n  if (data instanceof URL) {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n      functionality: \"URL-based text documents are not supported for citations\"\n    });\n  }\n  throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n    functionality: `unsupported data type for text documents: ${typeof data}`\n  });\n}\nasync function convertToAnthropicMessagesPrompt({\n  prompt,\n  sendReasoning,\n  warnings\n}) {\n  var _a, _b, _c, _d, _e;\n  const betas = /* @__PURE__ */ new Set();\n  const blocks = groupIntoBlocks(prompt);\n  let system = void 0;\n  const messages = [];\n  async function shouldEnableCitations(providerMetadata) {\n    var _a2, _b2;\n    const anthropicOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"anthropic\",\n      providerOptions: providerMetadata,\n      schema: anthropicFilePartProviderOptions\n    });\n    return (_b2 = (_a2 = anthropicOptions == null ? void 0 : anthropicOptions.citations) == null ? void 0 : _a2.enabled) != null ? _b2 : false;\n  }\n  async function getDocumentMetadata(providerMetadata) {\n    const anthropicOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"anthropic\",\n      providerOptions: providerMetadata,\n      schema: anthropicFilePartProviderOptions\n    });\n    return {\n      title: anthropicOptions == null ? void 0 : anthropicOptions.title,\n      context: anthropicOptions == null ? void 0 : anthropicOptions.context\n    };\n  }\n  for (let i = 0; i < blocks.length; i++) {\n    const block = blocks[i];\n    const isLastBlock = i === blocks.length - 1;\n    const type = block.type;\n    switch (type) {\n      case \"system\": {\n        if (system != null) {\n          throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n            functionality: \"Multiple system messages that are separated by user/assistant messages\"\n          });\n        }\n        system = block.messages.map(({ content, providerOptions }) => ({\n          type: \"text\",\n          text: content,\n          cache_control: getCacheControl(providerOptions)\n        }));\n        break;\n      }\n      case \"user\": {\n        const anthropicContent = [];\n        for (const message of block.messages) {\n          const { role, content } = message;\n          switch (role) {\n            case \"user\": {\n              for (let j = 0; j < content.length; j++) {\n                const part = content[j];\n                const isLastPart = j === content.length - 1;\n                const cacheControl = (_a = getCacheControl(part.providerOptions)) != null ? _a : isLastPart ? getCacheControl(message.providerOptions) : void 0;\n                switch (part.type) {\n                  case \"text\": {\n                    anthropicContent.push({\n                      type: \"text\",\n                      text: part.text,\n                      cache_control: cacheControl\n                    });\n                    break;\n                  }\n                  case \"file\": {\n                    if (part.mediaType.startsWith(\"image/\")) {\n                      anthropicContent.push({\n                        type: \"image\",\n                        source: part.data instanceof URL ? {\n                          type: \"url\",\n                          url: part.data.toString()\n                        } : {\n                          type: \"base64\",\n                          media_type: part.mediaType === \"image/*\" ? \"image/jpeg\" : part.mediaType,\n                          data: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)\n                        },\n                        cache_control: cacheControl\n                      });\n                    } else if (part.mediaType === \"application/pdf\") {\n                      betas.add(\"pdfs-2024-09-25\");\n                      const enableCitations = await shouldEnableCitations(\n                        part.providerOptions\n                      );\n                      const metadata = await getDocumentMetadata(\n                        part.providerOptions\n                      );\n                      anthropicContent.push({\n                        type: \"document\",\n                        source: part.data instanceof URL ? {\n                          type: \"url\",\n                          url: part.data.toString()\n                        } : {\n                          type: \"base64\",\n                          media_type: \"application/pdf\",\n                          data: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)\n                        },\n                        title: (_b = metadata.title) != null ? _b : part.filename,\n                        ...metadata.context && { context: metadata.context },\n                        ...enableCitations && {\n                          citations: { enabled: true }\n                        },\n                        cache_control: cacheControl\n                      });\n                    } else if (part.mediaType === \"text/plain\") {\n                      const enableCitations = await shouldEnableCitations(\n                        part.providerOptions\n                      );\n                      const metadata = await getDocumentMetadata(\n                        part.providerOptions\n                      );\n                      anthropicContent.push({\n                        type: \"document\",\n                        source: part.data instanceof URL ? {\n                          type: \"url\",\n                          url: part.data.toString()\n                        } : {\n                          type: \"text\",\n                          media_type: \"text/plain\",\n                          data: convertToString(part.data)\n                        },\n                        title: (_c = metadata.title) != null ? _c : part.filename,\n                        ...metadata.context && { context: metadata.context },\n                        ...enableCitations && {\n                          citations: { enabled: true }\n                        },\n                        cache_control: cacheControl\n                      });\n                    } else {\n                      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                        functionality: `media type: ${part.mediaType}`\n                      });\n                    }\n                    break;\n                  }\n                }\n              }\n              break;\n            }\n            case \"tool\": {\n              for (let i2 = 0; i2 < content.length; i2++) {\n                const part = content[i2];\n                const isLastPart = i2 === content.length - 1;\n                const cacheControl = (_d = getCacheControl(part.providerOptions)) != null ? _d : isLastPart ? getCacheControl(message.providerOptions) : void 0;\n                const output = part.output;\n                let contentValue;\n                switch (output.type) {\n                  case \"content\":\n                    contentValue = output.value.map((contentPart) => {\n                      switch (contentPart.type) {\n                        case \"text\":\n                          return {\n                            type: \"text\",\n                            text: contentPart.text,\n                            cache_control: void 0\n                          };\n                        case \"media\": {\n                          if (contentPart.mediaType.startsWith(\"image/\")) {\n                            return {\n                              type: \"image\",\n                              source: {\n                                type: \"base64\",\n                                media_type: contentPart.mediaType,\n                                data: contentPart.data\n                              },\n                              cache_control: void 0\n                            };\n                          }\n                          throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                            functionality: `media type: ${contentPart.mediaType}`\n                          });\n                        }\n                      }\n                    });\n                    break;\n                  case \"text\":\n                  case \"error-text\":\n                    contentValue = output.value;\n                    break;\n                  case \"json\":\n                  case \"error-json\":\n                  default:\n                    contentValue = JSON.stringify(output.value);\n                    break;\n                }\n                anthropicContent.push({\n                  type: \"tool_result\",\n                  tool_use_id: part.toolCallId,\n                  content: contentValue,\n                  is_error: output.type === \"error-text\" || output.type === \"error-json\" ? true : void 0,\n                  cache_control: cacheControl\n                });\n              }\n              break;\n            }\n            default: {\n              const _exhaustiveCheck = role;\n              throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n            }\n          }\n        }\n        messages.push({ role: \"user\", content: anthropicContent });\n        break;\n      }\n      case \"assistant\": {\n        const anthropicContent = [];\n        for (let j = 0; j < block.messages.length; j++) {\n          const message = block.messages[j];\n          const isLastMessage = j === block.messages.length - 1;\n          const { content } = message;\n          for (let k = 0; k < content.length; k++) {\n            const part = content[k];\n            const isLastContentPart = k === content.length - 1;\n            const cacheControl = (_e = getCacheControl(part.providerOptions)) != null ? _e : isLastContentPart ? getCacheControl(message.providerOptions) : void 0;\n            switch (part.type) {\n              case \"text\": {\n                anthropicContent.push({\n                  type: \"text\",\n                  text: (\n                    // trim the last text part if it's the last message in the block\n                    // because Anthropic does not allow trailing whitespace\n                    // in pre-filled assistant responses\n                    isLastBlock && isLastMessage && isLastContentPart ? part.text.trim() : part.text\n                  ),\n                  cache_control: cacheControl\n                });\n                break;\n              }\n              case \"reasoning\": {\n                if (sendReasoning) {\n                  const reasoningMetadata = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n                    provider: \"anthropic\",\n                    providerOptions: part.providerOptions,\n                    schema: anthropicReasoningMetadataSchema\n                  });\n                  if (reasoningMetadata != null) {\n                    if (reasoningMetadata.signature != null) {\n                      anthropicContent.push({\n                        type: \"thinking\",\n                        thinking: part.text,\n                        signature: reasoningMetadata.signature,\n                        cache_control: cacheControl\n                      });\n                    } else if (reasoningMetadata.redactedData != null) {\n                      anthropicContent.push({\n                        type: \"redacted_thinking\",\n                        data: reasoningMetadata.redactedData,\n                        cache_control: cacheControl\n                      });\n                    } else {\n                      warnings.push({\n                        type: \"other\",\n                        message: \"unsupported reasoning metadata\"\n                      });\n                    }\n                  } else {\n                    warnings.push({\n                      type: \"other\",\n                      message: \"unsupported reasoning metadata\"\n                    });\n                  }\n                } else {\n                  warnings.push({\n                    type: \"other\",\n                    message: \"sending reasoning content is disabled for this model\"\n                  });\n                }\n                break;\n              }\n              case \"tool-call\": {\n                if (part.providerExecuted) {\n                  if (part.toolName === \"web_search\") {\n                    anthropicContent.push({\n                      type: \"server_tool_use\",\n                      id: part.toolCallId,\n                      name: \"web_search\",\n                      input: part.input,\n                      cache_control: cacheControl\n                    });\n                    break;\n                  }\n                  if (part.toolName === \"code_execution\") {\n                    anthropicContent.push({\n                      type: \"server_tool_use\",\n                      id: part.toolCallId,\n                      name: \"code_execution\",\n                      input: part.input,\n                      cache_control: cacheControl\n                    });\n                    break;\n                  }\n                  warnings.push({\n                    type: \"other\",\n                    message: `provider executed tool call for tool ${part.toolName} is not supported`\n                  });\n                  break;\n                }\n                anthropicContent.push({\n                  type: \"tool_use\",\n                  id: part.toolCallId,\n                  name: part.toolName,\n                  input: part.input,\n                  cache_control: cacheControl\n                });\n                break;\n              }\n              case \"tool-result\": {\n                if (part.toolName === \"web_search\") {\n                  const output = part.output;\n                  if (output.type !== \"json\") {\n                    warnings.push({\n                      type: \"other\",\n                      message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`\n                    });\n                    break;\n                  }\n                  const webSearchOutput = webSearch_20250305OutputSchema.parse(\n                    output.value\n                  );\n                  anthropicContent.push({\n                    type: \"web_search_tool_result\",\n                    tool_use_id: part.toolCallId,\n                    content: webSearchOutput.map((result) => ({\n                      url: result.url,\n                      title: result.title,\n                      page_age: result.pageAge,\n                      encrypted_content: result.encryptedContent,\n                      type: result.type\n                    })),\n                    cache_control: cacheControl\n                  });\n                  break;\n                }\n                if (part.toolName === \"code_execution\") {\n                  const output = part.output;\n                  if (output.type !== \"json\") {\n                    warnings.push({\n                      type: \"other\",\n                      message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`\n                    });\n                    break;\n                  }\n                  const codeExecutionOutput = codeExecution_20250522OutputSchema.parse(output.value);\n                  anthropicContent.push({\n                    type: \"code_execution_tool_result\",\n                    tool_use_id: part.toolCallId,\n                    content: {\n                      type: codeExecutionOutput.type,\n                      stdout: codeExecutionOutput.stdout,\n                      stderr: codeExecutionOutput.stderr,\n                      return_code: codeExecutionOutput.return_code\n                    },\n                    cache_control: cacheControl\n                  });\n                  break;\n                }\n                warnings.push({\n                  type: \"other\",\n                  message: `provider executed tool result for tool ${part.toolName} is not supported`\n                });\n                break;\n              }\n            }\n          }\n        }\n        messages.push({ role: \"assistant\", content: anthropicContent });\n        break;\n      }\n      default: {\n        const _exhaustiveCheck = type;\n        throw new Error(`content type: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  return {\n    prompt: { system, messages },\n    betas\n  };\n}\nfunction groupIntoBlocks(prompt) {\n  const blocks = [];\n  let currentBlock = void 0;\n  for (const message of prompt) {\n    const { role } = message;\n    switch (role) {\n      case \"system\": {\n        if ((currentBlock == null ? void 0 : currentBlock.type) !== \"system\") {\n          currentBlock = { type: \"system\", messages: [] };\n          blocks.push(currentBlock);\n        }\n        currentBlock.messages.push(message);\n        break;\n      }\n      case \"assistant\": {\n        if ((currentBlock == null ? void 0 : currentBlock.type) !== \"assistant\") {\n          currentBlock = { type: \"assistant\", messages: [] };\n          blocks.push(currentBlock);\n        }\n        currentBlock.messages.push(message);\n        break;\n      }\n      case \"user\": {\n        if ((currentBlock == null ? void 0 : currentBlock.type) !== \"user\") {\n          currentBlock = { type: \"user\", messages: [] };\n          blocks.push(currentBlock);\n        }\n        currentBlock.messages.push(message);\n        break;\n      }\n      case \"tool\": {\n        if ((currentBlock == null ? void 0 : currentBlock.type) !== \"user\") {\n          currentBlock = { type: \"user\", messages: [] };\n          blocks.push(currentBlock);\n        }\n        currentBlock.messages.push(message);\n        break;\n      }\n      default: {\n        const _exhaustiveCheck = role;\n        throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  return blocks;\n}\n\n// src/map-anthropic-stop-reason.ts\nfunction mapAnthropicStopReason({\n  finishReason,\n  isJsonResponseFromTool\n}) {\n  switch (finishReason) {\n    case \"pause_turn\":\n    case \"end_turn\":\n    case \"stop_sequence\":\n      return \"stop\";\n    case \"refusal\":\n      return \"content-filter\";\n    case \"tool_use\":\n      return isJsonResponseFromTool ? \"stop\" : \"tool-calls\";\n    case \"max_tokens\":\n      return \"length\";\n    default:\n      return \"unknown\";\n  }\n}\n\n// src/anthropic-messages-language-model.ts\nvar citationSchemas = {\n  webSearchResult: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_result_location\"),\n    cited_text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    encrypted_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n  }),\n  pageLocation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"page_location\"),\n    cited_text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    document_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    document_title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n    start_page_number: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    end_page_number: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n  }),\n  charLocation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"char_location\"),\n    cited_text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    document_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    document_title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n    start_char_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    end_char_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n  })\n};\nvar citationSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n  citationSchemas.webSearchResult,\n  citationSchemas.pageLocation,\n  citationSchemas.charLocation\n]);\nvar documentCitationSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n  citationSchemas.pageLocation,\n  citationSchemas.charLocation\n]);\nfunction processCitation(citation, citationDocuments, generateId3, onSource) {\n  if (citation.type === \"page_location\" || citation.type === \"char_location\") {\n    const source = createCitationSource(\n      citation,\n      citationDocuments,\n      generateId3\n    );\n    if (source) {\n      onSource(source);\n    }\n  }\n}\nfunction createCitationSource(citation, citationDocuments, generateId3) {\n  var _a;\n  const documentInfo = citationDocuments[citation.document_index];\n  if (!documentInfo) {\n    return null;\n  }\n  const providerMetadata = citation.type === \"page_location\" ? {\n    citedText: citation.cited_text,\n    startPageNumber: citation.start_page_number,\n    endPageNumber: citation.end_page_number\n  } : {\n    citedText: citation.cited_text,\n    startCharIndex: citation.start_char_index,\n    endCharIndex: citation.end_char_index\n  };\n  return {\n    type: \"source\",\n    sourceType: \"document\",\n    id: generateId3(),\n    mediaType: documentInfo.mediaType,\n    title: (_a = citation.document_title) != null ? _a : documentInfo.title,\n    filename: documentInfo.filename,\n    providerMetadata: {\n      anthropic: providerMetadata\n    }\n  };\n}\nvar AnthropicMessagesLanguageModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v2\";\n    var _a;\n    this.modelId = modelId;\n    this.config = config;\n    this.generateId = (_a = config.generateId) != null ? _a : _ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId;\n  }\n  supportsUrl(url) {\n    return url.protocol === \"https:\";\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  get supportedUrls() {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = this.config).supportedUrls) == null ? void 0 : _b.call(_a)) != null ? _c : {};\n  }\n  async getArgs({\n    prompt,\n    maxOutputTokens = 4096,\n    // 4096: max model output tokens TODO update default in v5\n    temperature,\n    topP,\n    topK,\n    frequencyPenalty,\n    presencePenalty,\n    stopSequences,\n    responseFormat,\n    seed,\n    tools,\n    toolChoice,\n    providerOptions\n  }) {\n    var _a, _b, _c;\n    const warnings = [];\n    if (frequencyPenalty != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"frequencyPenalty\"\n      });\n    }\n    if (presencePenalty != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"presencePenalty\"\n      });\n    }\n    if (seed != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"seed\"\n      });\n    }\n    if ((responseFormat == null ? void 0 : responseFormat.type) === \"json\") {\n      if (responseFormat.schema == null) {\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"responseFormat\",\n          details: \"JSON response format requires a schema. The response format is ignored.\"\n        });\n      } else if (tools != null) {\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"tools\",\n          details: \"JSON response format does not support tools. The provided tools are ignored.\"\n        });\n      }\n    }\n    const jsonResponseTool = (responseFormat == null ? void 0 : responseFormat.type) === \"json\" && responseFormat.schema != null ? {\n      type: \"function\",\n      name: \"json\",\n      description: \"Respond with a JSON object.\",\n      inputSchema: responseFormat.schema\n    } : void 0;\n    const anthropicOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"anthropic\",\n      providerOptions,\n      schema: anthropicProviderOptions\n    });\n    const { prompt: messagesPrompt, betas: messagesBetas } = await convertToAnthropicMessagesPrompt({\n      prompt,\n      sendReasoning: (_a = anthropicOptions == null ? void 0 : anthropicOptions.sendReasoning) != null ? _a : true,\n      warnings\n    });\n    const isThinking = ((_b = anthropicOptions == null ? void 0 : anthropicOptions.thinking) == null ? void 0 : _b.type) === \"enabled\";\n    const thinkingBudget = (_c = anthropicOptions == null ? void 0 : anthropicOptions.thinking) == null ? void 0 : _c.budgetTokens;\n    const baseArgs = {\n      // model id:\n      model: this.modelId,\n      // standardized settings:\n      max_tokens: maxOutputTokens,\n      temperature,\n      top_k: topK,\n      top_p: topP,\n      stop_sequences: stopSequences,\n      // provider specific settings:\n      ...isThinking && {\n        thinking: { type: \"enabled\", budget_tokens: thinkingBudget }\n      },\n      // prompt:\n      system: messagesPrompt.system,\n      messages: messagesPrompt.messages\n    };\n    if (isThinking) {\n      if (thinkingBudget == null) {\n        throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n          functionality: \"thinking requires a budget\"\n        });\n      }\n      if (baseArgs.temperature != null) {\n        baseArgs.temperature = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"temperature\",\n          details: \"temperature is not supported when thinking is enabled\"\n        });\n      }\n      if (topK != null) {\n        baseArgs.top_k = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"topK\",\n          details: \"topK is not supported when thinking is enabled\"\n        });\n      }\n      if (topP != null) {\n        baseArgs.top_p = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"topP\",\n          details: \"topP is not supported when thinking is enabled\"\n        });\n      }\n      baseArgs.max_tokens = maxOutputTokens + thinkingBudget;\n    }\n    const {\n      tools: anthropicTools2,\n      toolChoice: anthropicToolChoice,\n      toolWarnings,\n      betas: toolsBetas\n    } = prepareTools(\n      jsonResponseTool != null ? {\n        tools: [jsonResponseTool],\n        toolChoice: { type: \"tool\", toolName: jsonResponseTool.name },\n        disableParallelToolUse: true\n      } : {\n        tools: tools != null ? tools : [],\n        toolChoice,\n        disableParallelToolUse: anthropicOptions == null ? void 0 : anthropicOptions.disableParallelToolUse\n      }\n    );\n    return {\n      args: {\n        ...baseArgs,\n        tools: anthropicTools2,\n        tool_choice: anthropicToolChoice\n      },\n      warnings: [...warnings, ...toolWarnings],\n      betas: /* @__PURE__ */ new Set([...messagesBetas, ...toolsBetas]),\n      usesJsonResponseTool: jsonResponseTool != null\n    };\n  }\n  async getHeaders({\n    betas,\n    headers\n  }) {\n    return (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(\n      await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.resolve)(this.config.headers),\n      betas.size > 0 ? { \"anthropic-beta\": Array.from(betas).join(\",\") } : {},\n      headers\n    );\n  }\n  buildRequestUrl(isStreaming) {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = this.config).buildRequestUrl) == null ? void 0 : _b.call(_a, this.config.baseURL, isStreaming)) != null ? _c : `${this.config.baseURL}/messages`;\n  }\n  transformRequestBody(args) {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = this.config).transformRequestBody) == null ? void 0 : _b.call(_a, args)) != null ? _c : args;\n  }\n  extractCitationDocuments(prompt) {\n    const isCitationPart = (part) => {\n      var _a, _b;\n      if (part.type !== \"file\") {\n        return false;\n      }\n      if (part.mediaType !== \"application/pdf\" && part.mediaType !== \"text/plain\") {\n        return false;\n      }\n      const anthropic2 = (_a = part.providerOptions) == null ? void 0 : _a.anthropic;\n      const citationsConfig = anthropic2 == null ? void 0 : anthropic2.citations;\n      return (_b = citationsConfig == null ? void 0 : citationsConfig.enabled) != null ? _b : false;\n    };\n    return prompt.filter((message) => message.role === \"user\").flatMap((message) => message.content).filter(isCitationPart).map((part) => {\n      var _a;\n      const filePart = part;\n      return {\n        title: (_a = filePart.filename) != null ? _a : \"Untitled Document\",\n        filename: filePart.filename,\n        mediaType: filePart.mediaType\n      };\n    });\n  }\n  async doGenerate(options) {\n    var _a, _b, _c, _d, _e;\n    const { args, warnings, betas, usesJsonResponseTool } = await this.getArgs(options);\n    const citationDocuments = this.extractCitationDocuments(options.prompt);\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.buildRequestUrl(false),\n      headers: await this.getHeaders({ betas, headers: options.headers }),\n      body: this.transformRequestBody(args),\n      failedResponseHandler: anthropicFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        anthropicMessagesResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const content = [];\n    for (const part of response.content) {\n      switch (part.type) {\n        case \"text\": {\n          if (!usesJsonResponseTool) {\n            content.push({ type: \"text\", text: part.text });\n            if (part.citations) {\n              for (const citation of part.citations) {\n                processCitation(\n                  citation,\n                  citationDocuments,\n                  this.generateId,\n                  (source) => content.push(source)\n                );\n              }\n            }\n          }\n          break;\n        }\n        case \"thinking\": {\n          content.push({\n            type: \"reasoning\",\n            text: part.thinking,\n            providerMetadata: {\n              anthropic: {\n                signature: part.signature\n              }\n            }\n          });\n          break;\n        }\n        case \"redacted_thinking\": {\n          content.push({\n            type: \"reasoning\",\n            text: \"\",\n            providerMetadata: {\n              anthropic: {\n                redactedData: part.data\n              }\n            }\n          });\n          break;\n        }\n        case \"tool_use\": {\n          content.push(\n            // when a json response tool is used, the tool call becomes the text:\n            usesJsonResponseTool ? {\n              type: \"text\",\n              text: JSON.stringify(part.input)\n            } : {\n              type: \"tool-call\",\n              toolCallId: part.id,\n              toolName: part.name,\n              input: JSON.stringify(part.input)\n            }\n          );\n          break;\n        }\n        case \"server_tool_use\": {\n          if (part.name === \"web_search\" || part.name === \"code_execution\") {\n            content.push({\n              type: \"tool-call\",\n              toolCallId: part.id,\n              toolName: part.name,\n              input: JSON.stringify(part.input),\n              providerExecuted: true\n            });\n          }\n          break;\n        }\n        case \"web_search_tool_result\": {\n          if (Array.isArray(part.content)) {\n            content.push({\n              type: \"tool-result\",\n              toolCallId: part.tool_use_id,\n              toolName: \"web_search\",\n              result: part.content.map((result) => {\n                var _a2;\n                return {\n                  url: result.url,\n                  title: result.title,\n                  pageAge: (_a2 = result.page_age) != null ? _a2 : null,\n                  encryptedContent: result.encrypted_content,\n                  type: result.type\n                };\n              }),\n              providerExecuted: true\n            });\n            for (const result of part.content) {\n              content.push({\n                type: \"source\",\n                sourceType: \"url\",\n                id: this.generateId(),\n                url: result.url,\n                title: result.title,\n                providerMetadata: {\n                  anthropic: {\n                    pageAge: (_a = result.page_age) != null ? _a : null\n                  }\n                }\n              });\n            }\n          } else {\n            content.push({\n              type: \"tool-result\",\n              toolCallId: part.tool_use_id,\n              toolName: \"web_search\",\n              isError: true,\n              result: {\n                type: \"web_search_tool_result_error\",\n                errorCode: part.content.error_code\n              },\n              providerExecuted: true\n            });\n          }\n          break;\n        }\n        case \"code_execution_tool_result\": {\n          if (part.content.type === \"code_execution_result\") {\n            content.push({\n              type: \"tool-result\",\n              toolCallId: part.tool_use_id,\n              toolName: \"code_execution\",\n              result: {\n                type: part.content.type,\n                stdout: part.content.stdout,\n                stderr: part.content.stderr,\n                return_code: part.content.return_code\n              },\n              providerExecuted: true\n            });\n          } else if (part.content.type === \"code_execution_tool_result_error\") {\n            content.push({\n              type: \"tool-result\",\n              toolCallId: part.tool_use_id,\n              toolName: \"code_execution\",\n              isError: true,\n              result: {\n                type: \"code_execution_tool_result_error\",\n                errorCode: part.content.error_code\n              },\n              providerExecuted: true\n            });\n          }\n          break;\n        }\n      }\n    }\n    return {\n      content,\n      finishReason: mapAnthropicStopReason({\n        finishReason: response.stop_reason,\n        isJsonResponseFromTool: usesJsonResponseTool\n      }),\n      usage: {\n        inputTokens: response.usage.input_tokens,\n        outputTokens: response.usage.output_tokens,\n        totalTokens: response.usage.input_tokens + response.usage.output_tokens,\n        cachedInputTokens: (_b = response.usage.cache_read_input_tokens) != null ? _b : void 0\n      },\n      request: { body: args },\n      response: {\n        id: (_c = response.id) != null ? _c : void 0,\n        modelId: (_d = response.model) != null ? _d : void 0,\n        headers: responseHeaders,\n        body: rawResponse\n      },\n      warnings,\n      providerMetadata: {\n        anthropic: {\n          usage: response.usage,\n          cacheCreationInputTokens: (_e = response.usage.cache_creation_input_tokens) != null ? _e : null\n        }\n      }\n    };\n  }\n  async doStream(options) {\n    const { args, warnings, betas, usesJsonResponseTool } = await this.getArgs(options);\n    const citationDocuments = this.extractCitationDocuments(options.prompt);\n    const body = { ...args, stream: true };\n    const { responseHeaders, value: response } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.buildRequestUrl(true),\n      headers: await this.getHeaders({ betas, headers: options.headers }),\n      body: this.transformRequestBody(body),\n      failedResponseHandler: anthropicFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(\n        anthropicMessagesChunkSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    let finishReason = \"unknown\";\n    const usage = {\n      inputTokens: void 0,\n      outputTokens: void 0,\n      totalTokens: void 0\n    };\n    const contentBlocks = {};\n    let providerMetadata = void 0;\n    let blockType = void 0;\n    const generateId3 = this.generateId;\n    return {\n      stream: response.pipeThrough(\n        new TransformStream({\n          start(controller) {\n            controller.enqueue({ type: \"stream-start\", warnings });\n          },\n          transform(chunk, controller) {\n            var _a, _b, _c, _d, _e, _f, _g;\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: \"raw\", rawValue: chunk.rawValue });\n            }\n            if (!chunk.success) {\n              controller.enqueue({ type: \"error\", error: chunk.error });\n              return;\n            }\n            const value = chunk.value;\n            switch (value.type) {\n              case \"ping\": {\n                return;\n              }\n              case \"content_block_start\": {\n                const contentBlockType = value.content_block.type;\n                blockType = contentBlockType;\n                switch (contentBlockType) {\n                  case \"text\": {\n                    contentBlocks[value.index] = { type: \"text\" };\n                    controller.enqueue({\n                      type: \"text-start\",\n                      id: String(value.index)\n                    });\n                    return;\n                  }\n                  case \"thinking\": {\n                    contentBlocks[value.index] = { type: \"reasoning\" };\n                    controller.enqueue({\n                      type: \"reasoning-start\",\n                      id: String(value.index)\n                    });\n                    return;\n                  }\n                  case \"redacted_thinking\": {\n                    contentBlocks[value.index] = { type: \"reasoning\" };\n                    controller.enqueue({\n                      type: \"reasoning-start\",\n                      id: String(value.index),\n                      providerMetadata: {\n                        anthropic: {\n                          redactedData: value.content_block.data\n                        }\n                      }\n                    });\n                    return;\n                  }\n                  case \"tool_use\": {\n                    contentBlocks[value.index] = usesJsonResponseTool ? { type: \"text\" } : {\n                      type: \"tool-call\",\n                      toolCallId: value.content_block.id,\n                      toolName: value.content_block.name,\n                      input: \"\"\n                    };\n                    controller.enqueue(\n                      usesJsonResponseTool ? { type: \"text-start\", id: String(value.index) } : {\n                        type: \"tool-input-start\",\n                        id: value.content_block.id,\n                        toolName: value.content_block.name\n                      }\n                    );\n                    return;\n                  }\n                  case \"server_tool_use\": {\n                    if (value.content_block.name === \"web_search\" || value.content_block.name === \"code_execution\") {\n                      contentBlocks[value.index] = {\n                        type: \"tool-call\",\n                        toolCallId: value.content_block.id,\n                        toolName: value.content_block.name,\n                        input: \"\",\n                        providerExecuted: true\n                      };\n                      controller.enqueue({\n                        type: \"tool-input-start\",\n                        id: value.content_block.id,\n                        toolName: value.content_block.name,\n                        providerExecuted: true\n                      });\n                    }\n                    return;\n                  }\n                  case \"web_search_tool_result\": {\n                    const part = value.content_block;\n                    if (Array.isArray(part.content)) {\n                      controller.enqueue({\n                        type: \"tool-result\",\n                        toolCallId: part.tool_use_id,\n                        toolName: \"web_search\",\n                        result: part.content.map((result) => {\n                          var _a2;\n                          return {\n                            url: result.url,\n                            title: result.title,\n                            pageAge: (_a2 = result.page_age) != null ? _a2 : null,\n                            encryptedContent: result.encrypted_content,\n                            type: result.type\n                          };\n                        }),\n                        providerExecuted: true\n                      });\n                      for (const result of part.content) {\n                        controller.enqueue({\n                          type: \"source\",\n                          sourceType: \"url\",\n                          id: generateId3(),\n                          url: result.url,\n                          title: result.title,\n                          providerMetadata: {\n                            anthropic: {\n                              pageAge: (_a = result.page_age) != null ? _a : null\n                            }\n                          }\n                        });\n                      }\n                    } else {\n                      controller.enqueue({\n                        type: \"tool-result\",\n                        toolCallId: part.tool_use_id,\n                        toolName: \"web_search\",\n                        isError: true,\n                        result: {\n                          type: \"web_search_tool_result_error\",\n                          errorCode: part.content.error_code\n                        },\n                        providerExecuted: true\n                      });\n                    }\n                    return;\n                  }\n                  case \"code_execution_tool_result\": {\n                    const part = value.content_block;\n                    if (part.content.type === \"code_execution_result\") {\n                      controller.enqueue({\n                        type: \"tool-result\",\n                        toolCallId: part.tool_use_id,\n                        toolName: \"code_execution\",\n                        result: {\n                          type: part.content.type,\n                          stdout: part.content.stdout,\n                          stderr: part.content.stderr,\n                          return_code: part.content.return_code\n                        },\n                        providerExecuted: true\n                      });\n                    } else if (part.content.type === \"code_execution_tool_result_error\") {\n                      controller.enqueue({\n                        type: \"tool-result\",\n                        toolCallId: part.tool_use_id,\n                        toolName: \"code_execution\",\n                        isError: true,\n                        result: {\n                          type: \"code_execution_tool_result_error\",\n                          errorCode: part.content.error_code\n                        },\n                        providerExecuted: true\n                      });\n                    }\n                    return;\n                  }\n                  default: {\n                    const _exhaustiveCheck = contentBlockType;\n                    throw new Error(\n                      `Unsupported content block type: ${_exhaustiveCheck}`\n                    );\n                  }\n                }\n              }\n              case \"content_block_stop\": {\n                if (contentBlocks[value.index] != null) {\n                  const contentBlock = contentBlocks[value.index];\n                  switch (contentBlock.type) {\n                    case \"text\": {\n                      controller.enqueue({\n                        type: \"text-end\",\n                        id: String(value.index)\n                      });\n                      break;\n                    }\n                    case \"reasoning\": {\n                      controller.enqueue({\n                        type: \"reasoning-end\",\n                        id: String(value.index)\n                      });\n                      break;\n                    }\n                    case \"tool-call\":\n                      if (!usesJsonResponseTool) {\n                        controller.enqueue({\n                          type: \"tool-input-end\",\n                          id: contentBlock.toolCallId\n                        });\n                        controller.enqueue(contentBlock);\n                      }\n                      break;\n                  }\n                  delete contentBlocks[value.index];\n                }\n                blockType = void 0;\n                return;\n              }\n              case \"content_block_delta\": {\n                const deltaType = value.delta.type;\n                switch (deltaType) {\n                  case \"text_delta\": {\n                    if (usesJsonResponseTool) {\n                      return;\n                    }\n                    controller.enqueue({\n                      type: \"text-delta\",\n                      id: String(value.index),\n                      delta: value.delta.text\n                    });\n                    return;\n                  }\n                  case \"thinking_delta\": {\n                    controller.enqueue({\n                      type: \"reasoning-delta\",\n                      id: String(value.index),\n                      delta: value.delta.thinking\n                    });\n                    return;\n                  }\n                  case \"signature_delta\": {\n                    if (blockType === \"thinking\") {\n                      controller.enqueue({\n                        type: \"reasoning-delta\",\n                        id: String(value.index),\n                        delta: \"\",\n                        providerMetadata: {\n                          anthropic: {\n                            signature: value.delta.signature\n                          }\n                        }\n                      });\n                    }\n                    return;\n                  }\n                  case \"input_json_delta\": {\n                    const contentBlock = contentBlocks[value.index];\n                    const delta = value.delta.partial_json;\n                    if (usesJsonResponseTool) {\n                      if ((contentBlock == null ? void 0 : contentBlock.type) !== \"text\") {\n                        return;\n                      }\n                      controller.enqueue({\n                        type: \"text-delta\",\n                        id: String(value.index),\n                        delta\n                      });\n                    } else {\n                      if ((contentBlock == null ? void 0 : contentBlock.type) !== \"tool-call\") {\n                        return;\n                      }\n                      controller.enqueue({\n                        type: \"tool-input-delta\",\n                        id: contentBlock.toolCallId,\n                        delta\n                      });\n                      contentBlock.input += delta;\n                    }\n                    return;\n                  }\n                  case \"citations_delta\": {\n                    const citation = value.delta.citation;\n                    processCitation(\n                      citation,\n                      citationDocuments,\n                      generateId3,\n                      (source) => controller.enqueue(source)\n                    );\n                    return;\n                  }\n                  default: {\n                    const _exhaustiveCheck = deltaType;\n                    throw new Error(\n                      `Unsupported delta type: ${_exhaustiveCheck}`\n                    );\n                  }\n                }\n              }\n              case \"message_start\": {\n                usage.inputTokens = value.message.usage.input_tokens;\n                usage.cachedInputTokens = (_b = value.message.usage.cache_read_input_tokens) != null ? _b : void 0;\n                providerMetadata = {\n                  anthropic: {\n                    usage: value.message.usage,\n                    cacheCreationInputTokens: (_c = value.message.usage.cache_creation_input_tokens) != null ? _c : null\n                  }\n                };\n                controller.enqueue({\n                  type: \"response-metadata\",\n                  id: (_d = value.message.id) != null ? _d : void 0,\n                  modelId: (_e = value.message.model) != null ? _e : void 0\n                });\n                return;\n              }\n              case \"message_delta\": {\n                usage.outputTokens = value.usage.output_tokens;\n                usage.totalTokens = ((_f = usage.inputTokens) != null ? _f : 0) + ((_g = value.usage.output_tokens) != null ? _g : 0);\n                finishReason = mapAnthropicStopReason({\n                  finishReason: value.delta.stop_reason,\n                  isJsonResponseFromTool: usesJsonResponseTool\n                });\n                return;\n              }\n              case \"message_stop\": {\n                controller.enqueue({\n                  type: \"finish\",\n                  finishReason,\n                  usage,\n                  providerMetadata\n                });\n                return;\n              }\n              case \"error\": {\n                controller.enqueue({ type: \"error\", error: value.error });\n                return;\n              }\n              default: {\n                const _exhaustiveCheck = value;\n                throw new Error(`Unsupported chunk type: ${_exhaustiveCheck}`);\n              }\n            }\n          }\n        })\n      ),\n      request: { body },\n      response: { headers: responseHeaders }\n    };\n  }\n};\nvar anthropicMessagesResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message\"),\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"text\"),\n        text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        citations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(citationSchema).optional()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"thinking\"),\n        thinking: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        signature: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"redacted_thinking\"),\n        data: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"tool_use\"),\n        id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        input: zod_v4__WEBPACK_IMPORTED_MODULE_0__.unknown()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"server_tool_use\"),\n        id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        input: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.unknown()).nullish()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_tool_result\"),\n        tool_use_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_result\"),\n              url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              page_age: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n            })\n          ),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_tool_result_error\"),\n            error_code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          })\n        ])\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_execution_tool_result\"),\n        tool_use_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_execution_result\"),\n            stdout: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            stderr: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            return_code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_execution_tool_result_error\"),\n            error_code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          })\n        ])\n      })\n    ])\n  ),\n  stop_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.looseObject({\n    input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    output_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    cache_creation_input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n    cache_read_input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish()\n  })\n});\nvar anthropicMessagesChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message_start\"),\n    message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n      model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n      usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.looseObject({\n        input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n        output_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n        cache_creation_input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n        cache_read_input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish()\n      })\n    })\n  }),\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"content_block_start\"),\n    index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    content_block: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"text\"),\n        text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"thinking\"),\n        thinking: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"tool_use\"),\n        id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"redacted_thinking\"),\n        data: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"server_tool_use\"),\n        id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        input: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.unknown()).nullish()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_tool_result\"),\n        tool_use_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_result\"),\n              url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              page_age: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n            })\n          ),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_tool_result_error\"),\n            error_code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          })\n        ])\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_execution_tool_result\"),\n        tool_use_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_execution_result\"),\n            stdout: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            stderr: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            return_code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_execution_tool_result_error\"),\n            error_code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          })\n        ])\n      })\n    ])\n  }),\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"content_block_delta\"),\n    index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"input_json_delta\"),\n        partial_json: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"text_delta\"),\n        text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"thinking_delta\"),\n        thinking: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"signature_delta\"),\n        signature: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"citations_delta\"),\n        citation: citationSchema\n      })\n    ])\n  }),\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"content_block_stop\"),\n    index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n  }),\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"error\"),\n    error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    })\n  }),\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message_delta\"),\n    delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ stop_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish() }),\n    usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ output_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number() })\n  }),\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message_stop\")\n  }),\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"ping\")\n  })\n]);\nvar anthropicReasoningMetadataSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  signature: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  redactedData: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\n\n// src/tool/bash_20241022.ts\n\n\nvar bash_20241022 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"anthropic.bash_20241022\",\n  name: \"bash\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_3__[\"default\"].object({\n    command: zod_v4__WEBPACK_IMPORTED_MODULE_3__[\"default\"].string(),\n    restart: zod_v4__WEBPACK_IMPORTED_MODULE_3__[\"default\"].boolean().optional()\n  })\n});\n\n// src/tool/bash_20250124.ts\n\n\nvar bash_20250124 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"anthropic.bash_20250124\",\n  name: \"bash\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_3__[\"default\"].object({\n    command: zod_v4__WEBPACK_IMPORTED_MODULE_3__[\"default\"].string(),\n    restart: zod_v4__WEBPACK_IMPORTED_MODULE_3__[\"default\"].boolean().optional()\n  })\n});\n\n// src/tool/computer_20241022.ts\n\n\nvar computer_20241022 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"anthropic.computer_20241022\",\n  name: \"computer\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    action: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n      \"key\",\n      \"type\",\n      \"mouse_move\",\n      \"left_click\",\n      \"left_click_drag\",\n      \"right_click\",\n      \"middle_click\",\n      \"double_click\",\n      \"screenshot\",\n      \"cursor_position\"\n    ]),\n    coordinate: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int()).optional(),\n    text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n  })\n});\n\n// src/tool/computer_20250124.ts\n\n\nvar computer_20250124 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"anthropic.computer_20250124\",\n  name: \"computer\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    action: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n      \"key\",\n      \"hold_key\",\n      \"type\",\n      \"cursor_position\",\n      \"mouse_move\",\n      \"left_mouse_down\",\n      \"left_mouse_up\",\n      \"left_click\",\n      \"left_click_drag\",\n      \"right_click\",\n      \"middle_click\",\n      \"double_click\",\n      \"triple_click\",\n      \"scroll\",\n      \"wait\",\n      \"screenshot\"\n    ]),\n    coordinate: zod_v4__WEBPACK_IMPORTED_MODULE_0__.tuple([zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int()]).optional(),\n    duration: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    scroll_amount: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    scroll_direction: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"up\", \"down\", \"left\", \"right\"]).optional(),\n    start_coordinate: zod_v4__WEBPACK_IMPORTED_MODULE_0__.tuple([zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int()]).optional(),\n    text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n  })\n});\n\n// src/tool/text-editor_20241022.ts\n\n\nvar textEditor_20241022 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"anthropic.text_editor_20241022\",\n  name: \"str_replace_editor\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    command: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"view\", \"create\", \"str_replace\", \"insert\", \"undo_edit\"]),\n    path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    file_text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    insert_line: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int().optional(),\n    new_str: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    old_str: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    view_range: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int()).optional()\n  })\n});\n\n// src/tool/text-editor_20250124.ts\n\n\nvar textEditor_20250124 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"anthropic.text_editor_20250124\",\n  name: \"str_replace_editor\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    command: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"view\", \"create\", \"str_replace\", \"insert\", \"undo_edit\"]),\n    path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    file_text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    insert_line: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int().optional(),\n    new_str: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    old_str: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    view_range: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int()).optional()\n  })\n});\n\n// src/tool/text-editor_20250429.ts\n\n\nvar textEditor_20250429 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"anthropic.text_editor_20250429\",\n  name: \"str_replace_based_edit_tool\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    command: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"view\", \"create\", \"str_replace\", \"insert\"]),\n    path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    file_text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    insert_line: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int().optional(),\n    new_str: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    old_str: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    view_range: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int()).optional()\n  })\n});\n\n// src/anthropic-tools.ts\nvar anthropicTools = {\n  /**\n   * The bash tool enables Claude to execute shell commands in a persistent bash session,\n   * allowing system operations, script execution, and command-line automation.\n   *\n   * Image results are supported.\n   *\n   * Tool name must be `bash`.\n   */\n  bash_20241022,\n  /**\n   * The bash tool enables Claude to execute shell commands in a persistent bash session,\n   * allowing system operations, script execution, and command-line automation.\n   *\n   * Image results are supported.\n   *\n   * Tool name must be `bash`.\n   */\n  bash_20250124,\n  /**\n   * Claude can analyze data, create visualizations, perform complex calculations,\n   * run system commands, create and edit files, and process uploaded files directly within\n   * the API conversation.\n   *\n   * The code execution tool allows Claude to run Bash commands and manipulate files,\n   * including writing code, in a secure, sandboxed environment.\n   *\n   * Tool name must be `code_execution`.\n   */\n  codeExecution_20250522,\n  /**\n   * Claude can interact with computer environments through the computer use tool, which\n   * provides screenshot capabilities and mouse/keyboard control for autonomous desktop interaction.\n   *\n   * Image results are supported.\n   *\n   * Tool name must be `computer`.\n   *\n   * @param displayWidthPx - The width of the display being controlled by the model in pixels.\n   * @param displayHeightPx - The height of the display being controlled by the model in pixels.\n   * @param displayNumber - The display number to control (only relevant for X11 environments). If specified, the tool will be provided a display number in the tool definition.\n   */\n  computer_20241022,\n  /**\n   * Claude can interact with computer environments through the computer use tool, which\n   * provides screenshot capabilities and mouse/keyboard control for autonomous desktop interaction.\n   *\n   * Image results are supported.\n   *\n   * Tool name must be `computer`.\n   *\n   * @param displayWidthPx - The width of the display being controlled by the model in pixels.\n   * @param displayHeightPx - The height of the display being controlled by the model in pixels.\n   * @param displayNumber - The display number to control (only relevant for X11 environments). If specified, the tool will be provided a display number in the tool definition.\n   */\n  computer_20250124,\n  /**\n   * Claude can use an Anthropic-defined text editor tool to view and modify text files,\n   * helping you debug, fix, and improve your code or other text documents. This allows Claude\n   * to directly interact with your files, providing hands-on assistance rather than just suggesting changes.\n   *\n   * Tool name must be `str_replace_editor`.\n   */\n  textEditor_20241022,\n  /**\n   * Claude can use an Anthropic-defined text editor tool to view and modify text files,\n   * helping you debug, fix, and improve your code or other text documents. This allows Claude\n   * to directly interact with your files, providing hands-on assistance rather than just suggesting changes.\n   *\n   * Tool name must be `str_replace_editor`.\n   */\n  textEditor_20250124,\n  /**\n   * Claude can use an Anthropic-defined text editor tool to view and modify text files,\n   * helping you debug, fix, and improve your code or other text documents. This allows Claude\n   * to directly interact with your files, providing hands-on assistance rather than just suggesting changes.\n   *\n   * Note: This version does not support the \"undo_edit\" command.\n   *\n   * Tool name must be `str_replace_based_edit_tool`.\n   */\n  textEditor_20250429,\n  /**\n   * Creates a web search tool that gives Claude direct access to real-time web content.\n   *\n   * Tool name must be `web_search`.\n   *\n   * @param maxUses - Maximum number of web searches Claude can perform during the conversation.\n   * @param allowedDomains - Optional list of domains that Claude is allowed to search.\n   * @param blockedDomains - Optional list of domains that Claude should avoid when searching.\n   * @param userLocation - Optional user location information to provide geographically relevant search results.\n   */\n  webSearch_20250305\n};\n\n// src/anthropic-provider.ts\nfunction createAnthropic(options = {}) {\n  var _a;\n  const baseURL = (_a = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.withoutTrailingSlash)(options.baseURL)) != null ? _a : \"https://api.anthropic.com/v1\";\n  const getHeaders = () => ({\n    \"anthropic-version\": \"2023-06-01\",\n    \"x-api-key\": (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.loadApiKey)({\n      apiKey: options.apiKey,\n      environmentVariableName: \"ANTHROPIC_API_KEY\",\n      description: \"Anthropic\"\n    }),\n    ...options.headers\n  });\n  const createChatModel = (modelId) => {\n    var _a2;\n    return new AnthropicMessagesLanguageModel(modelId, {\n      provider: \"anthropic.messages\",\n      baseURL,\n      headers: getHeaders,\n      fetch: options.fetch,\n      generateId: (_a2 = options.generateId) != null ? _a2 : _ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId,\n      supportedUrls: () => ({\n        \"image/*\": [/^https?:\\/\\/.*$/]\n      })\n    });\n  };\n  const provider = function(modelId) {\n    if (new.target) {\n      throw new Error(\n        \"The Anthropic model function cannot be called with the new keyword.\"\n      );\n    }\n    return createChatModel(modelId);\n  };\n  provider.languageModel = createChatModel;\n  provider.chat = createChatModel;\n  provider.messages = createChatModel;\n  provider.textEmbeddingModel = (modelId) => {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.NoSuchModelError({ modelId, modelType: \"textEmbeddingModel\" });\n  };\n  provider.imageModel = (modelId) => {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.NoSuchModelError({ modelId, modelType: \"imageModel\" });\n  };\n  provider.tools = anthropicTools;\n  return provider;\n}\nvar anthropic = createAnthropic();\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGFpLXNkaythbnRocm9waWNAMi4wLjE3X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9AYWktc2RrL2FudGhyb3BpYy9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUcwQjtBQUtNOztBQUVoQztBQUcwQjtBQVNNO0FBQ0M7O0FBRWpDO0FBQ3dFO0FBQzdDO0FBQzNCLCtCQUErQiwwQ0FBUTtBQUN2QyxRQUFRLDJDQUFTO0FBQ2pCLFNBQVMsMENBQVE7QUFDakIsVUFBVSwwQ0FBUTtBQUNsQixhQUFhLDBDQUFRO0FBQ3JCLEdBQUc7QUFDSCxDQUFDO0FBQ0QscUNBQXFDLHNGQUE4QjtBQUNuRTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNpQztBQUNqQyx1Q0FBdUMsMENBQVM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDBDQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLGFBQWEsMkNBQVU7QUFDdkIsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywwQ0FBUztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywwQ0FBUztBQUNwQixDQUFDO0FBQ0QsK0JBQStCLDBDQUFTO0FBQ3hDLGlCQUFpQiwyQ0FBVTtBQUMzQixZQUFZLDBDQUFTO0FBQ3JCLFVBQVUseUNBQVEsRUFBRSwyQ0FBVSxhQUFhLDJDQUFVO0FBQ3JELGtCQUFrQiwwQ0FBUztBQUMzQixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMkNBQVU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQVM7QUFDekIsVUFBVSwyQ0FBVTtBQUNwQixTQUFTLHlDQUFRLEVBQUUsMkNBQVUsUUFBUSwyQ0FBVTtBQUMvQyxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUcwQjs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMEY7QUFD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QkFBeUI7QUFDekI7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsdUJBQXVCO0FBQ3ZCLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxpQkFBaUI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBLHdCQUF3Qiw0RUFBb0I7QUFDNUM7QUFDQTtBQUNBLGlCQUFpQixrRUFBVTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsOERBQVc7QUFDeEU7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDhEQUFnQixHQUFHLDBDQUEwQztBQUMzRTtBQUNBO0FBQ0EsY0FBYyw4REFBZ0IsR0FBRyxrQ0FBa0M7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy91dHNhdnNoYXJtYS9Eb2N1bWVudHMvR2l0SHViL0RpdkhhY2tzMjAyNS9ub2RlX21vZHVsZXMvLnBucG0vQGFpLXNkaythbnRocm9waWNAMi4wLjE3X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9AYWktc2RrL2FudGhyb3BpYy9kaXN0L2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYW50aHJvcGljLXByb3ZpZGVyLnRzXG5pbXBvcnQge1xuICBOb1N1Y2hNb2RlbEVycm9yXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5pbXBvcnQge1xuICBnZW5lcmF0ZUlkIGFzIGdlbmVyYXRlSWQyLFxuICBsb2FkQXBpS2V5LFxuICB3aXRob3V0VHJhaWxpbmdTbGFzaFxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuXG4vLyBzcmMvYW50aHJvcGljLW1lc3NhZ2VzLWxhbmd1YWdlLW1vZGVsLnRzXG5pbXBvcnQge1xuICBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvciBhcyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjNcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXJcIjtcbmltcG9ydCB7XG4gIGNvbWJpbmVIZWFkZXJzLFxuICBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlcixcbiAgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcixcbiAgZ2VuZXJhdGVJZCxcbiAgcGFyc2VQcm92aWRlck9wdGlvbnMgYXMgcGFyc2VQcm92aWRlck9wdGlvbnMyLFxuICBwb3N0SnNvblRvQXBpLFxuICByZXNvbHZlXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHo1IH0gZnJvbSBcInpvZC92NFwiO1xuXG4vLyBzcmMvYW50aHJvcGljLWVycm9yLnRzXG5pbXBvcnQgeyBjcmVhdGVKc29uRXJyb3JSZXNwb25zZUhhbmRsZXIgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBhbnRocm9waWNFcnJvckRhdGFTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHR5cGU6IHoubGl0ZXJhbChcImVycm9yXCIpLFxuICBlcnJvcjogei5vYmplY3Qoe1xuICAgIHR5cGU6IHouc3RyaW5nKCksXG4gICAgbWVzc2FnZTogei5zdHJpbmcoKVxuICB9KVxufSk7XG52YXIgYW50aHJvcGljRmFpbGVkUmVzcG9uc2VIYW5kbGVyID0gY3JlYXRlSnNvbkVycm9yUmVzcG9uc2VIYW5kbGVyKHtcbiAgZXJyb3JTY2hlbWE6IGFudGhyb3BpY0Vycm9yRGF0YVNjaGVtYSxcbiAgZXJyb3JUb01lc3NhZ2U6IChkYXRhKSA9PiBkYXRhLmVycm9yLm1lc3NhZ2Vcbn0pO1xuXG4vLyBzcmMvYW50aHJvcGljLW1lc3NhZ2VzLW9wdGlvbnMudHNcbmltcG9ydCB7IHogYXMgejIgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgYW50aHJvcGljRmlsZVBhcnRQcm92aWRlck9wdGlvbnMgPSB6Mi5vYmplY3Qoe1xuICAvKipcbiAgICogQ2l0YXRpb24gY29uZmlndXJhdGlvbiBmb3IgdGhpcyBkb2N1bWVudC5cbiAgICogV2hlbiBlbmFibGVkLCB0aGlzIGRvY3VtZW50IHdpbGwgZ2VuZXJhdGUgY2l0YXRpb25zIGluIHRoZSByZXNwb25zZS5cbiAgICovXG4gIGNpdGF0aW9uczogejIub2JqZWN0KHtcbiAgICAvKipcbiAgICAgKiBFbmFibGUgY2l0YXRpb25zIGZvciB0aGlzIGRvY3VtZW50XG4gICAgICovXG4gICAgZW5hYmxlZDogejIuYm9vbGVhbigpXG4gIH0pLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBDdXN0b20gdGl0bGUgZm9yIHRoZSBkb2N1bWVudC5cbiAgICogSWYgbm90IHByb3ZpZGVkLCB0aGUgZmlsZW5hbWUgd2lsbCBiZSB1c2VkLlxuICAgKi9cbiAgdGl0bGU6IHoyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBDb250ZXh0IGFib3V0IHRoZSBkb2N1bWVudCB0aGF0IHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBtb2RlbFxuICAgKiBidXQgbm90IHVzZWQgdG93YXJkcyBjaXRlZCBjb250ZW50LlxuICAgKiBVc2VmdWwgZm9yIHN0b3JpbmcgZG9jdW1lbnQgbWV0YWRhdGEgYXMgdGV4dCBvciBzdHJpbmdpZmllZCBKU09OLlxuICAgKi9cbiAgY29udGV4dDogejIuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgYW50aHJvcGljUHJvdmlkZXJPcHRpb25zID0gejIub2JqZWN0KHtcbiAgc2VuZFJlYXNvbmluZzogejIuYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gIHRoaW5raW5nOiB6Mi5vYmplY3Qoe1xuICAgIHR5cGU6IHoyLnVuaW9uKFt6Mi5saXRlcmFsKFwiZW5hYmxlZFwiKSwgejIubGl0ZXJhbChcImRpc2FibGVkXCIpXSksXG4gICAgYnVkZ2V0VG9rZW5zOiB6Mi5udW1iZXIoKS5vcHRpb25hbCgpXG4gIH0pLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGRpc2FibGUgcGFyYWxsZWwgZnVuY3Rpb24gY2FsbGluZyBkdXJpbmcgdG9vbCB1c2UuIERlZmF1bHQgaXMgZmFsc2UuXG4gICAqIFdoZW4gc2V0IHRvIHRydWUsIENsYXVkZSB3aWxsIHVzZSBhdCBtb3N0IG9uZSB0b29sIHBlciByZXNwb25zZS5cbiAgICovXG4gIGRpc2FibGVQYXJhbGxlbFRvb2xVc2U6IHoyLmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogQ2FjaGUgY29udHJvbCBzZXR0aW5ncyBmb3IgdGhpcyBtZXNzYWdlLlxuICAgKiBTZWUgaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9idWlsZC13aXRoLWNsYXVkZS9wcm9tcHQtY2FjaGluZ1xuICAgKi9cbiAgY2FjaGVDb250cm9sOiB6Mi5vYmplY3Qoe1xuICAgIHR5cGU6IHoyLmxpdGVyYWwoXCJlcGhlbWVyYWxcIiksXG4gICAgdHRsOiB6Mi51bmlvbihbejIubGl0ZXJhbChcIjVtXCIpLCB6Mi5saXRlcmFsKFwiMWhcIildKS5vcHRpb25hbCgpXG4gIH0pLm9wdGlvbmFsKClcbn0pO1xuXG4vLyBzcmMvYW50aHJvcGljLXByZXBhcmUtdG9vbHMudHNcbmltcG9ydCB7XG4gIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5cbi8vIHNyYy9nZXQtY2FjaGUtY29udHJvbC50c1xuZnVuY3Rpb24gZ2V0Q2FjaGVDb250cm9sKHByb3ZpZGVyTWV0YWRhdGEpIHtcbiAgdmFyIF9hO1xuICBjb25zdCBhbnRocm9waWMyID0gcHJvdmlkZXJNZXRhZGF0YSA9PSBudWxsID8gdm9pZCAwIDogcHJvdmlkZXJNZXRhZGF0YS5hbnRocm9waWM7XG4gIGNvbnN0IGNhY2hlQ29udHJvbFZhbHVlID0gKF9hID0gYW50aHJvcGljMiA9PSBudWxsID8gdm9pZCAwIDogYW50aHJvcGljMi5jYWNoZUNvbnRyb2wpICE9IG51bGwgPyBfYSA6IGFudGhyb3BpYzIgPT0gbnVsbCA/IHZvaWQgMCA6IGFudGhyb3BpYzIuY2FjaGVfY29udHJvbDtcbiAgcmV0dXJuIGNhY2hlQ29udHJvbFZhbHVlO1xufVxuXG4vLyBzcmMvdG9vbC93ZWItc2VhcmNoXzIwMjUwMzA1LnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MyB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciB3ZWJTZWFyY2hfMjAyNTAzMDVBcmdzU2NoZW1hID0gejMub2JqZWN0KHtcbiAgLyoqXG4gICAqIE1heGltdW0gbnVtYmVyIG9mIHdlYiBzZWFyY2hlcyBDbGF1ZGUgY2FuIHBlcmZvcm0gZHVyaW5nIHRoZSBjb252ZXJzYXRpb24uXG4gICAqL1xuICBtYXhVc2VzOiB6My5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogT3B0aW9uYWwgbGlzdCBvZiBkb21haW5zIHRoYXQgQ2xhdWRlIGlzIGFsbG93ZWQgdG8gc2VhcmNoLlxuICAgKi9cbiAgYWxsb3dlZERvbWFpbnM6IHozLmFycmF5KHozLnN0cmluZygpKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogT3B0aW9uYWwgbGlzdCBvZiBkb21haW5zIHRoYXQgQ2xhdWRlIHNob3VsZCBhdm9pZCB3aGVuIHNlYXJjaGluZy5cbiAgICovXG4gIGJsb2NrZWREb21haW5zOiB6My5hcnJheSh6My5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIE9wdGlvbmFsIHVzZXIgbG9jYXRpb24gaW5mb3JtYXRpb24gdG8gcHJvdmlkZSBnZW9ncmFwaGljYWxseSByZWxldmFudCBzZWFyY2ggcmVzdWx0cy5cbiAgICovXG4gIHVzZXJMb2NhdGlvbjogejMub2JqZWN0KHtcbiAgICB0eXBlOiB6My5saXRlcmFsKFwiYXBwcm94aW1hdGVcIiksXG4gICAgY2l0eTogejMuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZWdpb246IHozLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY291bnRyeTogejMuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB0aW1lem9uZTogejMuc3RyaW5nKCkub3B0aW9uYWwoKVxuICB9KS5vcHRpb25hbCgpXG59KTtcbnZhciB3ZWJTZWFyY2hfMjAyNTAzMDVPdXRwdXRTY2hlbWEgPSB6My5hcnJheShcbiAgejMub2JqZWN0KHtcbiAgICB1cmw6IHozLnN0cmluZygpLFxuICAgIHRpdGxlOiB6My5zdHJpbmcoKSxcbiAgICBwYWdlQWdlOiB6My5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIGVuY3J5cHRlZENvbnRlbnQ6IHozLnN0cmluZygpLFxuICAgIHR5cGU6IHozLnN0cmluZygpXG4gIH0pXG4pO1xudmFyIGZhY3RvcnkgPSBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEoe1xuICBpZDogXCJhbnRocm9waWMud2ViX3NlYXJjaF8yMDI1MDMwNVwiLFxuICBuYW1lOiBcIndlYl9zZWFyY2hcIixcbiAgaW5wdXRTY2hlbWE6IHozLm9iamVjdCh7XG4gICAgcXVlcnk6IHozLnN0cmluZygpXG4gIH0pLFxuICBvdXRwdXRTY2hlbWE6IHdlYlNlYXJjaF8yMDI1MDMwNU91dHB1dFNjaGVtYVxufSk7XG52YXIgd2ViU2VhcmNoXzIwMjUwMzA1ID0gKGFyZ3MgPSB7fSkgPT4ge1xuICByZXR1cm4gZmFjdG9yeShhcmdzKTtcbn07XG5cbi8vIHNyYy9hbnRocm9waWMtcHJlcGFyZS10b29scy50c1xuZnVuY3Rpb24gaXNXZWJTZWFyY2hUb29sKHRvb2wpIHtcbiAgcmV0dXJuIHR5cGVvZiB0b29sID09PSBcIm9iamVjdFwiICYmIHRvb2wgIT09IG51bGwgJiYgXCJ0eXBlXCIgaW4gdG9vbCAmJiB0b29sLnR5cGUgPT09IFwid2ViX3NlYXJjaF8yMDI1MDMwNVwiO1xufVxuZnVuY3Rpb24gcHJlcGFyZVRvb2xzKHtcbiAgdG9vbHMsXG4gIHRvb2xDaG9pY2UsXG4gIGRpc2FibGVQYXJhbGxlbFRvb2xVc2Vcbn0pIHtcbiAgdG9vbHMgPSAodG9vbHMgPT0gbnVsbCA/IHZvaWQgMCA6IHRvb2xzLmxlbmd0aCkgPyB0b29scyA6IHZvaWQgMDtcbiAgY29uc3QgdG9vbFdhcm5pbmdzID0gW107XG4gIGNvbnN0IGJldGFzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgaWYgKHRvb2xzID09IG51bGwpIHtcbiAgICByZXR1cm4geyB0b29sczogdm9pZCAwLCB0b29sQ2hvaWNlOiB2b2lkIDAsIHRvb2xXYXJuaW5ncywgYmV0YXMgfTtcbiAgfVxuICBjb25zdCBhbnRocm9waWNUb29sczIgPSBbXTtcbiAgZm9yIChjb25zdCB0b29sIG9mIHRvb2xzKSB7XG4gICAgaWYgKGlzV2ViU2VhcmNoVG9vbCh0b29sKSkge1xuICAgICAgYW50aHJvcGljVG9vbHMyLnB1c2godG9vbCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgc3dpdGNoICh0b29sLnR5cGUpIHtcbiAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICBjb25zdCBjYWNoZUNvbnRyb2wgPSBnZXRDYWNoZUNvbnRyb2wodG9vbC5wcm92aWRlck9wdGlvbnMpO1xuICAgICAgICBhbnRocm9waWNUb29sczIucHVzaCh7XG4gICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIGlucHV0X3NjaGVtYTogdG9vbC5pbnB1dFNjaGVtYSxcbiAgICAgICAgICBjYWNoZV9jb250cm9sOiBjYWNoZUNvbnRyb2xcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInByb3ZpZGVyLWRlZmluZWRcIjpcbiAgICAgICAgc3dpdGNoICh0b29sLmlkKSB7XG4gICAgICAgICAgY2FzZSBcImFudGhyb3BpYy5jb21wdXRlcl8yMDI1MDEyNFwiOlxuICAgICAgICAgICAgYmV0YXMuYWRkKFwiY29tcHV0ZXItdXNlLTIwMjUtMDEtMjRcIik7XG4gICAgICAgICAgICBhbnRocm9waWNUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwiY29tcHV0ZXJcIixcbiAgICAgICAgICAgICAgdHlwZTogXCJjb21wdXRlcl8yMDI1MDEyNFwiLFxuICAgICAgICAgICAgICBkaXNwbGF5X3dpZHRoX3B4OiB0b29sLmFyZ3MuZGlzcGxheVdpZHRoUHgsXG4gICAgICAgICAgICAgIGRpc3BsYXlfaGVpZ2h0X3B4OiB0b29sLmFyZ3MuZGlzcGxheUhlaWdodFB4LFxuICAgICAgICAgICAgICBkaXNwbGF5X251bWJlcjogdG9vbC5hcmdzLmRpc3BsYXlOdW1iZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImFudGhyb3BpYy5jb21wdXRlcl8yMDI0MTAyMlwiOlxuICAgICAgICAgICAgYmV0YXMuYWRkKFwiY29tcHV0ZXItdXNlLTIwMjQtMTAtMjJcIik7XG4gICAgICAgICAgICBhbnRocm9waWNUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwiY29tcHV0ZXJcIixcbiAgICAgICAgICAgICAgdHlwZTogXCJjb21wdXRlcl8yMDI0MTAyMlwiLFxuICAgICAgICAgICAgICBkaXNwbGF5X3dpZHRoX3B4OiB0b29sLmFyZ3MuZGlzcGxheVdpZHRoUHgsXG4gICAgICAgICAgICAgIGRpc3BsYXlfaGVpZ2h0X3B4OiB0b29sLmFyZ3MuZGlzcGxheUhlaWdodFB4LFxuICAgICAgICAgICAgICBkaXNwbGF5X251bWJlcjogdG9vbC5hcmdzLmRpc3BsYXlOdW1iZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImFudGhyb3BpYy50ZXh0X2VkaXRvcl8yMDI1MDEyNFwiOlxuICAgICAgICAgICAgYmV0YXMuYWRkKFwiY29tcHV0ZXItdXNlLTIwMjUtMDEtMjRcIik7XG4gICAgICAgICAgICBhbnRocm9waWNUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwic3RyX3JlcGxhY2VfZWRpdG9yXCIsXG4gICAgICAgICAgICAgIHR5cGU6IFwidGV4dF9lZGl0b3JfMjAyNTAxMjRcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiYW50aHJvcGljLnRleHRfZWRpdG9yXzIwMjQxMDIyXCI6XG4gICAgICAgICAgICBiZXRhcy5hZGQoXCJjb21wdXRlci11c2UtMjAyNC0xMC0yMlwiKTtcbiAgICAgICAgICAgIGFudGhyb3BpY1Rvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgbmFtZTogXCJzdHJfcmVwbGFjZV9lZGl0b3JcIixcbiAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0X2VkaXRvcl8yMDI0MTAyMlwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJhbnRocm9waWMudGV4dF9lZGl0b3JfMjAyNTA0MjlcIjpcbiAgICAgICAgICAgIGJldGFzLmFkZChcImNvbXB1dGVyLXVzZS0yMDI1LTAxLTI0XCIpO1xuICAgICAgICAgICAgYW50aHJvcGljVG9vbHMyLnB1c2goe1xuICAgICAgICAgICAgICBuYW1lOiBcInN0cl9yZXBsYWNlX2Jhc2VkX2VkaXRfdG9vbFwiLFxuICAgICAgICAgICAgICB0eXBlOiBcInRleHRfZWRpdG9yXzIwMjUwNDI5XCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImFudGhyb3BpYy5iYXNoXzIwMjUwMTI0XCI6XG4gICAgICAgICAgICBiZXRhcy5hZGQoXCJjb21wdXRlci11c2UtMjAyNS0wMS0yNFwiKTtcbiAgICAgICAgICAgIGFudGhyb3BpY1Rvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgbmFtZTogXCJiYXNoXCIsXG4gICAgICAgICAgICAgIHR5cGU6IFwiYmFzaF8yMDI1MDEyNFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJhbnRocm9waWMuYmFzaF8yMDI0MTAyMlwiOlxuICAgICAgICAgICAgYmV0YXMuYWRkKFwiY29tcHV0ZXItdXNlLTIwMjQtMTAtMjJcIik7XG4gICAgICAgICAgICBhbnRocm9waWNUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwiYmFzaFwiLFxuICAgICAgICAgICAgICB0eXBlOiBcImJhc2hfMjAyNDEwMjJcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiYW50aHJvcGljLndlYl9zZWFyY2hfMjAyNTAzMDVcIjoge1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IHdlYlNlYXJjaF8yMDI1MDMwNUFyZ3NTY2hlbWEucGFyc2UodG9vbC5hcmdzKTtcbiAgICAgICAgICAgIGFudGhyb3BpY1Rvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ3ZWJfc2VhcmNoXzIwMjUwMzA1XCIsXG4gICAgICAgICAgICAgIG5hbWU6IFwid2ViX3NlYXJjaFwiLFxuICAgICAgICAgICAgICBtYXhfdXNlczogYXJncy5tYXhVc2VzLFxuICAgICAgICAgICAgICBhbGxvd2VkX2RvbWFpbnM6IGFyZ3MuYWxsb3dlZERvbWFpbnMsXG4gICAgICAgICAgICAgIGJsb2NrZWRfZG9tYWluczogYXJncy5ibG9ja2VkRG9tYWlucyxcbiAgICAgICAgICAgICAgdXNlcl9sb2NhdGlvbjogYXJncy51c2VyTG9jYXRpb25cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJhbnRocm9waWMuY29kZV9leGVjdXRpb25fMjAyNTA1MjJcIjoge1xuICAgICAgICAgICAgYmV0YXMuYWRkKFwiY29kZS1leGVjdXRpb24tMjAyNS0wNS0yMlwiKTtcbiAgICAgICAgICAgIGFudGhyb3BpY1Rvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJjb2RlX2V4ZWN1dGlvbl8yMDI1MDUyMlwiLFxuICAgICAgICAgICAgICBuYW1lOiBcImNvZGVfZXhlY3V0aW9uXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0b29sV2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWQtdG9vbFwiLCB0b29sIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0b29sV2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWQtdG9vbFwiLCB0b29sIH0pO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgaWYgKHRvb2xDaG9pY2UgPT0gbnVsbCkge1xuICAgIHJldHVybiB7XG4gICAgICB0b29sczogYW50aHJvcGljVG9vbHMyLFxuICAgICAgdG9vbENob2ljZTogZGlzYWJsZVBhcmFsbGVsVG9vbFVzZSA/IHsgdHlwZTogXCJhdXRvXCIsIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U6IGRpc2FibGVQYXJhbGxlbFRvb2xVc2UgfSA6IHZvaWQgMCxcbiAgICAgIHRvb2xXYXJuaW5ncyxcbiAgICAgIGJldGFzXG4gICAgfTtcbiAgfVxuICBjb25zdCB0eXBlID0gdG9vbENob2ljZS50eXBlO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFwiYXV0b1wiOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9vbHM6IGFudGhyb3BpY1Rvb2xzMixcbiAgICAgICAgdG9vbENob2ljZToge1xuICAgICAgICAgIHR5cGU6IFwiYXV0b1wiLFxuICAgICAgICAgIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U6IGRpc2FibGVQYXJhbGxlbFRvb2xVc2VcbiAgICAgICAgfSxcbiAgICAgICAgdG9vbFdhcm5pbmdzLFxuICAgICAgICBiZXRhc1xuICAgICAgfTtcbiAgICBjYXNlIFwicmVxdWlyZWRcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvb2xzOiBhbnRocm9waWNUb29sczIsXG4gICAgICAgIHRvb2xDaG9pY2U6IHtcbiAgICAgICAgICB0eXBlOiBcImFueVwiLFxuICAgICAgICAgIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U6IGRpc2FibGVQYXJhbGxlbFRvb2xVc2VcbiAgICAgICAgfSxcbiAgICAgICAgdG9vbFdhcm5pbmdzLFxuICAgICAgICBiZXRhc1xuICAgICAgfTtcbiAgICBjYXNlIFwibm9uZVwiOlxuICAgICAgcmV0dXJuIHsgdG9vbHM6IHZvaWQgMCwgdG9vbENob2ljZTogdm9pZCAwLCB0b29sV2FybmluZ3MsIGJldGFzIH07XG4gICAgY2FzZSBcInRvb2xcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvb2xzOiBhbnRocm9waWNUb29sczIsXG4gICAgICAgIHRvb2xDaG9pY2U6IHtcbiAgICAgICAgICB0eXBlOiBcInRvb2xcIixcbiAgICAgICAgICBuYW1lOiB0b29sQ2hvaWNlLnRvb2xOYW1lLFxuICAgICAgICAgIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U6IGRpc2FibGVQYXJhbGxlbFRvb2xVc2VcbiAgICAgICAgfSxcbiAgICAgICAgdG9vbFdhcm5pbmdzLFxuICAgICAgICBiZXRhc1xuICAgICAgfTtcbiAgICBkZWZhdWx0OiB7XG4gICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gdHlwZTtcbiAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcih7XG4gICAgICAgIGZ1bmN0aW9uYWxpdHk6IGB0b29sIGNob2ljZSB0eXBlOiAke19leGhhdXN0aXZlQ2hlY2t9YFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbi8vIHNyYy9jb252ZXJ0LXRvLWFudGhyb3BpYy1tZXNzYWdlcy1wcm9tcHQudHNcbmltcG9ydCB7XG4gIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yIGFzIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yMlxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuaW1wb3J0IHsgY29udmVydFRvQmFzZTY0LCBwYXJzZVByb3ZpZGVyT3B0aW9ucyB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5cbi8vIHNyYy90b29sL2NvZGUtZXhlY3V0aW9uXzIwMjUwNTIyLnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEgYXMgY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hMiB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHo0IH0gZnJvbSBcInpvZC92NFwiO1xudmFyIGNvZGVFeGVjdXRpb25fMjAyNTA1MjJPdXRwdXRTY2hlbWEgPSB6NC5vYmplY3Qoe1xuICB0eXBlOiB6NC5saXRlcmFsKFwiY29kZV9leGVjdXRpb25fcmVzdWx0XCIpLFxuICBzdGRvdXQ6IHo0LnN0cmluZygpLFxuICBzdGRlcnI6IHo0LnN0cmluZygpLFxuICByZXR1cm5fY29kZTogejQubnVtYmVyKClcbn0pO1xudmFyIGZhY3RvcnkyID0gY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hMih7XG4gIGlkOiBcImFudGhyb3BpYy5jb2RlX2V4ZWN1dGlvbl8yMDI1MDUyMlwiLFxuICBuYW1lOiBcImNvZGVfZXhlY3V0aW9uXCIsXG4gIGlucHV0U2NoZW1hOiB6NC5vYmplY3Qoe1xuICAgIGNvZGU6IHo0LnN0cmluZygpXG4gIH0pLFxuICBvdXRwdXRTY2hlbWE6IGNvZGVFeGVjdXRpb25fMjAyNTA1MjJPdXRwdXRTY2hlbWFcbn0pO1xudmFyIGNvZGVFeGVjdXRpb25fMjAyNTA1MjIgPSAoYXJncyA9IHt9KSA9PiB7XG4gIHJldHVybiBmYWN0b3J5MihhcmdzKTtcbn07XG5cbi8vIHNyYy9jb252ZXJ0LXRvLWFudGhyb3BpYy1tZXNzYWdlcy1wcm9tcHQudHNcbmZ1bmN0aW9uIGNvbnZlcnRUb1N0cmluZyhkYXRhKSB7XG4gIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBCdWZmZXIuZnJvbShkYXRhLCBcImJhc2U2NFwiKS50b1N0cmluZyhcInV0Zi04XCIpO1xuICB9XG4gIGlmIChkYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoZGF0YSk7XG4gIH1cbiAgaWYgKGRhdGEgaW5zdGFuY2VvZiBVUkwpIHtcbiAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IyKHtcbiAgICAgIGZ1bmN0aW9uYWxpdHk6IFwiVVJMLWJhc2VkIHRleHQgZG9jdW1lbnRzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBjaXRhdGlvbnNcIlxuICAgIH0pO1xuICB9XG4gIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjIoe1xuICAgIGZ1bmN0aW9uYWxpdHk6IGB1bnN1cHBvcnRlZCBkYXRhIHR5cGUgZm9yIHRleHQgZG9jdW1lbnRzOiAke3R5cGVvZiBkYXRhfWBcbiAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiBjb252ZXJ0VG9BbnRocm9waWNNZXNzYWdlc1Byb21wdCh7XG4gIHByb21wdCxcbiAgc2VuZFJlYXNvbmluZyxcbiAgd2FybmluZ3Ncbn0pIHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgY29uc3QgYmV0YXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBjb25zdCBibG9ja3MgPSBncm91cEludG9CbG9ja3MocHJvbXB0KTtcbiAgbGV0IHN5c3RlbSA9IHZvaWQgMDtcbiAgY29uc3QgbWVzc2FnZXMgPSBbXTtcbiAgYXN5bmMgZnVuY3Rpb24gc2hvdWxkRW5hYmxlQ2l0YXRpb25zKHByb3ZpZGVyTWV0YWRhdGEpIHtcbiAgICB2YXIgX2EyLCBfYjI7XG4gICAgY29uc3QgYW50aHJvcGljT3B0aW9ucyA9IGF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zKHtcbiAgICAgIHByb3ZpZGVyOiBcImFudGhyb3BpY1wiLFxuICAgICAgcHJvdmlkZXJPcHRpb25zOiBwcm92aWRlck1ldGFkYXRhLFxuICAgICAgc2NoZW1hOiBhbnRocm9waWNGaWxlUGFydFByb3ZpZGVyT3B0aW9uc1xuICAgIH0pO1xuICAgIHJldHVybiAoX2IyID0gKF9hMiA9IGFudGhyb3BpY09wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IGFudGhyb3BpY09wdGlvbnMuY2l0YXRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmVuYWJsZWQpICE9IG51bGwgPyBfYjIgOiBmYWxzZTtcbiAgfVxuICBhc3luYyBmdW5jdGlvbiBnZXREb2N1bWVudE1ldGFkYXRhKHByb3ZpZGVyTWV0YWRhdGEpIHtcbiAgICBjb25zdCBhbnRocm9waWNPcHRpb25zID0gYXdhaXQgcGFyc2VQcm92aWRlck9wdGlvbnMoe1xuICAgICAgcHJvdmlkZXI6IFwiYW50aHJvcGljXCIsXG4gICAgICBwcm92aWRlck9wdGlvbnM6IHByb3ZpZGVyTWV0YWRhdGEsXG4gICAgICBzY2hlbWE6IGFudGhyb3BpY0ZpbGVQYXJ0UHJvdmlkZXJPcHRpb25zXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiBhbnRocm9waWNPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBhbnRocm9waWNPcHRpb25zLnRpdGxlLFxuICAgICAgY29udGV4dDogYW50aHJvcGljT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogYW50aHJvcGljT3B0aW9ucy5jb250ZXh0XG4gICAgfTtcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGJsb2Nrcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGJsb2NrID0gYmxvY2tzW2ldO1xuICAgIGNvbnN0IGlzTGFzdEJsb2NrID0gaSA9PT0gYmxvY2tzLmxlbmd0aCAtIDE7XG4gICAgY29uc3QgdHlwZSA9IGJsb2NrLnR5cGU7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIFwic3lzdGVtXCI6IHtcbiAgICAgICAgaWYgKHN5c3RlbSAhPSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yMih7XG4gICAgICAgICAgICBmdW5jdGlvbmFsaXR5OiBcIk11bHRpcGxlIHN5c3RlbSBtZXNzYWdlcyB0aGF0IGFyZSBzZXBhcmF0ZWQgYnkgdXNlci9hc3Npc3RhbnQgbWVzc2FnZXNcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHN5c3RlbSA9IGJsb2NrLm1lc3NhZ2VzLm1hcCgoeyBjb250ZW50LCBwcm92aWRlck9wdGlvbnMgfSkgPT4gKHtcbiAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICB0ZXh0OiBjb250ZW50LFxuICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGdldENhY2hlQ29udHJvbChwcm92aWRlck9wdGlvbnMpXG4gICAgICAgIH0pKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwidXNlclwiOiB7XG4gICAgICAgIGNvbnN0IGFudGhyb3BpY0NvbnRlbnQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIGJsb2NrLm1lc3NhZ2VzKSB7XG4gICAgICAgICAgY29uc3QgeyByb2xlLCBjb250ZW50IH0gPSBtZXNzYWdlO1xuICAgICAgICAgIHN3aXRjaCAocm9sZSkge1xuICAgICAgICAgICAgY2FzZSBcInVzZXJcIjoge1xuICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbnRlbnQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0ID0gY29udGVudFtqXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0xhc3RQYXJ0ID0gaiA9PT0gY29udGVudC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlQ29udHJvbCA9IChfYSA9IGdldENhY2hlQ29udHJvbChwYXJ0LnByb3ZpZGVyT3B0aW9ucykpICE9IG51bGwgPyBfYSA6IGlzTGFzdFBhcnQgPyBnZXRDYWNoZUNvbnRyb2wobWVzc2FnZS5wcm92aWRlck9wdGlvbnMpIDogdm9pZCAwO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocGFydC50eXBlKSB7XG4gICAgICAgICAgICAgICAgICBjYXNlIFwidGV4dFwiOiB7XG4gICAgICAgICAgICAgICAgICAgIGFudGhyb3BpY0NvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgdGV4dDogcGFydC50ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjYXNlIFwiZmlsZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0Lm1lZGlhVHlwZS5zdGFydHNXaXRoKFwiaW1hZ2UvXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgYW50aHJvcGljQ29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaW1hZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogcGFydC5kYXRhIGluc3RhbmNlb2YgVVJMID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcnQuZGF0YS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYV90eXBlOiBwYXJ0Lm1lZGlhVHlwZSA9PT0gXCJpbWFnZS8qXCIgPyBcImltYWdlL2pwZWdcIiA6IHBhcnQubWVkaWFUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjb252ZXJ0VG9CYXNlNjQocGFydC5kYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQubWVkaWFUeXBlID09PSBcImFwcGxpY2F0aW9uL3BkZlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgYmV0YXMuYWRkKFwicGRmcy0yMDI0LTA5LTI1XCIpO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuYWJsZUNpdGF0aW9ucyA9IGF3YWl0IHNob3VsZEVuYWJsZUNpdGF0aW9ucyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQucHJvdmlkZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IGdldERvY3VtZW50TWV0YWRhdGEoXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0LnByb3ZpZGVyT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgYW50aHJvcGljQ29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZG9jdW1lbnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogcGFydC5kYXRhIGluc3RhbmNlb2YgVVJMID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcnQuZGF0YS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYV90eXBlOiBcImFwcGxpY2F0aW9uL3BkZlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjb252ZXJ0VG9CYXNlNjQocGFydC5kYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAoX2IgPSBtZXRhZGF0YS50aXRsZSkgIT0gbnVsbCA/IF9iIDogcGFydC5maWxlbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm1ldGFkYXRhLmNvbnRleHQgJiYgeyBjb250ZXh0OiBtZXRhZGF0YS5jb250ZXh0IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5lbmFibGVDaXRhdGlvbnMgJiYge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjaXRhdGlvbnM6IHsgZW5hYmxlZDogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVfY29udHJvbDogY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydC5tZWRpYVR5cGUgPT09IFwidGV4dC9wbGFpblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5hYmxlQ2l0YXRpb25zID0gYXdhaXQgc2hvdWxkRW5hYmxlQ2l0YXRpb25zKFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5wcm92aWRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXdhaXQgZ2V0RG9jdW1lbnRNZXRhZGF0YShcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQucHJvdmlkZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICBhbnRocm9waWNDb250ZW50LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkb2N1bWVudFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBwYXJ0LmRhdGEgaW5zdGFuY2VvZiBVUkwgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogcGFydC5kYXRhLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYV90eXBlOiBcInRleHQvcGxhaW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogY29udmVydFRvU3RyaW5nKHBhcnQuZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogKF9jID0gbWV0YWRhdGEudGl0bGUpICE9IG51bGwgPyBfYyA6IHBhcnQuZmlsZW5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5tZXRhZGF0YS5jb250ZXh0ICYmIHsgY29udGV4dDogbWV0YWRhdGEuY29udGV4dCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZW5hYmxlQ2l0YXRpb25zICYmIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0YXRpb25zOiB7IGVuYWJsZWQ6IHRydWUgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25hbGl0eTogYG1lZGlhIHR5cGU6ICR7cGFydC5tZWRpYVR5cGV9YFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJ0b29sXCI6IHtcbiAgICAgICAgICAgICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IGNvbnRlbnQubGVuZ3RoOyBpMisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFydCA9IGNvbnRlbnRbaTJdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzTGFzdFBhcnQgPSBpMiA9PT0gY29udGVudC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlQ29udHJvbCA9IChfZCA9IGdldENhY2hlQ29udHJvbChwYXJ0LnByb3ZpZGVyT3B0aW9ucykpICE9IG51bGwgPyBfZCA6IGlzTGFzdFBhcnQgPyBnZXRDYWNoZUNvbnRyb2wobWVzc2FnZS5wcm92aWRlck9wdGlvbnMpIDogdm9pZCAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IHBhcnQub3V0cHV0O1xuICAgICAgICAgICAgICAgIGxldCBjb250ZW50VmFsdWU7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChvdXRwdXQudHlwZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcImNvbnRlbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFZhbHVlID0gb3V0cHV0LnZhbHVlLm1hcCgoY29udGVudFBhcnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbnRlbnRQYXJ0LnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogY29udGVudFBhcnQudGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZV9jb250cm9sOiB2b2lkIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJtZWRpYVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50UGFydC5tZWRpYVR5cGUuc3RhcnRzV2l0aChcImltYWdlL1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImltYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJiYXNlNjRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFfdHlwZTogY29udGVudFBhcnQubWVkaWFUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjb250ZW50UGFydC5kYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVfY29udHJvbDogdm9pZCAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbmFsaXR5OiBgbWVkaWEgdHlwZTogJHtjb250ZW50UGFydC5tZWRpYVR5cGV9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6XG4gICAgICAgICAgICAgICAgICBjYXNlIFwiZXJyb3ItdGV4dFwiOlxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VmFsdWUgPSBvdXRwdXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgY2FzZSBcImpzb25cIjpcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJlcnJvci1qc29uXCI6XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VmFsdWUgPSBKU09OLnN0cmluZ2lmeShvdXRwdXQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYW50aHJvcGljQ29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbF9yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xfdXNlX2lkOiBwYXJ0LnRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50VmFsdWUsXG4gICAgICAgICAgICAgICAgICBpc19lcnJvcjogb3V0cHV0LnR5cGUgPT09IFwiZXJyb3ItdGV4dFwiIHx8IG91dHB1dC50eXBlID09PSBcImVycm9yLWpzb25cIiA/IHRydWUgOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgICBjYWNoZV9jb250cm9sOiBjYWNoZUNvbnRyb2xcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IHJvbGU7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgcm9sZTogJHtfZXhoYXVzdGl2ZUNoZWNrfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IGFudGhyb3BpY0NvbnRlbnQgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcImFzc2lzdGFudFwiOiB7XG4gICAgICAgIGNvbnN0IGFudGhyb3BpY0NvbnRlbnQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBibG9jay5tZXNzYWdlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBibG9jay5tZXNzYWdlc1tqXTtcbiAgICAgICAgICBjb25zdCBpc0xhc3RNZXNzYWdlID0gaiA9PT0gYmxvY2subWVzc2FnZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICBjb25zdCB7IGNvbnRlbnQgfSA9IG1lc3NhZ2U7XG4gICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb250ZW50Lmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJ0ID0gY29udGVudFtrXTtcbiAgICAgICAgICAgIGNvbnN0IGlzTGFzdENvbnRlbnRQYXJ0ID0gayA9PT0gY29udGVudC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgY29uc3QgY2FjaGVDb250cm9sID0gKF9lID0gZ2V0Q2FjaGVDb250cm9sKHBhcnQucHJvdmlkZXJPcHRpb25zKSkgIT0gbnVsbCA/IF9lIDogaXNMYXN0Q29udGVudFBhcnQgPyBnZXRDYWNoZUNvbnRyb2wobWVzc2FnZS5wcm92aWRlck9wdGlvbnMpIDogdm9pZCAwO1xuICAgICAgICAgICAgc3dpdGNoIChwYXJ0LnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgICAgIGFudGhyb3BpY0NvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICAgICAgICAgIHRleHQ6IChcbiAgICAgICAgICAgICAgICAgICAgLy8gdHJpbSB0aGUgbGFzdCB0ZXh0IHBhcnQgaWYgaXQncyB0aGUgbGFzdCBtZXNzYWdlIGluIHRoZSBibG9ja1xuICAgICAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIEFudGhyb3BpYyBkb2VzIG5vdCBhbGxvdyB0cmFpbGluZyB3aGl0ZXNwYWNlXG4gICAgICAgICAgICAgICAgICAgIC8vIGluIHByZS1maWxsZWQgYXNzaXN0YW50IHJlc3BvbnNlc1xuICAgICAgICAgICAgICAgICAgICBpc0xhc3RCbG9jayAmJiBpc0xhc3RNZXNzYWdlICYmIGlzTGFzdENvbnRlbnRQYXJ0ID8gcGFydC50ZXh0LnRyaW0oKSA6IHBhcnQudGV4dFxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNhc2UgXCJyZWFzb25pbmdcIjoge1xuICAgICAgICAgICAgICAgIGlmIChzZW5kUmVhc29uaW5nKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCByZWFzb25pbmdNZXRhZGF0YSA9IGF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zKHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXI6IFwiYW50aHJvcGljXCIsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyT3B0aW9uczogcGFydC5wcm92aWRlck9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYTogYW50aHJvcGljUmVhc29uaW5nTWV0YWRhdGFTY2hlbWFcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgaWYgKHJlYXNvbmluZ01ldGFkYXRhICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlYXNvbmluZ01ldGFkYXRhLnNpZ25hdHVyZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgYW50aHJvcGljQ29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGhpbmtpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaW5raW5nOiBwYXJ0LnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmU6IHJlYXNvbmluZ01ldGFkYXRhLnNpZ25hdHVyZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlYXNvbmluZ01ldGFkYXRhLnJlZGFjdGVkRGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgYW50aHJvcGljQ29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicmVkYWN0ZWRfdGhpbmtpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHJlYXNvbmluZ01ldGFkYXRhLnJlZGFjdGVkRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJ1bnN1cHBvcnRlZCByZWFzb25pbmcgbWV0YWRhdGFcIlxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJ1bnN1cHBvcnRlZCByZWFzb25pbmcgbWV0YWRhdGFcIlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwib3RoZXJcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJzZW5kaW5nIHJlYXNvbmluZyBjb250ZW50IGlzIGRpc2FibGVkIGZvciB0aGlzIG1vZGVsXCJcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwidG9vbC1jYWxsXCI6IHtcbiAgICAgICAgICAgICAgICBpZiAocGFydC5wcm92aWRlckV4ZWN1dGVkKSB7XG4gICAgICAgICAgICAgICAgICBpZiAocGFydC50b29sTmFtZSA9PT0gXCJ3ZWJfc2VhcmNoXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYW50aHJvcGljQ29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNlcnZlcl90b29sX3VzZVwiLFxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBwYXJ0LnRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJ3ZWJfc2VhcmNoXCIsXG4gICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHBhcnQuaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgY2FjaGVfY29udHJvbDogY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LnRvb2xOYW1lID09PSBcImNvZGVfZXhlY3V0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYW50aHJvcGljQ29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNlcnZlcl90b29sX3VzZVwiLFxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBwYXJ0LnRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJjb2RlX2V4ZWN1dGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBwYXJ0LmlucHV0LFxuICAgICAgICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRyb2w6IGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgcHJvdmlkZXIgZXhlY3V0ZWQgdG9vbCBjYWxsIGZvciB0b29sICR7cGFydC50b29sTmFtZX0gaXMgbm90IHN1cHBvcnRlZGBcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFudGhyb3BpY0NvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2xfdXNlXCIsXG4gICAgICAgICAgICAgICAgICBpZDogcGFydC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgbmFtZTogcGFydC50b29sTmFtZSxcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBwYXJ0LmlucHV0LFxuICAgICAgICAgICAgICAgICAgY2FjaGVfY29udHJvbDogY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2FzZSBcInRvb2wtcmVzdWx0XCI6IHtcbiAgICAgICAgICAgICAgICBpZiAocGFydC50b29sTmFtZSA9PT0gXCJ3ZWJfc2VhcmNoXCIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IHBhcnQub3V0cHV0O1xuICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSBcImpzb25cIikge1xuICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYHByb3ZpZGVyIGV4ZWN1dGVkIHRvb2wgcmVzdWx0IG91dHB1dCB0eXBlICR7b3V0cHV0LnR5cGV9IGZvciB0b29sICR7cGFydC50b29sTmFtZX0gaXMgbm90IHN1cHBvcnRlZGBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY29uc3Qgd2ViU2VhcmNoT3V0cHV0ID0gd2ViU2VhcmNoXzIwMjUwMzA1T3V0cHV0U2NoZW1hLnBhcnNlKFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBhbnRocm9waWNDb250ZW50LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIndlYl9zZWFyY2hfdG9vbF9yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgdG9vbF91c2VfaWQ6IHBhcnQudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogd2ViU2VhcmNoT3V0cHV0Lm1hcCgocmVzdWx0KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgIHVybDogcmVzdWx0LnVybCxcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogcmVzdWx0LnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgIHBhZ2VfYWdlOiByZXN1bHQucGFnZUFnZSxcbiAgICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRfY29udGVudDogcmVzdWx0LmVuY3J5cHRlZENvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogcmVzdWx0LnR5cGVcbiAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICBjYWNoZV9jb250cm9sOiBjYWNoZUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwYXJ0LnRvb2xOYW1lID09PSBcImNvZGVfZXhlY3V0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IHBhcnQub3V0cHV0O1xuICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSBcImpzb25cIikge1xuICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYHByb3ZpZGVyIGV4ZWN1dGVkIHRvb2wgcmVzdWx0IG91dHB1dCB0eXBlICR7b3V0cHV0LnR5cGV9IGZvciB0b29sICR7cGFydC50b29sTmFtZX0gaXMgbm90IHN1cHBvcnRlZGBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY29uc3QgY29kZUV4ZWN1dGlvbk91dHB1dCA9IGNvZGVFeGVjdXRpb25fMjAyNTA1MjJPdXRwdXRTY2hlbWEucGFyc2Uob3V0cHV0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIGFudGhyb3BpY0NvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY29kZV9leGVjdXRpb25fdG9vbF9yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgdG9vbF91c2VfaWQ6IHBhcnQudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGNvZGVFeGVjdXRpb25PdXRwdXQudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICBzdGRvdXQ6IGNvZGVFeGVjdXRpb25PdXRwdXQuc3Rkb3V0LFxuICAgICAgICAgICAgICAgICAgICAgIHN0ZGVycjogY29kZUV4ZWN1dGlvbk91dHB1dC5zdGRlcnIsXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuX2NvZGU6IGNvZGVFeGVjdXRpb25PdXRwdXQucmV0dXJuX2NvZGVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVfY29udHJvbDogY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwib3RoZXJcIixcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBwcm92aWRlciBleGVjdXRlZCB0b29sIHJlc3VsdCBmb3IgdG9vbCAke3BhcnQudG9vbE5hbWV9IGlzIG5vdCBzdXBwb3J0ZWRgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGU6IFwiYXNzaXN0YW50XCIsIGNvbnRlbnQ6IGFudGhyb3BpY0NvbnRlbnQgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gdHlwZTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBjb250ZW50IHR5cGU6ICR7X2V4aGF1c3RpdmVDaGVja31gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBwcm9tcHQ6IHsgc3lzdGVtLCBtZXNzYWdlcyB9LFxuICAgIGJldGFzXG4gIH07XG59XG5mdW5jdGlvbiBncm91cEludG9CbG9ja3MocHJvbXB0KSB7XG4gIGNvbnN0IGJsb2NrcyA9IFtdO1xuICBsZXQgY3VycmVudEJsb2NrID0gdm9pZCAwO1xuICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgcHJvbXB0KSB7XG4gICAgY29uc3QgeyByb2xlIH0gPSBtZXNzYWdlO1xuICAgIHN3aXRjaCAocm9sZSkge1xuICAgICAgY2FzZSBcInN5c3RlbVwiOiB7XG4gICAgICAgIGlmICgoY3VycmVudEJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBjdXJyZW50QmxvY2sudHlwZSkgIT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgICBjdXJyZW50QmxvY2sgPSB7IHR5cGU6IFwic3lzdGVtXCIsIG1lc3NhZ2VzOiBbXSB9O1xuICAgICAgICAgIGJsb2Nrcy5wdXNoKGN1cnJlbnRCbG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudEJsb2NrLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcImFzc2lzdGFudFwiOiB7XG4gICAgICAgIGlmICgoY3VycmVudEJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBjdXJyZW50QmxvY2sudHlwZSkgIT09IFwiYXNzaXN0YW50XCIpIHtcbiAgICAgICAgICBjdXJyZW50QmxvY2sgPSB7IHR5cGU6IFwiYXNzaXN0YW50XCIsIG1lc3NhZ2VzOiBbXSB9O1xuICAgICAgICAgIGJsb2Nrcy5wdXNoKGN1cnJlbnRCbG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudEJsb2NrLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcInVzZXJcIjoge1xuICAgICAgICBpZiAoKGN1cnJlbnRCbG9jayA9PSBudWxsID8gdm9pZCAwIDogY3VycmVudEJsb2NrLnR5cGUpICE9PSBcInVzZXJcIikge1xuICAgICAgICAgIGN1cnJlbnRCbG9jayA9IHsgdHlwZTogXCJ1c2VyXCIsIG1lc3NhZ2VzOiBbXSB9O1xuICAgICAgICAgIGJsb2Nrcy5wdXNoKGN1cnJlbnRCbG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudEJsb2NrLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcInRvb2xcIjoge1xuICAgICAgICBpZiAoKGN1cnJlbnRCbG9jayA9PSBudWxsID8gdm9pZCAwIDogY3VycmVudEJsb2NrLnR5cGUpICE9PSBcInVzZXJcIikge1xuICAgICAgICAgIGN1cnJlbnRCbG9jayA9IHsgdHlwZTogXCJ1c2VyXCIsIG1lc3NhZ2VzOiBbXSB9O1xuICAgICAgICAgIGJsb2Nrcy5wdXNoKGN1cnJlbnRCbG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudEJsb2NrLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gcm9sZTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCByb2xlOiAke19leGhhdXN0aXZlQ2hlY2t9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBibG9ja3M7XG59XG5cbi8vIHNyYy9tYXAtYW50aHJvcGljLXN0b3AtcmVhc29uLnRzXG5mdW5jdGlvbiBtYXBBbnRocm9waWNTdG9wUmVhc29uKHtcbiAgZmluaXNoUmVhc29uLFxuICBpc0pzb25SZXNwb25zZUZyb21Ub29sXG59KSB7XG4gIHN3aXRjaCAoZmluaXNoUmVhc29uKSB7XG4gICAgY2FzZSBcInBhdXNlX3R1cm5cIjpcbiAgICBjYXNlIFwiZW5kX3R1cm5cIjpcbiAgICBjYXNlIFwic3RvcF9zZXF1ZW5jZVwiOlxuICAgICAgcmV0dXJuIFwic3RvcFwiO1xuICAgIGNhc2UgXCJyZWZ1c2FsXCI6XG4gICAgICByZXR1cm4gXCJjb250ZW50LWZpbHRlclwiO1xuICAgIGNhc2UgXCJ0b29sX3VzZVwiOlxuICAgICAgcmV0dXJuIGlzSnNvblJlc3BvbnNlRnJvbVRvb2wgPyBcInN0b3BcIiA6IFwidG9vbC1jYWxsc1wiO1xuICAgIGNhc2UgXCJtYXhfdG9rZW5zXCI6XG4gICAgICByZXR1cm4gXCJsZW5ndGhcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwidW5rbm93blwiO1xuICB9XG59XG5cbi8vIHNyYy9hbnRocm9waWMtbWVzc2FnZXMtbGFuZ3VhZ2UtbW9kZWwudHNcbnZhciBjaXRhdGlvblNjaGVtYXMgPSB7XG4gIHdlYlNlYXJjaFJlc3VsdDogejUub2JqZWN0KHtcbiAgICB0eXBlOiB6NS5saXRlcmFsKFwid2ViX3NlYXJjaF9yZXN1bHRfbG9jYXRpb25cIiksXG4gICAgY2l0ZWRfdGV4dDogejUuc3RyaW5nKCksXG4gICAgdXJsOiB6NS5zdHJpbmcoKSxcbiAgICB0aXRsZTogejUuc3RyaW5nKCksXG4gICAgZW5jcnlwdGVkX2luZGV4OiB6NS5zdHJpbmcoKVxuICB9KSxcbiAgcGFnZUxvY2F0aW9uOiB6NS5vYmplY3Qoe1xuICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJwYWdlX2xvY2F0aW9uXCIpLFxuICAgIGNpdGVkX3RleHQ6IHo1LnN0cmluZygpLFxuICAgIGRvY3VtZW50X2luZGV4OiB6NS5udW1iZXIoKSxcbiAgICBkb2N1bWVudF90aXRsZTogejUuc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBzdGFydF9wYWdlX251bWJlcjogejUubnVtYmVyKCksXG4gICAgZW5kX3BhZ2VfbnVtYmVyOiB6NS5udW1iZXIoKVxuICB9KSxcbiAgY2hhckxvY2F0aW9uOiB6NS5vYmplY3Qoe1xuICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJjaGFyX2xvY2F0aW9uXCIpLFxuICAgIGNpdGVkX3RleHQ6IHo1LnN0cmluZygpLFxuICAgIGRvY3VtZW50X2luZGV4OiB6NS5udW1iZXIoKSxcbiAgICBkb2N1bWVudF90aXRsZTogejUuc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBzdGFydF9jaGFyX2luZGV4OiB6NS5udW1iZXIoKSxcbiAgICBlbmRfY2hhcl9pbmRleDogejUubnVtYmVyKClcbiAgfSlcbn07XG52YXIgY2l0YXRpb25TY2hlbWEgPSB6NS5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgY2l0YXRpb25TY2hlbWFzLndlYlNlYXJjaFJlc3VsdCxcbiAgY2l0YXRpb25TY2hlbWFzLnBhZ2VMb2NhdGlvbixcbiAgY2l0YXRpb25TY2hlbWFzLmNoYXJMb2NhdGlvblxuXSk7XG52YXIgZG9jdW1lbnRDaXRhdGlvblNjaGVtYSA9IHo1LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICBjaXRhdGlvblNjaGVtYXMucGFnZUxvY2F0aW9uLFxuICBjaXRhdGlvblNjaGVtYXMuY2hhckxvY2F0aW9uXG5dKTtcbmZ1bmN0aW9uIHByb2Nlc3NDaXRhdGlvbihjaXRhdGlvbiwgY2l0YXRpb25Eb2N1bWVudHMsIGdlbmVyYXRlSWQzLCBvblNvdXJjZSkge1xuICBpZiAoY2l0YXRpb24udHlwZSA9PT0gXCJwYWdlX2xvY2F0aW9uXCIgfHwgY2l0YXRpb24udHlwZSA9PT0gXCJjaGFyX2xvY2F0aW9uXCIpIHtcbiAgICBjb25zdCBzb3VyY2UgPSBjcmVhdGVDaXRhdGlvblNvdXJjZShcbiAgICAgIGNpdGF0aW9uLFxuICAgICAgY2l0YXRpb25Eb2N1bWVudHMsXG4gICAgICBnZW5lcmF0ZUlkM1xuICAgICk7XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgb25Tb3VyY2Uoc291cmNlKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZUNpdGF0aW9uU291cmNlKGNpdGF0aW9uLCBjaXRhdGlvbkRvY3VtZW50cywgZ2VuZXJhdGVJZDMpIHtcbiAgdmFyIF9hO1xuICBjb25zdCBkb2N1bWVudEluZm8gPSBjaXRhdGlvbkRvY3VtZW50c1tjaXRhdGlvbi5kb2N1bWVudF9pbmRleF07XG4gIGlmICghZG9jdW1lbnRJbmZvKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgcHJvdmlkZXJNZXRhZGF0YSA9IGNpdGF0aW9uLnR5cGUgPT09IFwicGFnZV9sb2NhdGlvblwiID8ge1xuICAgIGNpdGVkVGV4dDogY2l0YXRpb24uY2l0ZWRfdGV4dCxcbiAgICBzdGFydFBhZ2VOdW1iZXI6IGNpdGF0aW9uLnN0YXJ0X3BhZ2VfbnVtYmVyLFxuICAgIGVuZFBhZ2VOdW1iZXI6IGNpdGF0aW9uLmVuZF9wYWdlX251bWJlclxuICB9IDoge1xuICAgIGNpdGVkVGV4dDogY2l0YXRpb24uY2l0ZWRfdGV4dCxcbiAgICBzdGFydENoYXJJbmRleDogY2l0YXRpb24uc3RhcnRfY2hhcl9pbmRleCxcbiAgICBlbmRDaGFySW5kZXg6IGNpdGF0aW9uLmVuZF9jaGFyX2luZGV4XG4gIH07XG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJzb3VyY2VcIixcbiAgICBzb3VyY2VUeXBlOiBcImRvY3VtZW50XCIsXG4gICAgaWQ6IGdlbmVyYXRlSWQzKCksXG4gICAgbWVkaWFUeXBlOiBkb2N1bWVudEluZm8ubWVkaWFUeXBlLFxuICAgIHRpdGxlOiAoX2EgPSBjaXRhdGlvbi5kb2N1bWVudF90aXRsZSkgIT0gbnVsbCA/IF9hIDogZG9jdW1lbnRJbmZvLnRpdGxlLFxuICAgIGZpbGVuYW1lOiBkb2N1bWVudEluZm8uZmlsZW5hbWUsXG4gICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgYW50aHJvcGljOiBwcm92aWRlck1ldGFkYXRhXG4gICAgfVxuICB9O1xufVxudmFyIEFudGhyb3BpY01lc3NhZ2VzTGFuZ3VhZ2VNb2RlbCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobW9kZWxJZCwgY29uZmlnKSB7XG4gICAgdGhpcy5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjJcIjtcbiAgICB2YXIgX2E7XG4gICAgdGhpcy5tb2RlbElkID0gbW9kZWxJZDtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLmdlbmVyYXRlSWQgPSAoX2EgPSBjb25maWcuZ2VuZXJhdGVJZCkgIT0gbnVsbCA/IF9hIDogZ2VuZXJhdGVJZDtcbiAgfVxuICBzdXBwb3J0c1VybCh1cmwpIHtcbiAgICByZXR1cm4gdXJsLnByb3RvY29sID09PSBcImh0dHBzOlwiO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgZ2V0IHN1cHBvcnRlZFVybHMoKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgcmV0dXJuIChfYyA9IChfYiA9IChfYSA9IHRoaXMuY29uZmlnKS5zdXBwb3J0ZWRVcmxzKSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2FsbChfYSkpICE9IG51bGwgPyBfYyA6IHt9O1xuICB9XG4gIGFzeW5jIGdldEFyZ3Moe1xuICAgIHByb21wdCxcbiAgICBtYXhPdXRwdXRUb2tlbnMgPSA0MDk2LFxuICAgIC8vIDQwOTY6IG1heCBtb2RlbCBvdXRwdXQgdG9rZW5zIFRPRE8gdXBkYXRlIGRlZmF1bHQgaW4gdjVcbiAgICB0ZW1wZXJhdHVyZSxcbiAgICB0b3BQLFxuICAgIHRvcEssXG4gICAgZnJlcXVlbmN5UGVuYWx0eSxcbiAgICBwcmVzZW5jZVBlbmFsdHksXG4gICAgc3RvcFNlcXVlbmNlcyxcbiAgICByZXNwb25zZUZvcm1hdCxcbiAgICBzZWVkLFxuICAgIHRvb2xzLFxuICAgIHRvb2xDaG9pY2UsXG4gICAgcHJvdmlkZXJPcHRpb25zXG4gIH0pIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgIGlmIChmcmVxdWVuY3lQZW5hbHR5ICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgc2V0dGluZzogXCJmcmVxdWVuY3lQZW5hbHR5XCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocHJlc2VuY2VQZW5hbHR5ICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgc2V0dGluZzogXCJwcmVzZW5jZVBlbmFsdHlcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChzZWVkICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgc2V0dGluZzogXCJzZWVkXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoKHJlc3BvbnNlRm9ybWF0ID09IG51bGwgPyB2b2lkIDAgOiByZXNwb25zZUZvcm1hdC50eXBlKSA9PT0gXCJqc29uXCIpIHtcbiAgICAgIGlmIChyZXNwb25zZUZvcm1hdC5zY2hlbWEgPT0gbnVsbCkge1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInJlc3BvbnNlRm9ybWF0XCIsXG4gICAgICAgICAgZGV0YWlsczogXCJKU09OIHJlc3BvbnNlIGZvcm1hdCByZXF1aXJlcyBhIHNjaGVtYS4gVGhlIHJlc3BvbnNlIGZvcm1hdCBpcyBpZ25vcmVkLlwiXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICh0b29scyAhPSBudWxsKSB7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICAgIHNldHRpbmc6IFwidG9vbHNcIixcbiAgICAgICAgICBkZXRhaWxzOiBcIkpTT04gcmVzcG9uc2UgZm9ybWF0IGRvZXMgbm90IHN1cHBvcnQgdG9vbHMuIFRoZSBwcm92aWRlZCB0b29scyBhcmUgaWdub3JlZC5cIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QganNvblJlc3BvbnNlVG9vbCA9IChyZXNwb25zZUZvcm1hdCA9PSBudWxsID8gdm9pZCAwIDogcmVzcG9uc2VGb3JtYXQudHlwZSkgPT09IFwianNvblwiICYmIHJlc3BvbnNlRm9ybWF0LnNjaGVtYSAhPSBudWxsID8ge1xuICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgbmFtZTogXCJqc29uXCIsXG4gICAgICBkZXNjcmlwdGlvbjogXCJSZXNwb25kIHdpdGggYSBKU09OIG9iamVjdC5cIixcbiAgICAgIGlucHV0U2NoZW1hOiByZXNwb25zZUZvcm1hdC5zY2hlbWFcbiAgICB9IDogdm9pZCAwO1xuICAgIGNvbnN0IGFudGhyb3BpY09wdGlvbnMgPSBhd2FpdCBwYXJzZVByb3ZpZGVyT3B0aW9uczIoe1xuICAgICAgcHJvdmlkZXI6IFwiYW50aHJvcGljXCIsXG4gICAgICBwcm92aWRlck9wdGlvbnMsXG4gICAgICBzY2hlbWE6IGFudGhyb3BpY1Byb3ZpZGVyT3B0aW9uc1xuICAgIH0pO1xuICAgIGNvbnN0IHsgcHJvbXB0OiBtZXNzYWdlc1Byb21wdCwgYmV0YXM6IG1lc3NhZ2VzQmV0YXMgfSA9IGF3YWl0IGNvbnZlcnRUb0FudGhyb3BpY01lc3NhZ2VzUHJvbXB0KHtcbiAgICAgIHByb21wdCxcbiAgICAgIHNlbmRSZWFzb25pbmc6IChfYSA9IGFudGhyb3BpY09wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IGFudGhyb3BpY09wdGlvbnMuc2VuZFJlYXNvbmluZykgIT0gbnVsbCA/IF9hIDogdHJ1ZSxcbiAgICAgIHdhcm5pbmdzXG4gICAgfSk7XG4gICAgY29uc3QgaXNUaGlua2luZyA9ICgoX2IgPSBhbnRocm9waWNPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBhbnRocm9waWNPcHRpb25zLnRoaW5raW5nKSA9PSBudWxsID8gdm9pZCAwIDogX2IudHlwZSkgPT09IFwiZW5hYmxlZFwiO1xuICAgIGNvbnN0IHRoaW5raW5nQnVkZ2V0ID0gKF9jID0gYW50aHJvcGljT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogYW50aHJvcGljT3B0aW9ucy50aGlua2luZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmJ1ZGdldFRva2VucztcbiAgICBjb25zdCBiYXNlQXJncyA9IHtcbiAgICAgIC8vIG1vZGVsIGlkOlxuICAgICAgbW9kZWw6IHRoaXMubW9kZWxJZCxcbiAgICAgIC8vIHN0YW5kYXJkaXplZCBzZXR0aW5nczpcbiAgICAgIG1heF90b2tlbnM6IG1heE91dHB1dFRva2VucyxcbiAgICAgIHRlbXBlcmF0dXJlLFxuICAgICAgdG9wX2s6IHRvcEssXG4gICAgICB0b3BfcDogdG9wUCxcbiAgICAgIHN0b3Bfc2VxdWVuY2VzOiBzdG9wU2VxdWVuY2VzLFxuICAgICAgLy8gcHJvdmlkZXIgc3BlY2lmaWMgc2V0dGluZ3M6XG4gICAgICAuLi5pc1RoaW5raW5nICYmIHtcbiAgICAgICAgdGhpbmtpbmc6IHsgdHlwZTogXCJlbmFibGVkXCIsIGJ1ZGdldF90b2tlbnM6IHRoaW5raW5nQnVkZ2V0IH1cbiAgICAgIH0sXG4gICAgICAvLyBwcm9tcHQ6XG4gICAgICBzeXN0ZW06IG1lc3NhZ2VzUHJvbXB0LnN5c3RlbSxcbiAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlc1Byb21wdC5tZXNzYWdlc1xuICAgIH07XG4gICAgaWYgKGlzVGhpbmtpbmcpIHtcbiAgICAgIGlmICh0aGlua2luZ0J1ZGdldCA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjMoe1xuICAgICAgICAgIGZ1bmN0aW9uYWxpdHk6IFwidGhpbmtpbmcgcmVxdWlyZXMgYSBidWRnZXRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy50ZW1wZXJhdHVyZSAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLnRlbXBlcmF0dXJlID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInRlbXBlcmF0dXJlXCIsXG4gICAgICAgICAgZGV0YWlsczogXCJ0ZW1wZXJhdHVyZSBpcyBub3Qgc3VwcG9ydGVkIHdoZW4gdGhpbmtpbmcgaXMgZW5hYmxlZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHRvcEsgIT0gbnVsbCkge1xuICAgICAgICBiYXNlQXJncy50b3BfayA9IHZvaWQgMDtcbiAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgICAgc2V0dGluZzogXCJ0b3BLXCIsXG4gICAgICAgICAgZGV0YWlsczogXCJ0b3BLIGlzIG5vdCBzdXBwb3J0ZWQgd2hlbiB0aGlua2luZyBpcyBlbmFibGVkXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAodG9wUCAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLnRvcF9wID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInRvcFBcIixcbiAgICAgICAgICBkZXRhaWxzOiBcInRvcFAgaXMgbm90IHN1cHBvcnRlZCB3aGVuIHRoaW5raW5nIGlzIGVuYWJsZWRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGJhc2VBcmdzLm1heF90b2tlbnMgPSBtYXhPdXRwdXRUb2tlbnMgKyB0aGlua2luZ0J1ZGdldDtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgdG9vbHM6IGFudGhyb3BpY1Rvb2xzMixcbiAgICAgIHRvb2xDaG9pY2U6IGFudGhyb3BpY1Rvb2xDaG9pY2UsXG4gICAgICB0b29sV2FybmluZ3MsXG4gICAgICBiZXRhczogdG9vbHNCZXRhc1xuICAgIH0gPSBwcmVwYXJlVG9vbHMoXG4gICAgICBqc29uUmVzcG9uc2VUb29sICE9IG51bGwgPyB7XG4gICAgICAgIHRvb2xzOiBbanNvblJlc3BvbnNlVG9vbF0sXG4gICAgICAgIHRvb2xDaG9pY2U6IHsgdHlwZTogXCJ0b29sXCIsIHRvb2xOYW1lOiBqc29uUmVzcG9uc2VUb29sLm5hbWUgfSxcbiAgICAgICAgZGlzYWJsZVBhcmFsbGVsVG9vbFVzZTogdHJ1ZVxuICAgICAgfSA6IHtcbiAgICAgICAgdG9vbHM6IHRvb2xzICE9IG51bGwgPyB0b29scyA6IFtdLFxuICAgICAgICB0b29sQ2hvaWNlLFxuICAgICAgICBkaXNhYmxlUGFyYWxsZWxUb29sVXNlOiBhbnRocm9waWNPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBhbnRocm9waWNPcHRpb25zLmRpc2FibGVQYXJhbGxlbFRvb2xVc2VcbiAgICAgIH1cbiAgICApO1xuICAgIHJldHVybiB7XG4gICAgICBhcmdzOiB7XG4gICAgICAgIC4uLmJhc2VBcmdzLFxuICAgICAgICB0b29sczogYW50aHJvcGljVG9vbHMyLFxuICAgICAgICB0b29sX2Nob2ljZTogYW50aHJvcGljVG9vbENob2ljZVxuICAgICAgfSxcbiAgICAgIHdhcm5pbmdzOiBbLi4ud2FybmluZ3MsIC4uLnRvb2xXYXJuaW5nc10sXG4gICAgICBiZXRhczogLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWy4uLm1lc3NhZ2VzQmV0YXMsIC4uLnRvb2xzQmV0YXNdKSxcbiAgICAgIHVzZXNKc29uUmVzcG9uc2VUb29sOiBqc29uUmVzcG9uc2VUb29sICE9IG51bGxcbiAgICB9O1xuICB9XG4gIGFzeW5jIGdldEhlYWRlcnMoe1xuICAgIGJldGFzLFxuICAgIGhlYWRlcnNcbiAgfSkge1xuICAgIHJldHVybiBjb21iaW5lSGVhZGVycyhcbiAgICAgIGF3YWl0IHJlc29sdmUodGhpcy5jb25maWcuaGVhZGVycyksXG4gICAgICBiZXRhcy5zaXplID4gMCA/IHsgXCJhbnRocm9waWMtYmV0YVwiOiBBcnJheS5mcm9tKGJldGFzKS5qb2luKFwiLFwiKSB9IDoge30sXG4gICAgICBoZWFkZXJzXG4gICAgKTtcbiAgfVxuICBidWlsZFJlcXVlc3RVcmwoaXNTdHJlYW1pbmcpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICByZXR1cm4gKF9jID0gKF9iID0gKF9hID0gdGhpcy5jb25maWcpLmJ1aWxkUmVxdWVzdFVybCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIHRoaXMuY29uZmlnLmJhc2VVUkwsIGlzU3RyZWFtaW5nKSkgIT0gbnVsbCA/IF9jIDogYCR7dGhpcy5jb25maWcuYmFzZVVSTH0vbWVzc2FnZXNgO1xuICB9XG4gIHRyYW5zZm9ybVJlcXVlc3RCb2R5KGFyZ3MpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICByZXR1cm4gKF9jID0gKF9iID0gKF9hID0gdGhpcy5jb25maWcpLnRyYW5zZm9ybVJlcXVlc3RCb2R5KSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2FsbChfYSwgYXJncykpICE9IG51bGwgPyBfYyA6IGFyZ3M7XG4gIH1cbiAgZXh0cmFjdENpdGF0aW9uRG9jdW1lbnRzKHByb21wdCkge1xuICAgIGNvbnN0IGlzQ2l0YXRpb25QYXJ0ID0gKHBhcnQpID0+IHtcbiAgICAgIHZhciBfYSwgX2I7XG4gICAgICBpZiAocGFydC50eXBlICE9PSBcImZpbGVcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAocGFydC5tZWRpYVR5cGUgIT09IFwiYXBwbGljYXRpb24vcGRmXCIgJiYgcGFydC5tZWRpYVR5cGUgIT09IFwidGV4dC9wbGFpblwiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFudGhyb3BpYzIgPSAoX2EgPSBwYXJ0LnByb3ZpZGVyT3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmFudGhyb3BpYztcbiAgICAgIGNvbnN0IGNpdGF0aW9uc0NvbmZpZyA9IGFudGhyb3BpYzIgPT0gbnVsbCA/IHZvaWQgMCA6IGFudGhyb3BpYzIuY2l0YXRpb25zO1xuICAgICAgcmV0dXJuIChfYiA9IGNpdGF0aW9uc0NvbmZpZyA9PSBudWxsID8gdm9pZCAwIDogY2l0YXRpb25zQ29uZmlnLmVuYWJsZWQpICE9IG51bGwgPyBfYiA6IGZhbHNlO1xuICAgIH07XG4gICAgcmV0dXJuIHByb21wdC5maWx0ZXIoKG1lc3NhZ2UpID0+IG1lc3NhZ2Uucm9sZSA9PT0gXCJ1c2VyXCIpLmZsYXRNYXAoKG1lc3NhZ2UpID0+IG1lc3NhZ2UuY29udGVudCkuZmlsdGVyKGlzQ2l0YXRpb25QYXJ0KS5tYXAoKHBhcnQpID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIGNvbnN0IGZpbGVQYXJ0ID0gcGFydDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpdGxlOiAoX2EgPSBmaWxlUGFydC5maWxlbmFtZSkgIT0gbnVsbCA/IF9hIDogXCJVbnRpdGxlZCBEb2N1bWVudFwiLFxuICAgICAgICBmaWxlbmFtZTogZmlsZVBhcnQuZmlsZW5hbWUsXG4gICAgICAgIG1lZGlhVHlwZTogZmlsZVBhcnQubWVkaWFUeXBlXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG4gIGFzeW5jIGRvR2VuZXJhdGUob3B0aW9ucykge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgY29uc3QgeyBhcmdzLCB3YXJuaW5ncywgYmV0YXMsIHVzZXNKc29uUmVzcG9uc2VUb29sIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3QgY2l0YXRpb25Eb2N1bWVudHMgPSB0aGlzLmV4dHJhY3RDaXRhdGlvbkRvY3VtZW50cyhvcHRpb25zLnByb21wdCk7XG4gICAgY29uc3Qge1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgdmFsdWU6IHJlc3BvbnNlLFxuICAgICAgcmF3VmFsdWU6IHJhd1Jlc3BvbnNlXG4gICAgfSA9IGF3YWl0IHBvc3RKc29uVG9BcGkoe1xuICAgICAgdXJsOiB0aGlzLmJ1aWxkUmVxdWVzdFVybChmYWxzZSksXG4gICAgICBoZWFkZXJzOiBhd2FpdCB0aGlzLmdldEhlYWRlcnMoeyBiZXRhcywgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzIH0pLFxuICAgICAgYm9keTogdGhpcy50cmFuc2Zvcm1SZXF1ZXN0Qm9keShhcmdzKSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogYW50aHJvcGljRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcihcbiAgICAgICAgYW50aHJvcGljTWVzc2FnZXNSZXNwb25zZVNjaGVtYVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgY29uc3QgY29udGVudCA9IFtdO1xuICAgIGZvciAoY29uc3QgcGFydCBvZiByZXNwb25zZS5jb250ZW50KSB7XG4gICAgICBzd2l0Y2ggKHBhcnQudHlwZSkge1xuICAgICAgICBjYXNlIFwidGV4dFwiOiB7XG4gICAgICAgICAgaWYgKCF1c2VzSnNvblJlc3BvbnNlVG9vbCkge1xuICAgICAgICAgICAgY29udGVudC5wdXNoKHsgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IHBhcnQudGV4dCB9KTtcbiAgICAgICAgICAgIGlmIChwYXJ0LmNpdGF0aW9ucykge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNpdGF0aW9uIG9mIHBhcnQuY2l0YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc0NpdGF0aW9uKFxuICAgICAgICAgICAgICAgICAgY2l0YXRpb24sXG4gICAgICAgICAgICAgICAgICBjaXRhdGlvbkRvY3VtZW50cyxcbiAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVJZCxcbiAgICAgICAgICAgICAgICAgIChzb3VyY2UpID0+IGNvbnRlbnQucHVzaChzb3VyY2UpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidGhpbmtpbmdcIjoge1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZ1wiLFxuICAgICAgICAgICAgdGV4dDogcGFydC50aGlua2luZyxcbiAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgYW50aHJvcGljOiB7XG4gICAgICAgICAgICAgICAgc2lnbmF0dXJlOiBwYXJ0LnNpZ25hdHVyZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInJlZGFjdGVkX3RoaW5raW5nXCI6IHtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmdcIixcbiAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIGFudGhyb3BpYzoge1xuICAgICAgICAgICAgICAgIHJlZGFjdGVkRGF0YTogcGFydC5kYXRhXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidG9vbF91c2VcIjoge1xuICAgICAgICAgIGNvbnRlbnQucHVzaChcbiAgICAgICAgICAgIC8vIHdoZW4gYSBqc29uIHJlc3BvbnNlIHRvb2wgaXMgdXNlZCwgdGhlIHRvb2wgY2FsbCBiZWNvbWVzIHRoZSB0ZXh0OlxuICAgICAgICAgICAgdXNlc0pzb25SZXNwb25zZVRvb2wgPyB7XG4gICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICB0ZXh0OiBKU09OLnN0cmluZ2lmeShwYXJ0LmlucHV0KVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgICAgdG9vbE5hbWU6IHBhcnQubmFtZSxcbiAgICAgICAgICAgICAgaW5wdXQ6IEpTT04uc3RyaW5naWZ5KHBhcnQuaW5wdXQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwic2VydmVyX3Rvb2xfdXNlXCI6IHtcbiAgICAgICAgICBpZiAocGFydC5uYW1lID09PSBcIndlYl9zZWFyY2hcIiB8fCBwYXJ0Lm5hbWUgPT09IFwiY29kZV9leGVjdXRpb25cIikge1xuICAgICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgICAgdG9vbE5hbWU6IHBhcnQubmFtZSxcbiAgICAgICAgICAgICAgaW5wdXQ6IEpTT04uc3RyaW5naWZ5KHBhcnQuaW5wdXQpLFxuICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIndlYl9zZWFyY2hfdG9vbF9yZXN1bHRcIjoge1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcnQuY29udGVudCkpIHtcbiAgICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC50b29sX3VzZV9pZCxcbiAgICAgICAgICAgICAgdG9vbE5hbWU6IFwid2ViX3NlYXJjaFwiLFxuICAgICAgICAgICAgICByZXN1bHQ6IHBhcnQuY29udGVudC5tYXAoKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIHVybDogcmVzdWx0LnVybCxcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXN1bHQudGl0bGUsXG4gICAgICAgICAgICAgICAgICBwYWdlQWdlOiAoX2EyID0gcmVzdWx0LnBhZ2VfYWdlKSAhPSBudWxsID8gX2EyIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZENvbnRlbnQ6IHJlc3VsdC5lbmNyeXB0ZWRfY29udGVudCxcbiAgICAgICAgICAgICAgICAgIHR5cGU6IHJlc3VsdC50eXBlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcGFydC5jb250ZW50KSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJzb3VyY2VcIixcbiAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcInVybFwiLFxuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgICAgICAgICAgICB1cmw6IHJlc3VsdC51cmwsXG4gICAgICAgICAgICAgICAgdGl0bGU6IHJlc3VsdC50aXRsZSxcbiAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBhbnRocm9waWM6IHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZUFnZTogKF9hID0gcmVzdWx0LnBhZ2VfYWdlKSAhPSBudWxsID8gX2EgOiBudWxsXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LnRvb2xfdXNlX2lkLFxuICAgICAgICAgICAgICB0b29sTmFtZTogXCJ3ZWJfc2VhcmNoXCIsXG4gICAgICAgICAgICAgIGlzRXJyb3I6IHRydWUsXG4gICAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwid2ViX3NlYXJjaF90b29sX3Jlc3VsdF9lcnJvclwiLFxuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogcGFydC5jb250ZW50LmVycm9yX2NvZGVcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJjb2RlX2V4ZWN1dGlvbl90b29sX3Jlc3VsdFwiOiB7XG4gICAgICAgICAgaWYgKHBhcnQuY29udGVudC50eXBlID09PSBcImNvZGVfZXhlY3V0aW9uX3Jlc3VsdFwiKSB7XG4gICAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQudG9vbF91c2VfaWQsXG4gICAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvZGVfZXhlY3V0aW9uXCIsXG4gICAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IHBhcnQuY29udGVudC50eXBlLFxuICAgICAgICAgICAgICAgIHN0ZG91dDogcGFydC5jb250ZW50LnN0ZG91dCxcbiAgICAgICAgICAgICAgICBzdGRlcnI6IHBhcnQuY29udGVudC5zdGRlcnIsXG4gICAgICAgICAgICAgICAgcmV0dXJuX2NvZGU6IHBhcnQuY29udGVudC5yZXR1cm5fY29kZVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQuY29udGVudC50eXBlID09PSBcImNvZGVfZXhlY3V0aW9uX3Rvb2xfcmVzdWx0X2Vycm9yXCIpIHtcbiAgICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC50b29sX3VzZV9pZCxcbiAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29kZV9leGVjdXRpb25cIixcbiAgICAgICAgICAgICAgaXNFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJjb2RlX2V4ZWN1dGlvbl90b29sX3Jlc3VsdF9lcnJvclwiLFxuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogcGFydC5jb250ZW50LmVycm9yX2NvZGVcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBjb250ZW50LFxuICAgICAgZmluaXNoUmVhc29uOiBtYXBBbnRocm9waWNTdG9wUmVhc29uKHtcbiAgICAgICAgZmluaXNoUmVhc29uOiByZXNwb25zZS5zdG9wX3JlYXNvbixcbiAgICAgICAgaXNKc29uUmVzcG9uc2VGcm9tVG9vbDogdXNlc0pzb25SZXNwb25zZVRvb2xcbiAgICAgIH0pLFxuICAgICAgdXNhZ2U6IHtcbiAgICAgICAgaW5wdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLmlucHV0X3Rva2VucyxcbiAgICAgICAgb3V0cHV0VG9rZW5zOiByZXNwb25zZS51c2FnZS5vdXRwdXRfdG9rZW5zLFxuICAgICAgICB0b3RhbFRva2VuczogcmVzcG9uc2UudXNhZ2UuaW5wdXRfdG9rZW5zICsgcmVzcG9uc2UudXNhZ2Uub3V0cHV0X3Rva2VucyxcbiAgICAgICAgY2FjaGVkSW5wdXRUb2tlbnM6IChfYiA9IHJlc3BvbnNlLnVzYWdlLmNhY2hlX3JlYWRfaW5wdXRfdG9rZW5zKSAhPSBudWxsID8gX2IgOiB2b2lkIDBcbiAgICAgIH0sXG4gICAgICByZXF1ZXN0OiB7IGJvZHk6IGFyZ3MgfSxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIGlkOiAoX2MgPSByZXNwb25zZS5pZCkgIT0gbnVsbCA/IF9jIDogdm9pZCAwLFxuICAgICAgICBtb2RlbElkOiAoX2QgPSByZXNwb25zZS5tb2RlbCkgIT0gbnVsbCA/IF9kIDogdm9pZCAwLFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIGJvZHk6IHJhd1Jlc3BvbnNlXG4gICAgICB9LFxuICAgICAgd2FybmluZ3MsXG4gICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgIGFudGhyb3BpYzoge1xuICAgICAgICAgIHVzYWdlOiByZXNwb25zZS51c2FnZSxcbiAgICAgICAgICBjYWNoZUNyZWF0aW9uSW5wdXRUb2tlbnM6IChfZSA9IHJlc3BvbnNlLnVzYWdlLmNhY2hlX2NyZWF0aW9uX2lucHV0X3Rva2VucykgIT0gbnVsbCA/IF9lIDogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBhc3luYyBkb1N0cmVhbShvcHRpb25zKSB7XG4gICAgY29uc3QgeyBhcmdzLCB3YXJuaW5ncywgYmV0YXMsIHVzZXNKc29uUmVzcG9uc2VUb29sIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3QgY2l0YXRpb25Eb2N1bWVudHMgPSB0aGlzLmV4dHJhY3RDaXRhdGlvbkRvY3VtZW50cyhvcHRpb25zLnByb21wdCk7XG4gICAgY29uc3QgYm9keSA9IHsgLi4uYXJncywgc3RyZWFtOiB0cnVlIH07XG4gICAgY29uc3QgeyByZXNwb25zZUhlYWRlcnMsIHZhbHVlOiByZXNwb25zZSB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaSh7XG4gICAgICB1cmw6IHRoaXMuYnVpbGRSZXF1ZXN0VXJsKHRydWUpLFxuICAgICAgaGVhZGVyczogYXdhaXQgdGhpcy5nZXRIZWFkZXJzKHsgYmV0YXMsIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyB9KSxcbiAgICAgIGJvZHk6IHRoaXMudHJhbnNmb3JtUmVxdWVzdEJvZHkoYm9keSksXG4gICAgICBmYWlsZWRSZXNwb25zZUhhbmRsZXI6IGFudGhyb3BpY0ZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUV2ZW50U291cmNlUmVzcG9uc2VIYW5kbGVyKFxuICAgICAgICBhbnRocm9waWNNZXNzYWdlc0NodW5rU2NoZW1hXG4gICAgICApLFxuICAgICAgYWJvcnRTaWduYWw6IG9wdGlvbnMuYWJvcnRTaWduYWwsXG4gICAgICBmZXRjaDogdGhpcy5jb25maWcuZmV0Y2hcbiAgICB9KTtcbiAgICBsZXQgZmluaXNoUmVhc29uID0gXCJ1bmtub3duXCI7XG4gICAgY29uc3QgdXNhZ2UgPSB7XG4gICAgICBpbnB1dFRva2Vuczogdm9pZCAwLFxuICAgICAgb3V0cHV0VG9rZW5zOiB2b2lkIDAsXG4gICAgICB0b3RhbFRva2Vuczogdm9pZCAwXG4gICAgfTtcbiAgICBjb25zdCBjb250ZW50QmxvY2tzID0ge307XG4gICAgbGV0IHByb3ZpZGVyTWV0YWRhdGEgPSB2b2lkIDA7XG4gICAgbGV0IGJsb2NrVHlwZSA9IHZvaWQgMDtcbiAgICBjb25zdCBnZW5lcmF0ZUlkMyA9IHRoaXMuZ2VuZXJhdGVJZDtcbiAgICByZXR1cm4ge1xuICAgICAgc3RyZWFtOiByZXNwb25zZS5waXBlVGhyb3VnaChcbiAgICAgICAgbmV3IFRyYW5zZm9ybVN0cmVhbSh7XG4gICAgICAgICAgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJzdHJlYW0tc3RhcnRcIiwgd2FybmluZ3MgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0cmFuc2Zvcm0oY2h1bmssIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmluY2x1ZGVSYXdDaHVua3MpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJyYXdcIiwgcmF3VmFsdWU6IGNodW5rLnJhd1ZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjaHVuay5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwiZXJyb3JcIiwgZXJyb3I6IGNodW5rLmVycm9yIH0pO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNodW5rLnZhbHVlO1xuICAgICAgICAgICAgc3dpdGNoICh2YWx1ZS50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJwaW5nXCI6IHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2FzZSBcImNvbnRlbnRfYmxvY2tfc3RhcnRcIjoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRCbG9ja1R5cGUgPSB2YWx1ZS5jb250ZW50X2Jsb2NrLnR5cGU7XG4gICAgICAgICAgICAgICAgYmxvY2tUeXBlID0gY29udGVudEJsb2NrVHlwZTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbnRlbnRCbG9ja1R5cGUpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEJsb2Nrc1t2YWx1ZS5pbmRleF0gPSB7IHR5cGU6IFwidGV4dFwiIH07XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0LXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IFN0cmluZyh2YWx1ZS5pbmRleClcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0aGlua2luZ1wiOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRCbG9ja3NbdmFsdWUuaW5kZXhdID0geyB0eXBlOiBcInJlYXNvbmluZ1wiIH07XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmctc3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgICBpZDogU3RyaW5nKHZhbHVlLmluZGV4KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY2FzZSBcInJlZGFjdGVkX3RoaW5raW5nXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEJsb2Nrc1t2YWx1ZS5pbmRleF0gPSB7IHR5cGU6IFwicmVhc29uaW5nXCIgfTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBTdHJpbmcodmFsdWUuaW5kZXgpLFxuICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFudGhyb3BpYzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZWRhY3RlZERhdGE6IHZhbHVlLmNvbnRlbnRfYmxvY2suZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0b29sX3VzZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRCbG9ja3NbdmFsdWUuaW5kZXhdID0gdXNlc0pzb25SZXNwb25zZVRvb2wgPyB7IHR5cGU6IFwidGV4dFwiIH0gOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5jb250ZW50X2Jsb2NrLmlkLFxuICAgICAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB2YWx1ZS5jb250ZW50X2Jsb2NrLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKFxuICAgICAgICAgICAgICAgICAgICAgIHVzZXNKc29uUmVzcG9uc2VUb29sID8geyB0eXBlOiBcInRleHQtc3RhcnRcIiwgaWQ6IFN0cmluZyh2YWx1ZS5pbmRleCkgfSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLmNvbnRlbnRfYmxvY2suaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sTmFtZTogdmFsdWUuY29udGVudF9ibG9jay5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjYXNlIFwic2VydmVyX3Rvb2xfdXNlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmNvbnRlbnRfYmxvY2submFtZSA9PT0gXCJ3ZWJfc2VhcmNoXCIgfHwgdmFsdWUuY29udGVudF9ibG9jay5uYW1lID09PSBcImNvZGVfZXhlY3V0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb250ZW50QmxvY2tzW3ZhbHVlLmluZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5jb250ZW50X2Jsb2NrLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHZhbHVlLmNvbnRlbnRfYmxvY2submFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLmNvbnRlbnRfYmxvY2suaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sTmFtZTogdmFsdWUuY29udGVudF9ibG9jay5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ3ZWJfc2VhcmNoX3Rvb2xfcmVzdWx0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydCA9IHZhbHVlLmNvbnRlbnRfYmxvY2s7XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcnQuY29udGVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC50b29sX3VzZV9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcIndlYl9zZWFyY2hcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogcGFydC5jb250ZW50Lm1hcCgocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiByZXN1bHQudXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXN1bHQudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUFnZTogKF9hMiA9IHJlc3VsdC5wYWdlX2FnZSkgIT0gbnVsbCA/IF9hMiA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5jcnlwdGVkQ29udGVudDogcmVzdWx0LmVuY3J5cHRlZF9jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHJlc3VsdC50eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBwYXJ0LmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVR5cGU6IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBnZW5lcmF0ZUlkMygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHJlc3VsdC51cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXN1bHQudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnRocm9waWM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VBZ2U6IChfYSA9IHJlc3VsdC5wYWdlX2FnZSkgIT0gbnVsbCA/IF9hIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LnRvb2xfdXNlX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwid2ViX3NlYXJjaFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIndlYl9zZWFyY2hfdG9vbF9yZXN1bHRfZXJyb3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBwYXJ0LmNvbnRlbnQuZXJyb3JfY29kZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjYXNlIFwiY29kZV9leGVjdXRpb25fdG9vbF9yZXN1bHRcIjoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0ID0gdmFsdWUuY29udGVudF9ibG9jaztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQuY29udGVudC50eXBlID09PSBcImNvZGVfZXhlY3V0aW9uX3Jlc3VsdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQudG9vbF91c2VfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sTmFtZTogXCJjb2RlX2V4ZWN1dGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnQuY29udGVudC50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdGRvdXQ6IHBhcnQuY29udGVudC5zdGRvdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZGVycjogcGFydC5jb250ZW50LnN0ZGVycixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuX2NvZGU6IHBhcnQuY29udGVudC5yZXR1cm5fY29kZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0LmNvbnRlbnQudHlwZSA9PT0gXCJjb2RlX2V4ZWN1dGlvbl90b29sX3Jlc3VsdF9lcnJvclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQudG9vbF91c2VfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sTmFtZTogXCJjb2RlX2V4ZWN1dGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNvZGVfZXhlY3V0aW9uX3Rvb2xfcmVzdWx0X2Vycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogcGFydC5jb250ZW50LmVycm9yX2NvZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gY29udGVudEJsb2NrVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgIGBVbnN1cHBvcnRlZCBjb250ZW50IGJsb2NrIHR5cGU6ICR7X2V4aGF1c3RpdmVDaGVja31gXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNhc2UgXCJjb250ZW50X2Jsb2NrX3N0b3BcIjoge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50QmxvY2tzW3ZhbHVlLmluZGV4XSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50QmxvY2sgPSBjb250ZW50QmxvY2tzW3ZhbHVlLmluZGV4XTtcbiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29udGVudEJsb2NrLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHQtZW5kXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogU3RyaW5nKHZhbHVlLmluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZWFzb25pbmdcIjoge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1lbmRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBTdHJpbmcodmFsdWUuaW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRvb2wtY2FsbFwiOlxuICAgICAgICAgICAgICAgICAgICAgIGlmICghdXNlc0pzb25SZXNwb25zZVRvb2wpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1lbmRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbnRlbnRCbG9jay50b29sQ2FsbElkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShjb250ZW50QmxvY2spO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb250ZW50QmxvY2tzW3ZhbHVlLmluZGV4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYmxvY2tUeXBlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwiY29udGVudF9ibG9ja19kZWx0YVwiOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsdGFUeXBlID0gdmFsdWUuZGVsdGEudHlwZTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRlbHRhVHlwZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcInRleHRfZGVsdGFcIjoge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXNlc0pzb25SZXNwb25zZVRvb2wpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICAgICAgICBpZDogU3RyaW5nKHZhbHVlLmluZGV4KSxcbiAgICAgICAgICAgICAgICAgICAgICBkZWx0YTogdmFsdWUuZGVsdGEudGV4dFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY2FzZSBcInRoaW5raW5nX2RlbHRhXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1kZWx0YVwiLFxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBTdHJpbmcodmFsdWUuaW5kZXgpLFxuICAgICAgICAgICAgICAgICAgICAgIGRlbHRhOiB2YWx1ZS5kZWx0YS50aGlua2luZ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY2FzZSBcInNpZ25hdHVyZV9kZWx0YVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChibG9ja1R5cGUgPT09IFwidGhpbmtpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1kZWx0YVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFN0cmluZyh2YWx1ZS5pbmRleCksXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWx0YTogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYW50aHJvcGljOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlOiB2YWx1ZS5kZWx0YS5zaWduYXR1cmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbnB1dF9qc29uX2RlbHRhXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudEJsb2NrID0gY29udGVudEJsb2Nrc1t2YWx1ZS5pbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gdmFsdWUuZGVsdGEucGFydGlhbF9qc29uO1xuICAgICAgICAgICAgICAgICAgICBpZiAodXNlc0pzb25SZXNwb25zZVRvb2wpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoKGNvbnRlbnRCbG9jayA9PSBudWxsID8gdm9pZCAwIDogY29udGVudEJsb2NrLnR5cGUpICE9PSBcInRleHRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogU3RyaW5nKHZhbHVlLmluZGV4KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKChjb250ZW50QmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbnRlbnRCbG9jay50eXBlKSAhPT0gXCJ0b29sLWNhbGxcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogY29udGVudEJsb2NrLnRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWx0YVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRCbG9jay5pbnB1dCArPSBkZWx0YTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjYXNlIFwiY2l0YXRpb25zX2RlbHRhXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2l0YXRpb24gPSB2YWx1ZS5kZWx0YS5jaXRhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0NpdGF0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgIGNpdGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgIGNpdGF0aW9uRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlSWQzLFxuICAgICAgICAgICAgICAgICAgICAgIChzb3VyY2UpID0+IGNvbnRyb2xsZXIuZW5xdWV1ZShzb3VyY2UpXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IGRlbHRhVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgIGBVbnN1cHBvcnRlZCBkZWx0YSB0eXBlOiAke19leGhhdXN0aXZlQ2hlY2t9YFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwibWVzc2FnZV9zdGFydFwiOiB7XG4gICAgICAgICAgICAgICAgdXNhZ2UuaW5wdXRUb2tlbnMgPSB2YWx1ZS5tZXNzYWdlLnVzYWdlLmlucHV0X3Rva2VucztcbiAgICAgICAgICAgICAgICB1c2FnZS5jYWNoZWRJbnB1dFRva2VucyA9IChfYiA9IHZhbHVlLm1lc3NhZ2UudXNhZ2UuY2FjaGVfcmVhZF9pbnB1dF90b2tlbnMpICE9IG51bGwgPyBfYiA6IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgYW50aHJvcGljOiB7XG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB2YWx1ZS5tZXNzYWdlLnVzYWdlLFxuICAgICAgICAgICAgICAgICAgICBjYWNoZUNyZWF0aW9uSW5wdXRUb2tlbnM6IChfYyA9IHZhbHVlLm1lc3NhZ2UudXNhZ2UuY2FjaGVfY3JlYXRpb25faW5wdXRfdG9rZW5zKSAhPSBudWxsID8gX2MgOiBudWxsXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZXNwb25zZS1tZXRhZGF0YVwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IChfZCA9IHZhbHVlLm1lc3NhZ2UuaWQpICE9IG51bGwgPyBfZCA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICAgIG1vZGVsSWQ6IChfZSA9IHZhbHVlLm1lc3NhZ2UubW9kZWwpICE9IG51bGwgPyBfZSA6IHZvaWQgMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwibWVzc2FnZV9kZWx0YVwiOiB7XG4gICAgICAgICAgICAgICAgdXNhZ2Uub3V0cHV0VG9rZW5zID0gdmFsdWUudXNhZ2Uub3V0cHV0X3Rva2VucztcbiAgICAgICAgICAgICAgICB1c2FnZS50b3RhbFRva2VucyA9ICgoX2YgPSB1c2FnZS5pbnB1dFRva2VucykgIT0gbnVsbCA/IF9mIDogMCkgKyAoKF9nID0gdmFsdWUudXNhZ2Uub3V0cHV0X3Rva2VucykgIT0gbnVsbCA/IF9nIDogMCk7XG4gICAgICAgICAgICAgICAgZmluaXNoUmVhc29uID0gbWFwQW50aHJvcGljU3RvcFJlYXNvbih7XG4gICAgICAgICAgICAgICAgICBmaW5pc2hSZWFzb246IHZhbHVlLmRlbHRhLnN0b3BfcmVhc29uLFxuICAgICAgICAgICAgICAgICAgaXNKc29uUmVzcG9uc2VGcm9tVG9vbDogdXNlc0pzb25SZXNwb25zZVRvb2xcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2FzZSBcIm1lc3NhZ2Vfc3RvcFwiOiB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmluaXNoXCIsXG4gICAgICAgICAgICAgICAgICBmaW5pc2hSZWFzb24sXG4gICAgICAgICAgICAgICAgICB1c2FnZSxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2FzZSBcImVycm9yXCI6IHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcImVycm9yXCIsIGVycm9yOiB2YWx1ZS5lcnJvciB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGNvbnN0IF9leGhhdXN0aXZlQ2hlY2sgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGNodW5rIHR5cGU6ICR7X2V4aGF1c3RpdmVDaGVja31gKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICByZXF1ZXN0OiB7IGJvZHkgfSxcbiAgICAgIHJlc3BvbnNlOiB7IGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyB9XG4gICAgfTtcbiAgfVxufTtcbnZhciBhbnRocm9waWNNZXNzYWdlc1Jlc3BvbnNlU2NoZW1hID0gejUub2JqZWN0KHtcbiAgdHlwZTogejUubGl0ZXJhbChcIm1lc3NhZ2VcIiksXG4gIGlkOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gIG1vZGVsOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gIGNvbnRlbnQ6IHo1LmFycmF5KFxuICAgIHo1LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejUubGl0ZXJhbChcInRleHRcIiksXG4gICAgICAgIHRleHQ6IHo1LnN0cmluZygpLFxuICAgICAgICBjaXRhdGlvbnM6IHo1LmFycmF5KGNpdGF0aW9uU2NoZW1hKS5vcHRpb25hbCgpXG4gICAgICB9KSxcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJ0aGlua2luZ1wiKSxcbiAgICAgICAgdGhpbmtpbmc6IHo1LnN0cmluZygpLFxuICAgICAgICBzaWduYXR1cmU6IHo1LnN0cmluZygpXG4gICAgICB9KSxcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJyZWRhY3RlZF90aGlua2luZ1wiKSxcbiAgICAgICAgZGF0YTogejUuc3RyaW5nKClcbiAgICAgIH0pLFxuICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejUubGl0ZXJhbChcInRvb2xfdXNlXCIpLFxuICAgICAgICBpZDogejUuc3RyaW5nKCksXG4gICAgICAgIG5hbWU6IHo1LnN0cmluZygpLFxuICAgICAgICBpbnB1dDogejUudW5rbm93bigpXG4gICAgICB9KSxcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJzZXJ2ZXJfdG9vbF91c2VcIiksXG4gICAgICAgIGlkOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgbmFtZTogejUuc3RyaW5nKCksXG4gICAgICAgIGlucHV0OiB6NS5yZWNvcmQoejUuc3RyaW5nKCksIHo1LnVua25vd24oKSkubnVsbGlzaCgpXG4gICAgICB9KSxcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJ3ZWJfc2VhcmNoX3Rvb2xfcmVzdWx0XCIpLFxuICAgICAgICB0b29sX3VzZV9pZDogejUuc3RyaW5nKCksXG4gICAgICAgIGNvbnRlbnQ6IHo1LnVuaW9uKFtcbiAgICAgICAgICB6NS5hcnJheShcbiAgICAgICAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJ3ZWJfc2VhcmNoX3Jlc3VsdFwiKSxcbiAgICAgICAgICAgICAgdXJsOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgdGl0bGU6IHo1LnN0cmluZygpLFxuICAgICAgICAgICAgICBlbmNyeXB0ZWRfY29udGVudDogejUuc3RyaW5nKCksXG4gICAgICAgICAgICAgIHBhZ2VfYWdlOiB6NS5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKSxcbiAgICAgICAgICB6NS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejUubGl0ZXJhbChcIndlYl9zZWFyY2hfdG9vbF9yZXN1bHRfZXJyb3JcIiksXG4gICAgICAgICAgICBlcnJvcl9jb2RlOiB6NS5zdHJpbmcoKVxuICAgICAgICAgIH0pXG4gICAgICAgIF0pXG4gICAgICB9KSxcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJjb2RlX2V4ZWN1dGlvbl90b29sX3Jlc3VsdFwiKSxcbiAgICAgICAgdG9vbF91c2VfaWQ6IHo1LnN0cmluZygpLFxuICAgICAgICBjb250ZW50OiB6NS51bmlvbihbXG4gICAgICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJjb2RlX2V4ZWN1dGlvbl9yZXN1bHRcIiksXG4gICAgICAgICAgICBzdGRvdXQ6IHo1LnN0cmluZygpLFxuICAgICAgICAgICAgc3RkZXJyOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHJldHVybl9jb2RlOiB6NS5udW1iZXIoKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwiY29kZV9leGVjdXRpb25fdG9vbF9yZXN1bHRfZXJyb3JcIiksXG4gICAgICAgICAgICBlcnJvcl9jb2RlOiB6NS5zdHJpbmcoKVxuICAgICAgICAgIH0pXG4gICAgICAgIF0pXG4gICAgICB9KVxuICAgIF0pXG4gICksXG4gIHN0b3BfcmVhc29uOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gIHVzYWdlOiB6NS5sb29zZU9iamVjdCh7XG4gICAgaW5wdXRfdG9rZW5zOiB6NS5udW1iZXIoKSxcbiAgICBvdXRwdXRfdG9rZW5zOiB6NS5udW1iZXIoKSxcbiAgICBjYWNoZV9jcmVhdGlvbl9pbnB1dF90b2tlbnM6IHo1Lm51bWJlcigpLm51bGxpc2goKSxcbiAgICBjYWNoZV9yZWFkX2lucHV0X3Rva2VuczogejUubnVtYmVyKCkubnVsbGlzaCgpXG4gIH0pXG59KTtcbnZhciBhbnRocm9waWNNZXNzYWdlc0NodW5rU2NoZW1hID0gejUuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gIHo1Lm9iamVjdCh7XG4gICAgdHlwZTogejUubGl0ZXJhbChcIm1lc3NhZ2Vfc3RhcnRcIiksXG4gICAgbWVzc2FnZTogejUub2JqZWN0KHtcbiAgICAgIGlkOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICBtb2RlbDogejUuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgdXNhZ2U6IHo1Lmxvb3NlT2JqZWN0KHtcbiAgICAgICAgaW5wdXRfdG9rZW5zOiB6NS5udW1iZXIoKSxcbiAgICAgICAgb3V0cHV0X3Rva2VuczogejUubnVtYmVyKCksXG4gICAgICAgIGNhY2hlX2NyZWF0aW9uX2lucHV0X3Rva2VuczogejUubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgICBjYWNoZV9yZWFkX2lucHV0X3Rva2VuczogejUubnVtYmVyKCkubnVsbGlzaCgpXG4gICAgICB9KVxuICAgIH0pXG4gIH0pLFxuICB6NS5vYmplY3Qoe1xuICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJjb250ZW50X2Jsb2NrX3N0YXJ0XCIpLFxuICAgIGluZGV4OiB6NS5udW1iZXIoKSxcbiAgICBjb250ZW50X2Jsb2NrOiB6NS5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJ0ZXh0XCIpLFxuICAgICAgICB0ZXh0OiB6NS5zdHJpbmcoKVxuICAgICAgfSksXG4gICAgICB6NS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwidGhpbmtpbmdcIiksXG4gICAgICAgIHRoaW5raW5nOiB6NS5zdHJpbmcoKVxuICAgICAgfSksXG4gICAgICB6NS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwidG9vbF91c2VcIiksXG4gICAgICAgIGlkOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgbmFtZTogejUuc3RyaW5nKClcbiAgICAgIH0pLFxuICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejUubGl0ZXJhbChcInJlZGFjdGVkX3RoaW5raW5nXCIpLFxuICAgICAgICBkYXRhOiB6NS5zdHJpbmcoKVxuICAgICAgfSksXG4gICAgICB6NS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwic2VydmVyX3Rvb2xfdXNlXCIpLFxuICAgICAgICBpZDogejUuc3RyaW5nKCksXG4gICAgICAgIG5hbWU6IHo1LnN0cmluZygpLFxuICAgICAgICBpbnB1dDogejUucmVjb3JkKHo1LnN0cmluZygpLCB6NS51bmtub3duKCkpLm51bGxpc2goKVxuICAgICAgfSksXG4gICAgICB6NS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwid2ViX3NlYXJjaF90b29sX3Jlc3VsdFwiKSxcbiAgICAgICAgdG9vbF91c2VfaWQ6IHo1LnN0cmluZygpLFxuICAgICAgICBjb250ZW50OiB6NS51bmlvbihbXG4gICAgICAgICAgejUuYXJyYXkoXG4gICAgICAgICAgICB6NS5vYmplY3Qoe1xuICAgICAgICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwid2ViX3NlYXJjaF9yZXN1bHRcIiksXG4gICAgICAgICAgICAgIHVybDogejUuc3RyaW5nKCksXG4gICAgICAgICAgICAgIHRpdGxlOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgZW5jcnlwdGVkX2NvbnRlbnQ6IHo1LnN0cmluZygpLFxuICAgICAgICAgICAgICBwYWdlX2FnZTogejUuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICksXG4gICAgICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJ3ZWJfc2VhcmNoX3Rvb2xfcmVzdWx0X2Vycm9yXCIpLFxuICAgICAgICAgICAgZXJyb3JfY29kZTogejUuc3RyaW5nKClcbiAgICAgICAgICB9KVxuICAgICAgICBdKVxuICAgICAgfSksXG4gICAgICB6NS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwiY29kZV9leGVjdXRpb25fdG9vbF9yZXN1bHRcIiksXG4gICAgICAgIHRvb2xfdXNlX2lkOiB6NS5zdHJpbmcoKSxcbiAgICAgICAgY29udGVudDogejUudW5pb24oW1xuICAgICAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6NS5saXRlcmFsKFwiY29kZV9leGVjdXRpb25fcmVzdWx0XCIpLFxuICAgICAgICAgICAgc3Rkb3V0OiB6NS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHN0ZGVycjogejUuc3RyaW5nKCksXG4gICAgICAgICAgICByZXR1cm5fY29kZTogejUubnVtYmVyKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6NS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejUubGl0ZXJhbChcImNvZGVfZXhlY3V0aW9uX3Rvb2xfcmVzdWx0X2Vycm9yXCIpLFxuICAgICAgICAgICAgZXJyb3JfY29kZTogejUuc3RyaW5nKClcbiAgICAgICAgICB9KVxuICAgICAgICBdKVxuICAgICAgfSlcbiAgICBdKVxuICB9KSxcbiAgejUub2JqZWN0KHtcbiAgICB0eXBlOiB6NS5saXRlcmFsKFwiY29udGVudF9ibG9ja19kZWx0YVwiKSxcbiAgICBpbmRleDogejUubnVtYmVyKCksXG4gICAgZGVsdGE6IHo1LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejUubGl0ZXJhbChcImlucHV0X2pzb25fZGVsdGFcIiksXG4gICAgICAgIHBhcnRpYWxfanNvbjogejUuc3RyaW5nKClcbiAgICAgIH0pLFxuICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejUubGl0ZXJhbChcInRleHRfZGVsdGFcIiksXG4gICAgICAgIHRleHQ6IHo1LnN0cmluZygpXG4gICAgICB9KSxcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJ0aGlua2luZ19kZWx0YVwiKSxcbiAgICAgICAgdGhpbmtpbmc6IHo1LnN0cmluZygpXG4gICAgICB9KSxcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJzaWduYXR1cmVfZGVsdGFcIiksXG4gICAgICAgIHNpZ25hdHVyZTogejUuc3RyaW5nKClcbiAgICAgIH0pLFxuICAgICAgejUub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejUubGl0ZXJhbChcImNpdGF0aW9uc19kZWx0YVwiKSxcbiAgICAgICAgY2l0YXRpb246IGNpdGF0aW9uU2NoZW1hXG4gICAgICB9KVxuICAgIF0pXG4gIH0pLFxuICB6NS5vYmplY3Qoe1xuICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJjb250ZW50X2Jsb2NrX3N0b3BcIiksXG4gICAgaW5kZXg6IHo1Lm51bWJlcigpXG4gIH0pLFxuICB6NS5vYmplY3Qoe1xuICAgIHR5cGU6IHo1LmxpdGVyYWwoXCJlcnJvclwiKSxcbiAgICBlcnJvcjogejUub2JqZWN0KHtcbiAgICAgIHR5cGU6IHo1LnN0cmluZygpLFxuICAgICAgbWVzc2FnZTogejUuc3RyaW5nKClcbiAgICB9KVxuICB9KSxcbiAgejUub2JqZWN0KHtcbiAgICB0eXBlOiB6NS5saXRlcmFsKFwibWVzc2FnZV9kZWx0YVwiKSxcbiAgICBkZWx0YTogejUub2JqZWN0KHsgc3RvcF9yZWFzb246IHo1LnN0cmluZygpLm51bGxpc2goKSB9KSxcbiAgICB1c2FnZTogejUub2JqZWN0KHsgb3V0cHV0X3Rva2VuczogejUubnVtYmVyKCkgfSlcbiAgfSksXG4gIHo1Lm9iamVjdCh7XG4gICAgdHlwZTogejUubGl0ZXJhbChcIm1lc3NhZ2Vfc3RvcFwiKVxuICB9KSxcbiAgejUub2JqZWN0KHtcbiAgICB0eXBlOiB6NS5saXRlcmFsKFwicGluZ1wiKVxuICB9KVxuXSk7XG52YXIgYW50aHJvcGljUmVhc29uaW5nTWV0YWRhdGFTY2hlbWEgPSB6NS5vYmplY3Qoe1xuICBzaWduYXR1cmU6IHo1LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHJlZGFjdGVkRGF0YTogejUuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG5cbi8vIHNyYy90b29sL2Jhc2hfMjAyNDEwMjIudHNcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5IH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB6NiBmcm9tIFwiem9kL3Y0XCI7XG52YXIgYmFzaF8yMDI0MTAyMiA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5KHtcbiAgaWQ6IFwiYW50aHJvcGljLmJhc2hfMjAyNDEwMjJcIixcbiAgbmFtZTogXCJiYXNoXCIsXG4gIGlucHV0U2NoZW1hOiB6Ni5vYmplY3Qoe1xuICAgIGNvbW1hbmQ6IHo2LnN0cmluZygpLFxuICAgIHJlc3RhcnQ6IHo2LmJvb2xlYW4oKS5vcHRpb25hbCgpXG4gIH0pXG59KTtcblxuLy8gc3JjL3Rvb2wvYmFzaF8yMDI1MDEyNC50c1xuaW1wb3J0IHsgY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnkgYXMgY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnkyIH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB6NyBmcm9tIFwiem9kL3Y0XCI7XG52YXIgYmFzaF8yMDI1MDEyNCA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5Mih7XG4gIGlkOiBcImFudGhyb3BpYy5iYXNoXzIwMjUwMTI0XCIsXG4gIG5hbWU6IFwiYmFzaFwiLFxuICBpbnB1dFNjaGVtYTogejcub2JqZWN0KHtcbiAgICBjb21tYW5kOiB6Ny5zdHJpbmcoKSxcbiAgICByZXN0YXJ0OiB6Ny5ib29sZWFuKCkub3B0aW9uYWwoKVxuICB9KVxufSk7XG5cbi8vIHNyYy90b29sL2NvbXB1dGVyXzIwMjQxMDIyLnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeTMgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6OCB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBjb21wdXRlcl8yMDI0MTAyMiA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5Myh7XG4gIGlkOiBcImFudGhyb3BpYy5jb21wdXRlcl8yMDI0MTAyMlwiLFxuICBuYW1lOiBcImNvbXB1dGVyXCIsXG4gIGlucHV0U2NoZW1hOiB6OC5vYmplY3Qoe1xuICAgIGFjdGlvbjogejguZW51bShbXG4gICAgICBcImtleVwiLFxuICAgICAgXCJ0eXBlXCIsXG4gICAgICBcIm1vdXNlX21vdmVcIixcbiAgICAgIFwibGVmdF9jbGlja1wiLFxuICAgICAgXCJsZWZ0X2NsaWNrX2RyYWdcIixcbiAgICAgIFwicmlnaHRfY2xpY2tcIixcbiAgICAgIFwibWlkZGxlX2NsaWNrXCIsXG4gICAgICBcImRvdWJsZV9jbGlja1wiLFxuICAgICAgXCJzY3JlZW5zaG90XCIsXG4gICAgICBcImN1cnNvcl9wb3NpdGlvblwiXG4gICAgXSksXG4gICAgY29vcmRpbmF0ZTogejguYXJyYXkoejgubnVtYmVyKCkuaW50KCkpLm9wdGlvbmFsKCksXG4gICAgdGV4dDogejguc3RyaW5nKCkub3B0aW9uYWwoKVxuICB9KVxufSk7XG5cbi8vIHNyYy90b29sL2NvbXB1dGVyXzIwMjUwMTI0LnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeTQgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6OSB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBjb21wdXRlcl8yMDI1MDEyNCA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5NCh7XG4gIGlkOiBcImFudGhyb3BpYy5jb21wdXRlcl8yMDI1MDEyNFwiLFxuICBuYW1lOiBcImNvbXB1dGVyXCIsXG4gIGlucHV0U2NoZW1hOiB6OS5vYmplY3Qoe1xuICAgIGFjdGlvbjogejkuZW51bShbXG4gICAgICBcImtleVwiLFxuICAgICAgXCJob2xkX2tleVwiLFxuICAgICAgXCJ0eXBlXCIsXG4gICAgICBcImN1cnNvcl9wb3NpdGlvblwiLFxuICAgICAgXCJtb3VzZV9tb3ZlXCIsXG4gICAgICBcImxlZnRfbW91c2VfZG93blwiLFxuICAgICAgXCJsZWZ0X21vdXNlX3VwXCIsXG4gICAgICBcImxlZnRfY2xpY2tcIixcbiAgICAgIFwibGVmdF9jbGlja19kcmFnXCIsXG4gICAgICBcInJpZ2h0X2NsaWNrXCIsXG4gICAgICBcIm1pZGRsZV9jbGlja1wiLFxuICAgICAgXCJkb3VibGVfY2xpY2tcIixcbiAgICAgIFwidHJpcGxlX2NsaWNrXCIsXG4gICAgICBcInNjcm9sbFwiLFxuICAgICAgXCJ3YWl0XCIsXG4gICAgICBcInNjcmVlbnNob3RcIlxuICAgIF0pLFxuICAgIGNvb3JkaW5hdGU6IHo5LnR1cGxlKFt6OS5udW1iZXIoKS5pbnQoKSwgejkubnVtYmVyKCkuaW50KCldKS5vcHRpb25hbCgpLFxuICAgIGR1cmF0aW9uOiB6OS5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIHNjcm9sbF9hbW91bnQ6IHo5Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgc2Nyb2xsX2RpcmVjdGlvbjogejkuZW51bShbXCJ1cFwiLCBcImRvd25cIiwgXCJsZWZ0XCIsIFwicmlnaHRcIl0pLm9wdGlvbmFsKCksXG4gICAgc3RhcnRfY29vcmRpbmF0ZTogejkudHVwbGUoW3o5Lm51bWJlcigpLmludCgpLCB6OS5udW1iZXIoKS5pbnQoKV0pLm9wdGlvbmFsKCksXG4gICAgdGV4dDogejkuc3RyaW5nKCkub3B0aW9uYWwoKVxuICB9KVxufSk7XG5cbi8vIHNyYy90b29sL3RleHQtZWRpdG9yXzIwMjQxMDIyLnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeTUgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTAgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgdGV4dEVkaXRvcl8yMDI0MTAyMiA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5NSh7XG4gIGlkOiBcImFudGhyb3BpYy50ZXh0X2VkaXRvcl8yMDI0MTAyMlwiLFxuICBuYW1lOiBcInN0cl9yZXBsYWNlX2VkaXRvclwiLFxuICBpbnB1dFNjaGVtYTogejEwLm9iamVjdCh7XG4gICAgY29tbWFuZDogejEwLmVudW0oW1widmlld1wiLCBcImNyZWF0ZVwiLCBcInN0cl9yZXBsYWNlXCIsIFwiaW5zZXJ0XCIsIFwidW5kb19lZGl0XCJdKSxcbiAgICBwYXRoOiB6MTAuc3RyaW5nKCksXG4gICAgZmlsZV90ZXh0OiB6MTAuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpbnNlcnRfbGluZTogejEwLm51bWJlcigpLmludCgpLm9wdGlvbmFsKCksXG4gICAgbmV3X3N0cjogejEwLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgb2xkX3N0cjogejEwLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdmlld19yYW5nZTogejEwLmFycmF5KHoxMC5udW1iZXIoKS5pbnQoKSkub3B0aW9uYWwoKVxuICB9KVxufSk7XG5cbi8vIHNyYy90b29sL3RleHQtZWRpdG9yXzIwMjUwMTI0LnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeTYgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTEgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgdGV4dEVkaXRvcl8yMDI1MDEyNCA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5Nih7XG4gIGlkOiBcImFudGhyb3BpYy50ZXh0X2VkaXRvcl8yMDI1MDEyNFwiLFxuICBuYW1lOiBcInN0cl9yZXBsYWNlX2VkaXRvclwiLFxuICBpbnB1dFNjaGVtYTogejExLm9iamVjdCh7XG4gICAgY29tbWFuZDogejExLmVudW0oW1widmlld1wiLCBcImNyZWF0ZVwiLCBcInN0cl9yZXBsYWNlXCIsIFwiaW5zZXJ0XCIsIFwidW5kb19lZGl0XCJdKSxcbiAgICBwYXRoOiB6MTEuc3RyaW5nKCksXG4gICAgZmlsZV90ZXh0OiB6MTEuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpbnNlcnRfbGluZTogejExLm51bWJlcigpLmludCgpLm9wdGlvbmFsKCksXG4gICAgbmV3X3N0cjogejExLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgb2xkX3N0cjogejExLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdmlld19yYW5nZTogejExLmFycmF5KHoxMS5udW1iZXIoKS5pbnQoKSkub3B0aW9uYWwoKVxuICB9KVxufSk7XG5cbi8vIHNyYy90b29sL3RleHQtZWRpdG9yXzIwMjUwNDI5LnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeTcgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTIgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgdGV4dEVkaXRvcl8yMDI1MDQyOSA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5Nyh7XG4gIGlkOiBcImFudGhyb3BpYy50ZXh0X2VkaXRvcl8yMDI1MDQyOVwiLFxuICBuYW1lOiBcInN0cl9yZXBsYWNlX2Jhc2VkX2VkaXRfdG9vbFwiLFxuICBpbnB1dFNjaGVtYTogejEyLm9iamVjdCh7XG4gICAgY29tbWFuZDogejEyLmVudW0oW1widmlld1wiLCBcImNyZWF0ZVwiLCBcInN0cl9yZXBsYWNlXCIsIFwiaW5zZXJ0XCJdKSxcbiAgICBwYXRoOiB6MTIuc3RyaW5nKCksXG4gICAgZmlsZV90ZXh0OiB6MTIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpbnNlcnRfbGluZTogejEyLm51bWJlcigpLmludCgpLm9wdGlvbmFsKCksXG4gICAgbmV3X3N0cjogejEyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgb2xkX3N0cjogejEyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdmlld19yYW5nZTogejEyLmFycmF5KHoxMi5udW1iZXIoKS5pbnQoKSkub3B0aW9uYWwoKVxuICB9KVxufSk7XG5cbi8vIHNyYy9hbnRocm9waWMtdG9vbHMudHNcbnZhciBhbnRocm9waWNUb29scyA9IHtcbiAgLyoqXG4gICAqIFRoZSBiYXNoIHRvb2wgZW5hYmxlcyBDbGF1ZGUgdG8gZXhlY3V0ZSBzaGVsbCBjb21tYW5kcyBpbiBhIHBlcnNpc3RlbnQgYmFzaCBzZXNzaW9uLFxuICAgKiBhbGxvd2luZyBzeXN0ZW0gb3BlcmF0aW9ucywgc2NyaXB0IGV4ZWN1dGlvbiwgYW5kIGNvbW1hbmQtbGluZSBhdXRvbWF0aW9uLlxuICAgKlxuICAgKiBJbWFnZSByZXN1bHRzIGFyZSBzdXBwb3J0ZWQuXG4gICAqXG4gICAqIFRvb2wgbmFtZSBtdXN0IGJlIGBiYXNoYC5cbiAgICovXG4gIGJhc2hfMjAyNDEwMjIsXG4gIC8qKlxuICAgKiBUaGUgYmFzaCB0b29sIGVuYWJsZXMgQ2xhdWRlIHRvIGV4ZWN1dGUgc2hlbGwgY29tbWFuZHMgaW4gYSBwZXJzaXN0ZW50IGJhc2ggc2Vzc2lvbixcbiAgICogYWxsb3dpbmcgc3lzdGVtIG9wZXJhdGlvbnMsIHNjcmlwdCBleGVjdXRpb24sIGFuZCBjb21tYW5kLWxpbmUgYXV0b21hdGlvbi5cbiAgICpcbiAgICogSW1hZ2UgcmVzdWx0cyBhcmUgc3VwcG9ydGVkLlxuICAgKlxuICAgKiBUb29sIG5hbWUgbXVzdCBiZSBgYmFzaGAuXG4gICAqL1xuICBiYXNoXzIwMjUwMTI0LFxuICAvKipcbiAgICogQ2xhdWRlIGNhbiBhbmFseXplIGRhdGEsIGNyZWF0ZSB2aXN1YWxpemF0aW9ucywgcGVyZm9ybSBjb21wbGV4IGNhbGN1bGF0aW9ucyxcbiAgICogcnVuIHN5c3RlbSBjb21tYW5kcywgY3JlYXRlIGFuZCBlZGl0IGZpbGVzLCBhbmQgcHJvY2VzcyB1cGxvYWRlZCBmaWxlcyBkaXJlY3RseSB3aXRoaW5cbiAgICogdGhlIEFQSSBjb252ZXJzYXRpb24uXG4gICAqXG4gICAqIFRoZSBjb2RlIGV4ZWN1dGlvbiB0b29sIGFsbG93cyBDbGF1ZGUgdG8gcnVuIEJhc2ggY29tbWFuZHMgYW5kIG1hbmlwdWxhdGUgZmlsZXMsXG4gICAqIGluY2x1ZGluZyB3cml0aW5nIGNvZGUsIGluIGEgc2VjdXJlLCBzYW5kYm94ZWQgZW52aXJvbm1lbnQuXG4gICAqXG4gICAqIFRvb2wgbmFtZSBtdXN0IGJlIGBjb2RlX2V4ZWN1dGlvbmAuXG4gICAqL1xuICBjb2RlRXhlY3V0aW9uXzIwMjUwNTIyLFxuICAvKipcbiAgICogQ2xhdWRlIGNhbiBpbnRlcmFjdCB3aXRoIGNvbXB1dGVyIGVudmlyb25tZW50cyB0aHJvdWdoIHRoZSBjb21wdXRlciB1c2UgdG9vbCwgd2hpY2hcbiAgICogcHJvdmlkZXMgc2NyZWVuc2hvdCBjYXBhYmlsaXRpZXMgYW5kIG1vdXNlL2tleWJvYXJkIGNvbnRyb2wgZm9yIGF1dG9ub21vdXMgZGVza3RvcCBpbnRlcmFjdGlvbi5cbiAgICpcbiAgICogSW1hZ2UgcmVzdWx0cyBhcmUgc3VwcG9ydGVkLlxuICAgKlxuICAgKiBUb29sIG5hbWUgbXVzdCBiZSBgY29tcHV0ZXJgLlxuICAgKlxuICAgKiBAcGFyYW0gZGlzcGxheVdpZHRoUHggLSBUaGUgd2lkdGggb2YgdGhlIGRpc3BsYXkgYmVpbmcgY29udHJvbGxlZCBieSB0aGUgbW9kZWwgaW4gcGl4ZWxzLlxuICAgKiBAcGFyYW0gZGlzcGxheUhlaWdodFB4IC0gVGhlIGhlaWdodCBvZiB0aGUgZGlzcGxheSBiZWluZyBjb250cm9sbGVkIGJ5IHRoZSBtb2RlbCBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSBkaXNwbGF5TnVtYmVyIC0gVGhlIGRpc3BsYXkgbnVtYmVyIHRvIGNvbnRyb2wgKG9ubHkgcmVsZXZhbnQgZm9yIFgxMSBlbnZpcm9ubWVudHMpLiBJZiBzcGVjaWZpZWQsIHRoZSB0b29sIHdpbGwgYmUgcHJvdmlkZWQgYSBkaXNwbGF5IG51bWJlciBpbiB0aGUgdG9vbCBkZWZpbml0aW9uLlxuICAgKi9cbiAgY29tcHV0ZXJfMjAyNDEwMjIsXG4gIC8qKlxuICAgKiBDbGF1ZGUgY2FuIGludGVyYWN0IHdpdGggY29tcHV0ZXIgZW52aXJvbm1lbnRzIHRocm91Z2ggdGhlIGNvbXB1dGVyIHVzZSB0b29sLCB3aGljaFxuICAgKiBwcm92aWRlcyBzY3JlZW5zaG90IGNhcGFiaWxpdGllcyBhbmQgbW91c2Uva2V5Ym9hcmQgY29udHJvbCBmb3IgYXV0b25vbW91cyBkZXNrdG9wIGludGVyYWN0aW9uLlxuICAgKlxuICAgKiBJbWFnZSByZXN1bHRzIGFyZSBzdXBwb3J0ZWQuXG4gICAqXG4gICAqIFRvb2wgbmFtZSBtdXN0IGJlIGBjb21wdXRlcmAuXG4gICAqXG4gICAqIEBwYXJhbSBkaXNwbGF5V2lkdGhQeCAtIFRoZSB3aWR0aCBvZiB0aGUgZGlzcGxheSBiZWluZyBjb250cm9sbGVkIGJ5IHRoZSBtb2RlbCBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSBkaXNwbGF5SGVpZ2h0UHggLSBUaGUgaGVpZ2h0IG9mIHRoZSBkaXNwbGF5IGJlaW5nIGNvbnRyb2xsZWQgYnkgdGhlIG1vZGVsIGluIHBpeGVscy5cbiAgICogQHBhcmFtIGRpc3BsYXlOdW1iZXIgLSBUaGUgZGlzcGxheSBudW1iZXIgdG8gY29udHJvbCAob25seSByZWxldmFudCBmb3IgWDExIGVudmlyb25tZW50cykuIElmIHNwZWNpZmllZCwgdGhlIHRvb2wgd2lsbCBiZSBwcm92aWRlZCBhIGRpc3BsYXkgbnVtYmVyIGluIHRoZSB0b29sIGRlZmluaXRpb24uXG4gICAqL1xuICBjb21wdXRlcl8yMDI1MDEyNCxcbiAgLyoqXG4gICAqIENsYXVkZSBjYW4gdXNlIGFuIEFudGhyb3BpYy1kZWZpbmVkIHRleHQgZWRpdG9yIHRvb2wgdG8gdmlldyBhbmQgbW9kaWZ5IHRleHQgZmlsZXMsXG4gICAqIGhlbHBpbmcgeW91IGRlYnVnLCBmaXgsIGFuZCBpbXByb3ZlIHlvdXIgY29kZSBvciBvdGhlciB0ZXh0IGRvY3VtZW50cy4gVGhpcyBhbGxvd3MgQ2xhdWRlXG4gICAqIHRvIGRpcmVjdGx5IGludGVyYWN0IHdpdGggeW91ciBmaWxlcywgcHJvdmlkaW5nIGhhbmRzLW9uIGFzc2lzdGFuY2UgcmF0aGVyIHRoYW4ganVzdCBzdWdnZXN0aW5nIGNoYW5nZXMuXG4gICAqXG4gICAqIFRvb2wgbmFtZSBtdXN0IGJlIGBzdHJfcmVwbGFjZV9lZGl0b3JgLlxuICAgKi9cbiAgdGV4dEVkaXRvcl8yMDI0MTAyMixcbiAgLyoqXG4gICAqIENsYXVkZSBjYW4gdXNlIGFuIEFudGhyb3BpYy1kZWZpbmVkIHRleHQgZWRpdG9yIHRvb2wgdG8gdmlldyBhbmQgbW9kaWZ5IHRleHQgZmlsZXMsXG4gICAqIGhlbHBpbmcgeW91IGRlYnVnLCBmaXgsIGFuZCBpbXByb3ZlIHlvdXIgY29kZSBvciBvdGhlciB0ZXh0IGRvY3VtZW50cy4gVGhpcyBhbGxvd3MgQ2xhdWRlXG4gICAqIHRvIGRpcmVjdGx5IGludGVyYWN0IHdpdGggeW91ciBmaWxlcywgcHJvdmlkaW5nIGhhbmRzLW9uIGFzc2lzdGFuY2UgcmF0aGVyIHRoYW4ganVzdCBzdWdnZXN0aW5nIGNoYW5nZXMuXG4gICAqXG4gICAqIFRvb2wgbmFtZSBtdXN0IGJlIGBzdHJfcmVwbGFjZV9lZGl0b3JgLlxuICAgKi9cbiAgdGV4dEVkaXRvcl8yMDI1MDEyNCxcbiAgLyoqXG4gICAqIENsYXVkZSBjYW4gdXNlIGFuIEFudGhyb3BpYy1kZWZpbmVkIHRleHQgZWRpdG9yIHRvb2wgdG8gdmlldyBhbmQgbW9kaWZ5IHRleHQgZmlsZXMsXG4gICAqIGhlbHBpbmcgeW91IGRlYnVnLCBmaXgsIGFuZCBpbXByb3ZlIHlvdXIgY29kZSBvciBvdGhlciB0ZXh0IGRvY3VtZW50cy4gVGhpcyBhbGxvd3MgQ2xhdWRlXG4gICAqIHRvIGRpcmVjdGx5IGludGVyYWN0IHdpdGggeW91ciBmaWxlcywgcHJvdmlkaW5nIGhhbmRzLW9uIGFzc2lzdGFuY2UgcmF0aGVyIHRoYW4ganVzdCBzdWdnZXN0aW5nIGNoYW5nZXMuXG4gICAqXG4gICAqIE5vdGU6IFRoaXMgdmVyc2lvbiBkb2VzIG5vdCBzdXBwb3J0IHRoZSBcInVuZG9fZWRpdFwiIGNvbW1hbmQuXG4gICAqXG4gICAqIFRvb2wgbmFtZSBtdXN0IGJlIGBzdHJfcmVwbGFjZV9iYXNlZF9lZGl0X3Rvb2xgLlxuICAgKi9cbiAgdGV4dEVkaXRvcl8yMDI1MDQyOSxcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB3ZWIgc2VhcmNoIHRvb2wgdGhhdCBnaXZlcyBDbGF1ZGUgZGlyZWN0IGFjY2VzcyB0byByZWFsLXRpbWUgd2ViIGNvbnRlbnQuXG4gICAqXG4gICAqIFRvb2wgbmFtZSBtdXN0IGJlIGB3ZWJfc2VhcmNoYC5cbiAgICpcbiAgICogQHBhcmFtIG1heFVzZXMgLSBNYXhpbXVtIG51bWJlciBvZiB3ZWIgc2VhcmNoZXMgQ2xhdWRlIGNhbiBwZXJmb3JtIGR1cmluZyB0aGUgY29udmVyc2F0aW9uLlxuICAgKiBAcGFyYW0gYWxsb3dlZERvbWFpbnMgLSBPcHRpb25hbCBsaXN0IG9mIGRvbWFpbnMgdGhhdCBDbGF1ZGUgaXMgYWxsb3dlZCB0byBzZWFyY2guXG4gICAqIEBwYXJhbSBibG9ja2VkRG9tYWlucyAtIE9wdGlvbmFsIGxpc3Qgb2YgZG9tYWlucyB0aGF0IENsYXVkZSBzaG91bGQgYXZvaWQgd2hlbiBzZWFyY2hpbmcuXG4gICAqIEBwYXJhbSB1c2VyTG9jYXRpb24gLSBPcHRpb25hbCB1c2VyIGxvY2F0aW9uIGluZm9ybWF0aW9uIHRvIHByb3ZpZGUgZ2VvZ3JhcGhpY2FsbHkgcmVsZXZhbnQgc2VhcmNoIHJlc3VsdHMuXG4gICAqL1xuICB3ZWJTZWFyY2hfMjAyNTAzMDVcbn07XG5cbi8vIHNyYy9hbnRocm9waWMtcHJvdmlkZXIudHNcbmZ1bmN0aW9uIGNyZWF0ZUFudGhyb3BpYyhvcHRpb25zID0ge30pIHtcbiAgdmFyIF9hO1xuICBjb25zdCBiYXNlVVJMID0gKF9hID0gd2l0aG91dFRyYWlsaW5nU2xhc2gob3B0aW9ucy5iYXNlVVJMKSkgIT0gbnVsbCA/IF9hIDogXCJodHRwczovL2FwaS5hbnRocm9waWMuY29tL3YxXCI7XG4gIGNvbnN0IGdldEhlYWRlcnMgPSAoKSA9PiAoe1xuICAgIFwiYW50aHJvcGljLXZlcnNpb25cIjogXCIyMDIzLTA2LTAxXCIsXG4gICAgXCJ4LWFwaS1rZXlcIjogbG9hZEFwaUtleSh7XG4gICAgICBhcGlLZXk6IG9wdGlvbnMuYXBpS2V5LFxuICAgICAgZW52aXJvbm1lbnRWYXJpYWJsZU5hbWU6IFwiQU5USFJPUElDX0FQSV9LRVlcIixcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkFudGhyb3BpY1wiXG4gICAgfSksXG4gICAgLi4ub3B0aW9ucy5oZWFkZXJzXG4gIH0pO1xuICBjb25zdCBjcmVhdGVDaGF0TW9kZWwgPSAobW9kZWxJZCkgPT4ge1xuICAgIHZhciBfYTI7XG4gICAgcmV0dXJuIG5ldyBBbnRocm9waWNNZXNzYWdlc0xhbmd1YWdlTW9kZWwobW9kZWxJZCwge1xuICAgICAgcHJvdmlkZXI6IFwiYW50aHJvcGljLm1lc3NhZ2VzXCIsXG4gICAgICBiYXNlVVJMLFxuICAgICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICAgIGZldGNoOiBvcHRpb25zLmZldGNoLFxuICAgICAgZ2VuZXJhdGVJZDogKF9hMiA9IG9wdGlvbnMuZ2VuZXJhdGVJZCkgIT0gbnVsbCA/IF9hMiA6IGdlbmVyYXRlSWQyLFxuICAgICAgc3VwcG9ydGVkVXJsczogKCkgPT4gKHtcbiAgICAgICAgXCJpbWFnZS8qXCI6IFsvXmh0dHBzPzpcXC9cXC8uKiQvXVxuICAgICAgfSlcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgcHJvdmlkZXIgPSBmdW5jdGlvbihtb2RlbElkKSB7XG4gICAgaWYgKG5ldy50YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJUaGUgQW50aHJvcGljIG1vZGVsIGZ1bmN0aW9uIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCB0aGUgbmV3IGtleXdvcmQuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVDaGF0TW9kZWwobW9kZWxJZCk7XG4gIH07XG4gIHByb3ZpZGVyLmxhbmd1YWdlTW9kZWwgPSBjcmVhdGVDaGF0TW9kZWw7XG4gIHByb3ZpZGVyLmNoYXQgPSBjcmVhdGVDaGF0TW9kZWw7XG4gIHByb3ZpZGVyLm1lc3NhZ2VzID0gY3JlYXRlQ2hhdE1vZGVsO1xuICBwcm92aWRlci50ZXh0RW1iZWRkaW5nTW9kZWwgPSAobW9kZWxJZCkgPT4ge1xuICAgIHRocm93IG5ldyBOb1N1Y2hNb2RlbEVycm9yKHsgbW9kZWxJZCwgbW9kZWxUeXBlOiBcInRleHRFbWJlZGRpbmdNb2RlbFwiIH0pO1xuICB9O1xuICBwcm92aWRlci5pbWFnZU1vZGVsID0gKG1vZGVsSWQpID0+IHtcbiAgICB0aHJvdyBuZXcgTm9TdWNoTW9kZWxFcnJvcih7IG1vZGVsSWQsIG1vZGVsVHlwZTogXCJpbWFnZU1vZGVsXCIgfSk7XG4gIH07XG4gIHByb3ZpZGVyLnRvb2xzID0gYW50aHJvcGljVG9vbHM7XG4gIHJldHVybiBwcm92aWRlcjtcbn1cbnZhciBhbnRocm9waWMgPSBjcmVhdGVBbnRocm9waWMoKTtcbmV4cG9ydCB7XG4gIGFudGhyb3BpYyxcbiAgY3JlYXRlQW50aHJvcGljXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@ai-sdk+anthropic@2.0.17_zod@3.25.76/node_modules/@ai-sdk/anthropic/dist/index.mjs\n");

/***/ })

};
;